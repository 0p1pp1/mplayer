<?xml version="1.0" encoding="iso-8859-2"?>
<!-- synced with 1.87 -->
<chapter id="mencoder">
<title>A <application>MEncoder</application> használatának alapjai</title>

<para>
A <application>MEncoder</application> összes használható kapcsolójához és
a példákhoz kérlek nézd meg a man oldalt. Mindennapi példákért és a számos
kódolási paraméter bõvebb leírásáért olvasd el a
<ulink url="../../tech/encoding-tips.txt">kódolási tippeket</ulink>, amiket
számos levelezési lista szálból gyûjtöttünk össze az MPlayer-users-rõl.
Kereshetsz az
<ulink url="http://mplayerhq.hu/pipermail/mplayer-users/">archívumban</ulink>
a rengeteg beszélgetés között, melyek a <application>MEncoder</application>rel
történõ kódolást több szempontból vizsgálják és kiemelik a problémákat vele
kapcsolatban.
</para>

<sect1 id="menc-feat-mpeg4">
<title>Két menetes MPEG-4 (&quot;DivX&quot;) kódolás</title>

<para>
A név abból a ténybõl ered, hogy ez a módszer a fájlt <emphasis>kétszer</emphasis>
kódolja át. Az elsõ kódolás (szinkronizációs lépés) létrehoz pár ideiglenes,
néhány megabájtos fájlt (<filename>*.log</filename>), ezeket ne töröld le
még (az AVI-t letörölheted). A második lépésben, a két menetes kimenet
fájl lesz létrehozva, az ideiglenes fájlok bitrátájának felhasználásával. Az
eredmény fájlnak sokkal jobb lesz a képminõsége. Ha most hallasz errõl elõször,
nézz meg pár a neten elérhetõ leírást.
</para>

<example>
<title>audió sáv másolása</title>
<para>
Egy DVD két menetes kódolása MPEG-4 (&quot;DivX&quot;) AVI-ba az audió sáv
másolásával.
<screen>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -oac copy -o <replaceable>movie.avi</replaceable>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -oac copy -o <replaceable>movie.avi</replaceable>
</screen>
</para>
</example>

<example>
<title>audió sáv kódolása</title>
<para>
Egy DVD két menetes kódolása MPEG-4 (&quot;DivX&quot;) AVI-ba az audió sáv
MP3-ba alakításával.
<screen>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -oac mp3lame -lameopts vbr=3 -o <replaceable>movie.avi</replaceable>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -oac mp3lame -lameopts vbr=3 -o <replaceable>movie.avi</replaceable>
</screen>
</para>
</example>
</sect1>

<sect1 id="menc-feat-mpeg">
<title>Kódolás MPEG formátumba</title>
<para>
A <application>MEncoder</application> tud készíteni MPEG (MPEG-PS) formátumú
kimeneti fájlokat.
Általában, ha MPEG-1 vagy MPEG-2 videót használsz, az azért van, mert egy
korlátozott formátumhoz kódolsz, mint pl. az SVCD, a VCD vagy a DVD.
Ezen formátumok speciális igényei a
<link linkend="menc-feat-vcd-dvd">VCD és DVD készítési leírásban</link>
megtalálhatóak.
</para>

<para>
A <application>MEncoder</application> kimeneti fájl formátumának megváltoztatásához
használd a <option>-of mpeg</option> kapcsolót.
</para>

<para>
Példa:
<screen>
mencoder -of mpeg -ovc lavc -lavcopts vcodec=mpeg1video -oac copy <replaceable>egyéb_kapcsolók</replaceable> <replaceable>media.avi</replaceable> -o <replaceable>output.mpg</replaceable>
</screen>
</para>
</sect1>

<sect1 id="menc-feat-rescale">
<title>Filmek átméretezése</title>

<para>
Gyakran szükséged lehet a videó képméretének átméretezésére. Ennek több oka
lehet: fájl méretének csökkentése, hálózati sávszélesség, stb. A legtöbb ember
akkor is végez átméretezést, amikor DVD-ket vagy SVCD-ket konvertál DivX AVI-ba.
Ha át szeretnél méretezni, olvasd el a <link linkend="aspect">képméret arányok megtartásáról</link>
szóló részt.
</para>

<para>
A méretezési eljárást a <literal>scale</literal> videó szûrõ végzi:
<option>-vf scale=<replaceable>szélesség</replaceable>:<replaceable>magasság</replaceable></option>.
A minõsége beállítható a <option>-sws</option> kapcsolóval.
Ha ez nincs megadva, akkor a <application>MEncoder</application> a 2: bicubic-et használja.
</para>

<para>
Használat:
<screen>
mencoder <replaceable>input.mpg</replaceable> -ovc lavc -lavcopts vcodec=mpeg4 -vf scale=640:480 -o <replaceable>output.avi</replaceable>
</screen>
</para>
</sect1>


<sect1 id="menc-feat-streamcopy">
<title>Stream másolás</title>

<para>
<application>MEncoder</application> kétféleképpen tudja kezelni a folyamokat:
<emphasis role="bold">kódolni</emphasis> vagy <emphasis role="bold">másolni</emphasis>
tudja õket. Ez a rész a <emphasis role="bold">másolásról</emphasis> szól.
</para>

<itemizedlist>
<listitem><para>
  <emphasis role="bold">Videó stream</emphasis> (<option>-ovc copy</option> kapcsoló):
  szép dolgokat lehet vele csinálni :) Például FLI vagy VIVO vagy
  MPEG-1 videót tenni (nem konvertálni!) AVI fájlba! Természetesen csak az
  <application>MPlayer</application> tudja lejátszani az ilyen fájlokat :) Ennek
  valószínûleg gyakorlati haszna nincs. Ésszerûbben: a videó stream másolása
  hasznos lehet például ha csak az audió stream-et kell kódolni (például
  tömörítetlen PCM-et MP3-ba).
  </para></listitem>
<listitem><para>
  <emphasis role="bold">Audió stream</emphasis> (<option>-oac copy</option> kapcsoló):
  õszintén szólva... Bele lehet mixelni egy külsõ audió fájlt (MP3, WAV) a
  kimeneti stream-be. Használd a
  <option>-audiofile <replaceable>fájlnév</replaceable></option> kapcsolót
  ehhez.
  </para></listitem>
</itemizedlist>
</sect1>


<sect1 id="menc-feat-enc-images">
<title>Kódolás több bemeneti képfájlból (JPEG, PNG, TGA, SGI)</title>

<para>
A <application>MEncoder</application> képes egy vagy több JPEG, PNG vagy TGA fájlból
film létrehozására. Egy egyszerû framecopy-val MJPEG (Motion JPEG),
MPNG (Motion PNG) vagy MTGA (Motion TGA) fájlokat tud létrehozni.
</para>

<orderedlist>
<title>A folyamat leírása:</title>
<listitem><para>
  A <application>MEncoder</application> <emphasis>dekódolja</emphasis> a bemeneti
  képe(ke)t a <systemitem class="library">libjpeg</systemitem>-gel (ha PNG-ket
  dekódol, akkor a <systemitem class="library">libpng</systemitem>-vel).
  </para></listitem>
<listitem><para>
  Ezután a <application>MEncoder</application> a dekódolt képeket a kiválasztott
  videó tömörítõnek adja át (DivX4, XviD, FFmpeg msmpeg4, stb.).
  </para></listitem>
</orderedlist>

<formalpara>
<title>Példák</title>
<para>
A <option>-mf</option> kapcsoló magyarázata a man oldalon található.

<informalexample>
<para>
Egy MPEG-4-es fájl létrehozása az aktuális könyvtárból található összes
JPEG fájlból:
<screen>
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc lavc -lavcopts vcodec=mpeg4 -oac copy -o <replaceable>output.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Egy MPEG-4 fájl létrehozása néhány JPEG fájlból az aktuális könyvtárban:
<screen>
mencoder mf://<replaceable>frame001.jpg,frame002.jpg</replaceable> -mf w=800:h=600:fps=25:type=jpg -ovc lavc -lavcopts vcodec=mpeg4 -oac copy -o <replaceable>output.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Egy Motion JPEG (MJPEG) fájl készítése az aktuális könyvtár összes JPEG fájlából:
<screen>
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc copy -oac copy -o <replaceable>output.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Egy tömörítetlen fájl létrehozása az aktuális könyvtár összes PNG fájlából:
<screen>
mencoder mf:// -mf w=800:h=600:fps=25:type=png -ovc raw -oac copy -o <replaceable>output.avi</replaceable>
</screen>
</para>
</informalexample>

<note><para>
A szélességnek 4 egész többszörösének kell lennie, ez a RAW RGB AVI formátum megszorítása.
</para></note>

<informalexample>
<para>
Egy Motion PNG (MPNG) fájl létrehozása az aktuális könyvtár PNG fájlaiból:
<screen>
mencoder mf://*.png -mf w=800:h=600:fps=25:type=png -ovc copy -oac copy -o <replaceable>output.avi</replaceable> <!--
--></screen>
</para>
</informalexample>

<informalexample>
<para>
Egy Motion TGA (MTGA) fájl létrehozása az aktuális könyvtár összes TGA fájlából:
<screen>
mencoder mf://*.tga -mf w=800:h=600:fps=25:type=tga -ovc copy -oac copy -o <replaceable>output.avi</replaceable><!--
--></screen>
</para>
</informalexample>

</para>
</formalpara>
</sect1>


<sect1 id="menc-feat-extractsub">
<title>DVD felirat elmentése VOBsub fájlba</title>

<para>
A <application>MEncoder</application> képes a feliratok kiszedésére
a DVD-kbõl és elmentésére VOBsub formátumú fájlokba. Ezek két fájlból
állnak, <filename>.idx</filename> és <filename>.sub</filename> kiterjesztéssel,
és általában egy <filename>.rar</filename> archívba vannak becsomagolva.
Az <application>MPlayer</application> le tudja ezeket játszani a
<option>-vobsub</option> és a <option>-vobsubid</option> kapcsolókkal.
</para>

<para>
Meg kell adnod a kimeneti fájlok fájlnevét (az <filename>.idx</filename> vagy
<filename>.sub</filename> kiterjesztés nélkül) a
<option>-vobsubout</option> kapcsolóval és az ezen felirathoz tartozó
indexet a kimeneti fájlokban a <option>-vobsuboutindex</option>-szel.
</para>

<para>
Ha a bemenet nem DVD, akkor a <option>-ifo</option> kapcsolót kell
használnod ahhoz, hogy megadd, hogy <filename>.ifo</filename> fájl
szükséges a kimeneti <filename>.idx</filename> elkészítéséhez.
</para>

<para>
Ha a bemenet nem DVD és nincs <filename>.ifo</filename> fájlod,
a <option>-vobsubid</option> kapcsolót kell használnod, hogy megadd,
milyen nyelv id-t kell beletenni az <filename>.idx</filename> fájlba.
</para>

<para>
Mindkét esetben az éppen futó felirat hozzáíródik a <filename>.idx</filename>
és <filename>.sub</filename> fájlokhoz, amennyiben azok már léteznek. Így
ezeket le kell törölnöd, mielõtt nekiállnál.
</para>

<example>
<title>Két felirat másolása egy DVD-rõl két menetes kódolás közben</title>
<screen>
rm subtitles.idx subtitles.sub
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -vobsubout subtitles -vobsuboutindex 0 -sid 2
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -vobsubout subtitles -vobsuboutindex 1 -sid 5<!--
--></screen>
</example>

<example>
<title>Francia felirat másolása egy MPEG fájlból</title>
<screen>
rm subtitles.idx subtitles.sub
mencoder <replaceable>movie.mpg</replaceable> -ifo <replaceable>movie.ifo</replaceable> -vobsubout subtitles -vobsuboutindex 0 -vobsuboutid fr -sid 1 -nosound -ovc copy
</screen>
</example>

</sect1>

<sect1 id="aspect">
<title>Képarány megtartása</title>
<para>
A DVD-s és az SVCD-s (pl. MPEG-1/2) fájlokban van egy képméret arány érték, ami
leírja, hogy a lejátszónak hogyan kell méreteznie a videó stream-et, így az
embereknek nem lesz tojás fejük (pl.: 480x480 + 4:3 = 640x480). Ennek ellenére AVI-ba
(DivX) történõ kódoláskor figyelembe kell venned, hogy az AVI fejléc nem tárolja ezt
az értéket. A film átméretezése undorító és idõigényes, kell, hogy legyen egy jobb
megoldás!
</para>

<para>Van is.</para>

<para>
Az MPEG-4-nek van egy egyedülálló sajátossága: a videó stream tartalmazhatja a szükséges
képarányt. Igen, úgy mint az MPEG-1/2 (DVD, SVCD) és a H.263 fájlok. Sajnos azonban
<emphasis role="bold">nincs</emphasis> olyan videó lejátszó, mely az MPEG-4 ezen attribútumát
támogatná, kivéve az <application>MPlayer</application>t.
</para>

<para>
Ez a tulajdonság csak a
<link linkend="ffmpeg"><systemitem class="library">libavcodec</systemitem></link>
<systemitem>mpeg4</systemitem> codec-jével használható. Tartsd észben: habár az
<application>MPlayer</application> hibátlanul lejátsza a létrehozott fájlt,
a többi lejátszó rossz képarányt fog használni.
</para>

<para>
Ajánlott levágni a fekete sávokat a film képe felett és alatt.
Lásd a man oldalt a <systemitem>cropdetect</systemitem> és a
<systemitem>crop</systemitem> szûrõk használatához.
</para>

<para>
Használat
<screen>mencoder <replaceable>sample-svcd.mpg</replaceable> -ovc lavc -lavcopts vcodec=mpeg4:autoaspect -vf crop=714:548:0:14 -oac copy -o <replaceable>output.avi</replaceable></screen>
</para>
</sect1>

</chapter>
