<?xml version="1.0" encoding="iso-8859-2"?>
<!-- synced with r17322 -->
<chapter id="tv">
<title>TV</title>
<sect1 id="tv-input" xreflabel="TV vstup">
<title>TV vstup</title>

<para>
Tato sekce je zamìøena na zpøístupnìní
<emphasis role="bold">sledování/grabování z V4L kompatibilního TV tuneru
</emphasis>. Popis voleb k TV a ovládání z klávesnice naleznete v man
stránce.
</para>


<sect2 id="tv-compilation">
<title>Kompilace</title>

<procedure>
<step><para>
  Zaprvé musíte rekompilovat. <filename>./configure</filename> zdetekuje
  v4l hlavièkové soubory kernelu a existenci zaøízení
  <filename>/dev/video*</filename>. Pokud existují, bude zabudována
  podpora pro TV (viz výstup z <filename>./configure</filename>).
  </para></step>
<step><para>
  Ujistìte se, ¾e vá¹ tuner pracuje s jiným Linuxovým TV softwarem,
  napøíklad <application>XawTV</application>.
  </para></step>
</procedure>
</sect2>

<sect2 id="tv-tips">
<title>Tipy pro pou¾ívání</title>
<para>
Úplný seznam voleb je dostupný v manuálové stránce.
Zde je jen nìkolik typù:
</para>
<itemizedlist>
<listitem>
<para>
Pou¾ijte volbu <option>channels</option>. Pøíklad:
<screen>-tv channels=26-MTV1,23-TV2</screen>
Vysvìtlení: pou¾ití této volby, pou¾itelné budou pouze kanály 26 a 23 a
bude zde rovnì¾ krásný OSD text po pøepnutí kanálù, zobrazující jméno
kanálu. Mezery ve jménì kanálu musí být nahrazeny znakem
&quot;_&quot;.
</para>
</listitem>

<listitem>
<para>
Zvolte rozumné rozmìry obrazu. Rozmìry výsledného obrazu by mìly být
bezezbytku dìlitelné 16.
</para>
</listitem>

<listitem>
<para>
Pokud zachytáváte video se svislým rozli¹ením vy¹¹ím ne¾ polovina plného
rozli¹ení (èili 288 pro PAL nebo 240 pro NTSC), pak 'snímky', které dostanete,
budou ve skuteènosti prokládané páry pùlsnímkù.
V závislosti na tom, co chcete s videem dìlat, je mù¾ete nechat jak jsou,
destruktivnì odstranit proklad, nebo rozdìlit páry do individuálních políèek.
</para>
<para>
Jinak bude získaný snímek roztøepený
bìhem rychlých scén a regulátor datového toku nebude pravdìpodobnì schopen
ani udr¾et nastavený datový tok, vzhledem k tomu, ¾e prokladové artefakty
produkují velké mno¾ství detailù, co¾ spotøebovává velké pøenosové pásmo.
Odstraòování prokladu mù¾ete zapnout pomocí volby
<option>-vf pp=DEINT_TYPE</option>. Dobrou práci obvykle odvede
<option>pp=lb</option>, ale zále¾í na osobních preferencích. Prostudujte si
ostatní mo¾nosti odstraòování prokladu v manuálu a vyzkou¹ejte je.
</para>
</listitem>

<listitem>
<para>
Odstøihnìte mrtvý prostor. Kdy¾ zachytáváte video, oblasti na okrajích jsou
obvykle èerné, nebo obsahují nìjaký ¹um. Co¾ opìt zbyteènì spotøebovává
pøenosové pásmo. Pøesnìji to nejsou samotné èerné oblasti, ale ostrý pøechod
mezi èernou a svìtlej¹ím videem, ale to teï není dùle¾ité.
Ne¾ zaènete zachytávat, nastavte parametry volby <option>crop</option> tak,
aby byl ve¹kerý binec na okrajích odstøi¾en. Opìt se sna¾te zachovat rozumné
rozmìry výsledného obrazu.
</para>
</listitem>

<listitem>
<para>
Sledujte zatí¾ení CPU. Vìt¹inu èasu by nemìlo pøekroèit hranici 90%. Pokud
máte velkou vyrovnávací pamì» pro zachytávání, doká¾e
<application>MEncoder</application> pøe¾ít nìkolikasekundové pøetí¾ení, ale
nic víc. Radìji vypnìte 3D OpenGL spoøièe obrazovky a podobné vìci.
</para>
</listitem>

<listitem>
<para>
Nehrajte si se systémovými hodinami. <application>MEncoder</application>
pou¾ívá systémové hodiny pro A/V synchronizaci. Pokud pøestavíte systémové
hodiny (zvlá¹» nazpìt), <application>MEncoder</application> bude zmaten a
vy pøijdete o snímky. To je velmi dùle¾ité pokud jste pøipojeni k síti a
pou¾íváte nìjaký èasový synchronizaèní software jako je NTP. Musíte vypnout
NTP bìhem zachytávání, pokud chcete spolehlivì zachytávat.
</para>
</listitem>

<listitem>
<para>
Nemìòte <option>outfmt</option> pokud nevíte co dìláte, nebo va¹e
karta/ovladaè opravdu nepodporuje výchozí (YV12 barevný prostor).
Ve star¹í verzi <application>MPlayer</application>u/
<application>MEncoder</application>u bylo nutné nastavit výstupní formát.
Tento problém by mìl být v souèasných verzích vyøe¹en,
<option>outfmt</option> ji¾ není nadále potøeba a výchozí hodnoty vyhovují
pro vìt¹inu pøípadù. Napøíklad pokud zachytáváte do DivX pomocí
<systemitem class="library">libavcodec</systemitem>u a uvedete
<option>outfmt=RGB24</option> pro zvý¹ení kvality zachytávaných snímkù,
stejnì budou tyto snímky pozdìji konvertovány zpìt na YV12, tak¾e jediné co
tím získáte je spousta vyplýtvaného výkonu CPU.
</para>
</listitem>

<listitem>
<para>
Chcete-li nastavit barevný prostor I420 (<option>outfmt=i420</option>),
musíte pøidat i volbu <option>-vc rawi420</option> kvùli konfliktu fourcc
Intel Indeo video kodekem.
</para>
</listitem>

<listitem>
<para>
Existuje nìkolik cest, jak zachytávat zvuk. Mù¾ete nahrát zvuk buï pomocí
zvukové karty pomocí externího propojení mezi video kartou a linkovým
vstupem, nebo pou¾itím vestavìného ADC v èipu bt878. Ve druhém pøípadì
musíte naèíst ovladaè <emphasis role="bold">btaudio</emphasis>. Pøeètìte si
soubor <filename>linux/Documentation/sound/btaudio</filename> (ve zdrojácích
kernelu, nikoli <application>MPlayer</application>u) pro nìkolik instrukcí
jak pou¾ít tento ovladaè.
</para>
</listitem>

<listitem>
<para>
Pokud <application>MEncoder</application> nedoká¾e otevøít audio zaøízení,
ujistìte se, ¾e je opravdu k dispozici. Mù¾ete mít potí¾e se zvukovými
servery jako aRts (KDE) nebo ESD (GNOME). Pokud máte plnì duplexní zvukovou
kartu (témìø ka¾dá slu¹ná karta to ji¾ podporuje) a pou¾íváte KDE, zkuste
za¹krtnout volbu "full duplex" v menu nastavení zvukového serveru.
</para>
</listitem>
</itemizedlist>
</sect2>


<sect2 id="tv-examples">
<title>Pøíklady</title>

<informalexample>
<para>
Modelový výstup do AAlib :)
<screen>
mplayer -tv driver=dummy:width=640:height=480 -vo aa tv://<!--
--></screen>
</para>
</informalexample>

<informalexample>
<para>
Vstup ze standardního V4L:
<screen>
mplayer -tv driver=v4l:width=640:height=480:outfmt=i420 -vc rawi420 -vo xv tv://<!--
--></screen>
</para>
</informalexample>

<informalexample>
<para>
Mnohem sofistikovanìj¹í pøíklad. Zde <application>MEncoder</application>
zachytává obraz v plném PALu, oøízne okraje a odstraní proklad obrazu pomocí
lineárního smì¹ovacího algoritmu. Zvuk je komprimován konstantním datovým
tokem 64kbps LAME kodekem. Toto nastavení je vhodné pro zachytávání filmù.
<screen>
     mencoder -tv driver=v4l:width=768:height=576 \
     -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=900 \
     -oac mp3lame -lameopts cbr:br=64 \
     -vf crop=720:544:24:16,pp=lb -o <replaceable>výstupní.avi</replaceable> tv://
</screen>
</para>
</informalexample>

<informalexample>
<para>
Toto navíc pøe¹káluje video na 384x288 a zkomprimuje jej s datovým tokem
350kbps v re¾imu vysoké kvality. Volba vqmax uvolòuje kvantizer a umo¾ní
video kompresoru podr¾et takto nízký datový tok i za cenu sní¾ení kvality.
To lze pou¾ít pro záznam dlouhých TV seriálù, kde kvalita obrazu není a¾
tolik dùle¾itá.
<screen>
     mencoder -tv driver=v4l:width=768:height=576 \
     -ovc lavc -lavcopts vcodec=mpeg4:vbitrate=350:vhq:vqmax=31:keyint=300 \
     -oac mp3lame -lameopts cbr:br=48 \
     -vf crop=720:540:24:18,pp=lb,scale=384:288 -sws 1 -o <replaceable>výstupní.avi</replaceable> tv://
</screen>
Rovnì¾ mù¾ete nastavit men¹í rozmìry obrazu ve volbì <option>-tv</option>
a vyhnout se tak softwarovému ¹kálování, ale tento pøístup vy¾aduje
maximální mno¾ství informací a je trochu odolnìj¹í proti ¹umu. Èipy bt8x8
umí prùmìrování pixelù pouze ve svislém smìru díky hardwarovým omezením.
</para>
</informalexample>
</sect2>
</sect1>

</chapter>
