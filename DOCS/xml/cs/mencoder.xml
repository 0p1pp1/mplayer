<?xml version="1.0" encoding="iso-8859-2"?>
<!-- Synced with: 1.87 -->
<chapter id="mencoder">
<title>Základní pou¾ití <application>MEncoder</application>u</title>

<para>
Úplný seznam dostupných voleb a pøíkladù pro <application>MEncoder</application>
naleznete v man stránce. Øadu u¾iteèných pøíkladù a podrobných návodù pro
pou¾ití mnoha enkódovacích voleb naleznete v
<ulink url="../../tech/encoding-tips.txt">tipech pro enkódování</ulink>, které
byly získány z nìkolika diskusí v konferenci MPlayer-users. Prohledejte
<ulink url="http://mplayerhq.hu/pipermail/mplayer-users/">archivy</ulink>,
chcete-li bohatost diskusí o v¹ech aspektech a problémech vzta¾ených
k enkódování <application>MEncoder</application>em.
</para>

<sect1 id="menc-feat-mpeg4">
<title>Dvouprùchodové enkódování MPEG-4 (&quot;DivX&quot;)</title>

<para>
Název vychází z faktu, ¾e soubor je enkódován <emphasis>dvakrát</emphasis>.
První enkódování (dubbed pass) vytvoøí doèasné soubory
(<filename>*.log</filename>) velikosti nìkolika megabajtù, které zatím nema¾te
(mù¾ete smazat AVI). Ve druhém prùchodu je vytvoøen dvouprùchodový výstupní
soubor s pou¾itím øízení datového toku z doèasných souborù. Výsledný soubor
bude mít lep¹í kvalitu obrazu. Pokud jste o tom teï sly¹eli poprvé, mìli byste
si prostudovat nìkteré návody dostupné na netu.
</para>

<example>
<title>kopírování zvukové stopy</title>
<para>
Dvouprùchodové enkódování DVD do MPEG-4 (&quot;DivX&quot;) AVI zatímco se zvuk
pouze zkopíruje.
<screen>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -oac copy -o <replaceable>film.avi</replaceable>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -oac copy -o <replaceable>film.avi</replaceable>
</screen>
</para>
</example>

<example>
<title>enkódování zvukové stopy</title>
<para>
Dvouprùchodové enkódování DVD do MPEG-4 (&quot;DivX&quot;) AVI a souèasnì
enkódování zvukové stopy do MP3.
<screen>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -oac mp3lame -lameopts vbr=3 -o <replaceable>film.avi</replaceable>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -oac mp3lame -lameopts vbr=3 -o <replaceable>film.avi</replaceable>
</screen>
</para>
</example>
</sect1>

<sect1 id="menc-feat-mpeg">
<title>Enkódování do MPEG formátu</title>
<para>
<application>MEncoder</application> umí vytvoøit výstupní soubor formátu
MPEG (MPEG-PS).
Pokud pou¾íváte MPEG-1 nebo MPEG-2 video, obvykle je to proto, ¾e enkódujete
pro omezený formát jako je SVCD, VCD nebo DVD.
Konkrétní po¾adavky tìchto formátù jsou objasnìny v sekci
<link linkend="menc-feat-vcd-dvd">návod pro vytvoøení VCD a DVD</link>.
</para>

<para>
Výstupní souborový formát <application>MEncoder</application>u zmìníte pou¾itím
volby <option>-of mpeg</option>.
</para>

<para>
Example:
<screen>
mencoder -of mpeg -ovc lavc -lavcopts vcodec=mpeg1video -oac copy <replaceable>dal¹í_volby</replaceable> <replaceable>media.avi</replaceable> -o <replaceable>výstup.mpg</replaceable>
</screen>
</para>
</sect1>

<sect1 id="menc-feat-rescale">
<title>©kálování (zmìna velikosti) filmù</title>

<para>
Èasto potøebujeme zmìnit velikost obrázkù ve filmu a to z mnoha dùvodù: zmen¹ení
souboru, zátì¾e sítì atd. Mnoho lidí dokonce mìní velikost pøi pøevodu DVD nebo
SVCD do DivX AVI. Pokud si pøejete video pøe¹kálovat, pøeètìte si sekci
<link linkend="aspect">Zachování pomìru stran</link>.
</para>

<para>
Samotný proces ¹kálování je provádìn video filtrem <literal>scale</literal>:
<option>-vf scale=<replaceable>¹íøka</replaceable>:<replaceable>vý¹ka</replaceable></option>.
Jeho kvalita mù¾e být nastavena volbou <option>-sws</option>.
Pokud ji neuvedete, <application>MEncoder</application> pou¾ije 2: bikubickou.
</para>

<para>
Pou¾ití:
<screen>
mencoder <replaceable>vstup.mpg</replaceable> -ovc lavc -lavcopts vcodec=mpeg4 -vf scale=640:480 -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</sect1>


<sect1 id="menc-feat-streamcopy">
<title>Proudové kopírování</title>

<para>
<application>MEncoder</application> mù¾e zpracovat vstupní datové proudy dvìma
zpùsoby:
<emphasis role="bold">enkóduje</emphasis> je, nebo je
<emphasis role="bold">kopíruje</emphasis>. Tato èást je o
<emphasis role="bold">kopírování</emphasis>.
</para>

<itemizedlist>
<listitem><para>
  <emphasis role="bold">Video proud</emphasis> (volba <option>-ovc copy</option>):
  mù¾ete dìlat pìkné vìci :) Jako umístìní (nikoli konverze!) FLI nebo VIVO nebo
  MPEG-1 videa do AVI souboru! Samozøejmì takové soubory pøehraje pouze
  <application>MPlayer</application> :) A proto to nejspí¹ nemá ¾ádnou rozumnou
  hodnotu. A teï vá¾nì: kopírování video proudu mù¾e být u¾iteèné napøíklad
  tehdy, kdy¾ má být enkódován pouze zvuk (napø. nekomprimovaný PCM do MP3).
  </para></listitem>
<listitem><para>
  <emphasis role="bold">Audio proud</emphasis> (volba <option>-oac copy</option>):
  jednoduché. Je mo¾né vzít externí zvukový soubor (MP3, WAV) a namultiplexovat
  jej do výstupního proudu. K tomu pou¾ijte volbu
  <option>-audiofile <replaceable>soubor</replaceable></option>.
  </para></listitem>
</itemizedlist>
</sect1>


<sect1 id="menc-feat-enc-images">
<title>Enkódování z mno¾ství vstupních obrázkových souborù (JPEG, PNG, TGA, SGI)</title>

<para>
<application>MEncoder</application> je schopen vytvoøit film z jednoho nebo více
JPEG, PNG nebo TGA souborù. Pomocí jednoduchého snímkového kopírování mù¾e
vytvoøit MJPEG (Motion JPEG), MPNG (Motion PNG) nebo MTGA (Motion TGA) soubory.
</para>

<orderedlist>
<title>Vysvìtlení procesu:</title>
<listitem><para>
  <application>MEncoder</application> <emphasis>dekóduje</emphasis> vstupní
  soubor(y) pomocí knihovny <systemitem class="library">libjpeg</systemitem>
  (kdy¾ dekóduje PNG, pou¾ije <systemitem class="library">libpng</systemitem>).
  </para></listitem>
<listitem><para>
  Potom <application>MEncoder</application> nakrmí dekódovaný snímek do
  zvoleného video kompresoru (DivX4, XviD, FFmpeg msmpeg4, atd).
  </para></listitem>
</orderedlist>

<formalpara>
<title>Pøíklady</title>
<para>
Vysvìtlení volby <option>-mf</option> je v man stránce.

<informalexample>
<para>
Vytvoøení MPEG-4 souboru ze v¹ech JPEG souborù v aktuálním adresáøi:
<screen>
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc lavc -lavcopts vcodec=mpeg4 -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení MPEG-4 souboru z nìkterých JPEG souborù v aktuálním adresáøi:
<screen>
mencoder mf://<replaceable>snímek001.jpg,snímek002.jpg</replaceable> -mf w=800:h=600:fps=25:type=jpg -ovc lavc -lavcopts vcodec=mpeg4 -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení Motion JPEG (MJPEG) souboru ze v¹ech JPEG souborù v aktuálním
adresáøi:
<screen>
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc copy -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení nekomprimovaného souboru ze v¹ech PNG souborù v aktuálním adresáøi:
<screen>
mencoder mf:// -mf w=800:h=600:fps=25:type=png -ovc raw -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<note><para>
©íøka musí být celé èíslo násobek 4, to je dáno omezením RAW RGB AVI formátu.
</para></note>

<informalexample>
<para>
Vytvoøení Motion PNG (MPNG) souboru ze v¹ech PNG souborù v aktuálním adresáøi:
<screen>
mencoder mf://*.png -mf w=800:h=600:fps=25:type=png -ovc copy -oac copy -o <replaceable>výstup.avi</replaceable> <!--
--></screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení Motion TGA (MTGA) souboru ze v¹ech TGA souborù v aktuálním adresáøi:
<screen>
mencoder mf://*.tga -mf w=800:h=600:fps=25:type=tga -ovc copy -oac copy -o <replaceable>výstup.avi</replaceable><!--
--></screen>
</para>
</informalexample>

</para>
</formalpara>
</sect1>


<sect1 id="menc-feat-extractsub">
<title>Extrakce DVD titulkù do VOBsub souboru</title>

<para>
<application>MEncoder</application> je schopen vyextrahovat titulky z DVD do
VOBsub formátovaných souborù. Ty sestávají ze dvou souborù zakonèených
<filename>.idx</filename> a <filename>.sub</filename> a jsou obvykle zabaleny
v jediném <filename>.rar</filename> archivu.
<application>MPlayer</application> je umí pøehrávat s pomocí voleb
<option>-vobsub</option> a <option>-vobsubid</option>.
</para>

<para>
Zadejte základní jméno (èili bez pøípony <filename>.idx</filename> nebo
<filename>.sub</filename>) výstupních souborù pomocí volby
<option>-vobsubout</option> a index pro tyto titulky ve zbývajících souborech
pomocí <option>-vobsuboutindex</option>.
</para>

<para>
Pokud není vstup z DVD, mìli byste pou¾ít <option>-ifo</option> pro indikaci
<filename>.ifo</filename> souboru nutného k vytvoøení výsledného
<filename>.idx</filename> souboru.
</para>

<para>
Pokud vstup není z DVD a nemáte <filename>.ifo</filename> soubor, budete muset
pou¾ít volbu <option>-vobsubid</option> k nastavení, pro které id jazyka se má
vytvoøit <filename>.idx</filename> soubor.
</para>

<para>
Ka¾dým spu¹tìním se pøidají bì¾ící titulky pokud soubory <filename>.idx</filename>
a <filename>.sub</filename> ji¾ existují. Tak¾e byste je mìli v¹echny odstranit
døíve ne¾ zaènete.
</para>

<example>
<title>Kopírování dvojích titulkù z DVD bìhem dvouprùchodového enkódování</title>
<screen>
rm titulky.idx titulky.sub
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -vobsubout titulky -vobsuboutindex 0 -sid 2
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -vobsubout titulky -vobsuboutindex 1 -sid 5<!--
--></screen>
</example>

<example>
<title>Kopírování francouzských titulkù z MPEG souboru</title>
<screen>
rm titulky.idx titulky.sub
mencoder <replaceable>film.mpg</replaceable> -ifo <replaceable>film.ifo</replaceable> -vobsubout titulky -vobsuboutindex 0 -vobsuboutid fr -sid 1 -nosound -ovc copy
</screen>
</example>

</sect1>

<sect1 id="aspect">
<title>Zachování pomìru stran</title>
<para>
DVD a SVCD (èili MPEG-1/2) soubory obsahují hodnotu pomìru stran,
popisující, jak by mìl pøehrávaè ¹kálovat video proud, tak¾e lidé nebudou mít
¹i¹até hlavy (pø.: 480x480 + 4:3 = 640x480). Pokud ov¹em enkódujeme do AVI
(DivX) souborù, mìjte na pamìti, ¾e AVI hlavièky neukládají tuto hodnotu.
Pøe¹kálování videa je odporné a èasovì nároèné, tak¾e musí být lep¹í zpùsob!
</para>

<para>A zde jej máte</para>

<para>
MPEG-4 má unikátní vlastnost: video proud mù¾e obsahovat svùj po¾adovaný pomìr
stran. Ano, pøesnì jako MPEG-1/2 (DVD, SVCD) a H.263 soubory. Nane¹tìstí,
<emphasis role="bold">¾ádný</emphasis> video pøehrávaè nepodporuje tento atribut
MPEG-4, s výjimkou <application>MPlayer</application>u.
</para>

<para>
Tato vlastnost mù¾e být pou¾ita pouze s kodekem <systemitem>mpeg4</systemitem> z
<link linkend="ffmpeg"><systemitem class="library">libavcodec</systemitem></link>u.
Mìjte na pamìti: aèkoli
<application>MPlayer</application> korektnì pøehraje vytvoøený soubor, ostatní
pøehrávaèe pou¾ijí ¹patný pomìr stran.
</para>

<para>
Opravdu byste mìli oøíznout èerné okraje nad a pod filmem.
Nastudujte si pou¾ití filtrù <systemitem>cropdetect</systemitem> a
<systemitem>crop</systemitem> v man stránce.
</para>

<para>
Pou¾ití
<screen>mencoder <replaceable>vzorové-svcd.mpg</replaceable> -ovc lavc -lavcopts vcodec=mpeg4:autoaspect -vf crop=714:548:0:14 -oac copy -o <replaceable>výstup.avi</replaceable></screen>
</para>
</sect1>


</chapter>
