<?xml version="1.0" encoding="iso-8859-2"?>
<!-- Synced with: 1.52 -->
<chapter id="mencoder">
<title>Enkódování s <application>MEncoder</application>em</title>

<para>
Úplný seznam dostupných voleb a pøíkladù pro <application>MEncoder</application>
naleznete v man stránce. Øadu u¾iteèných pøíkladù a podrobných návodù pro
pou¾ití mnoha enkódovacích voleb naleznete v
<ulink url="../../tech/encoding-tips.txt">tipech pro enkódování</ulink>, které
byly získány z nìkolika diskusí v konferenci MPlayer-users. Prohledejte
<ulink url="http://mplayerhq.hu/pipermail/mplayer-users/">archivy</ulink>,
chcete-li bohatost diskusí o v¹ech aspektech a problémech vzta¾ených
k enkódování <application>MEncoder</application>em.
</para>

<sect1 id="menc-feat-mpeg4">
<title>Dvouprùchodové enkódování MPEG-4 (&quot;DivX&quot;)</title>

<para>
Název vychází z faktu, ¾e soubor je enkódován <emphasis>dvakrát</emphasis>.
První enkódování (dubbed pass) vytvoøí doèasné soubory
(<filename>*.log</filename>) velikosti nìkolika megabajtù, které zatím nema¾te
(mù¾ete smazat AVI). Ve druhém prùchodu je vytvoøen dvouprùchodový výstupní
soubor s pou¾itím øízení datového toku z doèasných souborù. Výsledný soubor
bude mít lep¹í kvalitu obrazu. Pokud jste o tom teï sly¹eli poprvé, mìli byste
si prostudovat nìkteré návody dostupné na netu.
</para>

<example>
<title>kopírování zvukové stopy</title>
<para>
Dvouprùchodové enkódování DVD do MPEG-4 (&quot;DivX&quot;) AVI zatímco se zvuk
pouze zkopíruje.
<screen>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -oac copy -o <replaceable>film.avi</replaceable>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -oac copy -o <replaceable>film.avi</replaceable>
</screen>
</para>
</example>

<example>
<title>enkódování zvukové stopy</title>
<para>
Dvouprùchodové enkódování DVD do MPEG-4 (&quot;DivX&quot;) AVI a souèasnì
enkódování zvukové stopy do MP3.
<screen>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -oac mp3lame -lameopts vbr=3 -o <replaceable>film.avi</replaceable>
mencoder dvd://2 -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -oac mp3lame -lameopts vbr=3 -o <replaceable>film.avi</replaceable>
</screen>
</para>
</example>
</sect1>

<sect1 id="menc-feat-mpeg">
<title>Enkódování do MPEG formátu</title>
<para>
<application>MEncoder</application> umí vytvoøit výstupní soubor formátu
MPEG (MPEG-PS). To je pravdìpodobnì pou¾itelné pouze s <emphasis>mpeg1video</emphasis>
kodekem z <systemitem class="library">libavcodec</systemitem></link>, proto¾e
pøehrávaèe &ndash; s výjimkou <application>MPlayer</application>u &ndash;
oèekávají MPEG-1 video a MPEG-1 layer 2 (MP2) audio proudy v MPEG souborech.
</para>

<para>
Tato vlastnost nyní není moc u¾iteèná, pomiòme ¾e má asi mnoho chyb, ale hlavnì
proto, ¾e <application>MEncoder</application> v souèasnosti neumí enkódovat
MPEG-1 layer 2 (MP2) zvuk, který v¹echny ostatní pøehrávaèe oèekávají v MPEG
souborech.
</para>

<para>
Výstupní souborový formát <application>MEncoder</application>u zmìníte pou¾itím
volby <option>-of mpeg</option>.
</para>

<para>
Example:
<screen>
mencoder -of mpeg -ovc lavc -lavcopts vcodec=mpeg1video -oac copy <replaceable>dal¹í_volby</replaceable> <replaceable>media.avi</replaceable> -o <replaceable>výstup.mpg</replaceable>
</screen>
</para>
</sect1>


<sect1 id="menc-feat-rescale">
<title>©kálování (zmìna velikosti) filmù</title>

<para>
Èasto potøebujeme zmìnit velikost obrázkù ve filmu a to z mnoha dùvodù: zmen¹ení
souboru, zátì¾e sítì atd. Mnoho lidí dokonce mìní velikost pøi pøevodu DVD nebo
SVCD do DivX AVI. Pokud si pøejete video pøe¹kálovat, pøeètìte si sekci
<link linkend="aspect">Zachování pomìru stran</link>.
</para>

<para>
Samotný proces ¹kálování je provádìn video filtrem <literal>scale</literal>:
<option>-vf scale=<replaceable>¹íøka</replaceable>:<replaceable>vý¹ka</replaceable></option>.
Jeho kvalita mù¾e být nastavena volbou <option>-sws</option>.
Pokud ji neuvedete, <application>MEncoder</application> pou¾ije 2: bikubickou.
</para>

<para>
Pou¾ití:
<screen>
mencoder <replaceable>vstup.mpg</replaceable> -ovc lavc -lavcopts vcodec=mpeg4 -vf scale=640:480 -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</sect1>


<sect1 id="menc-feat-streamcopy">
<title>Proudové kopírování</title>

<para>
<application>MEncoder</application> mù¾e zpracovat vstupní datové proudy dvìma
zpùsoby:
<emphasis role="bold">enkóduje</emphasis> je, nebo je
<emphasis role="bold">kopíruje</emphasis>. Tato èást je o
<emphasis role="bold">kopírování</emphasis>.
</para>

<itemizedlist>
<listitem><para>
  <emphasis role="bold">Video proud</emphasis> (volba <option>-ovc copy</option>):
  mù¾ete dìlat pìkné vìci :) Jako umístìní (nikoli konverze!) FLI nebo VIVO nebo
  MPEG-1 videa do AVI souboru! Samozøejmì takové soubory pøehraje pouze
  <application>MPlayer</application> :) A proto to nejspí¹ nemá ¾ádnou rozumnou
  hodnotu. A teï vá¾nì: kopírování video proudu mù¾e být u¾iteèné napøíklad
  tehdy, kdy¾ má být enkódován pouze zvuk (napø. nekomprimovaný PCM do MP3).
  </para></listitem>
<listitem><para>
  <emphasis role="bold">Audio proud</emphasis> (volba <option>-oac copy</option>):
  jednoduché. Je mo¾né vzít externí zvukový soubor (MP3, WAV) a namultiplexovat
  jej do výstupního proudu. K tomu pou¾ijte volbu
  <option>-audiofile <replaceable>soubor</replaceable></option>.
  </para></listitem>
</itemizedlist>
</sect1>


<sect1 id="menc-feat-enc-libavcodec">
<title>Enkódování s rodinou kodekù <systemitem class="library">libavcodec</systemitem>
</title>

<para>
<link linkend="ffmpeg"><systemitem class="library">libavcodec</systemitem></link>
zaji¹»uje jednoduché enkódování do mnoha zajímavých video a audio formátù.
Mù¾ete enkódovat do následujících kodekù (více ménì aktuální):

<informaltable frame="all">
<tgroup cols="2">
<thead>
<row><entry>Jméno kodeku</entry><entry>Popis</entry></row>
</thead>
<tbody>
<row><entry>mjpeg</entry><entry>
   Motion JPEG
  </entry></row>
<row><entry>ljpeg</entry><entry>
   Lossless (bezztrátový) JPEG
  </entry></row>
<row><entry>h263</entry><entry>
  H.263
  </entry></row>
<row><entry>h263p</entry><entry>
  H.263+
  </entry></row>
<row><entry>mpeg4</entry><entry>
  standardní ISO MPEG-4 (DivX 5, XVID kompatibilní)
  </entry></row>
<row><entry>msmpeg4</entry><entry>
  prvotní MPEG-4 varianta od MS, v3 (DivX3)
  </entry></row>
<row><entry>msmpeg4v2</entry><entry>
  prvotní MPEG-4 od MS, v2 (pou¾itý ve starých asf souborech)
  </entry></row>
<row><entry>wmv1</entry><entry>
  Windows Media Video, verze 1 (WMV7)
  </entry></row>
<row><entry>wmv2</entry><entry>
  Windows Media Video, verze 2 (WMV8)
  </entry></row>
<row><entry>rv10</entry><entry>
  starý RealVideo kodek
  </entry></row>
<row><entry>mpeg1video</entry><entry>
  MPEG-1 video
  </entry></row>
<row><entry>mpeg2video</entry><entry>
  MPEG-2 video
  </entry></row>
<row><entry>huffyuv</entry><entry>
  bezztrátová komprese
  </entry></row>
<row><entry>asv1</entry><entry>
  ASUS Video v1
  </entry></row>
<row><entry>asv2</entry><entry>
  ASUS Video v2
  </entry></row>
<row><entry>ffv1</entry><entry>
  bezztrátový video kodek z FFmpeg
  </entry></row>
</tbody>
</tgroup>
</informaltable>

První pole obsahuje názvy kodekù, které mù¾ete pøiøadit konfiguraènímu parametru
<literal>vcodec</literal>, napø: <option>-lavcopts vcodec=msmpeg4</option>
</para>

<informalexample>
<para>
Pøíklad, s MJPEG kompresí:
<screen>mencoder dvd://2 -o titul2.avi -ovc lavc -lavcopts vcodec=mjpeg -oac copy</screen>
</para>
</informalexample>
</sect1>


<sect1 id="menc-feat-enc-images">
<title>Enkódování z mno¾ství vstupních obrázkových souborù (JPEG, PNG, TGA, SGI)</title>

<para>
<application>MEncoder</application> je schopen vytvoøit film z jednoho nebo více
JPEG, PNG nebo TGA souborù. Pomocí jednoduchého snímkového kopírování mù¾e
vytvoøit MJPEG (Motion JPEG), MPNG (Motion PNG) nebo MTGA (Motion TGA) soubory.
</para>

<orderedlist>
<title>Vysvìtlení procesu:</title>
<listitem><para>
  <application>MEncoder</application> <emphasis>dekóduje</emphasis> vstupní
  soubor(y) pomocí knihovny <systemitem class="library">libjpeg</systemitem>
  (kdy¾ dekóduje PNG, pou¾ije <systemitem class="library">libpng</systemitem>).
  </para></listitem>
<listitem><para>
  Potom <application>MEncoder</application> nakrmí dekódovaný snímek do
  zvoleného video kompresoru (DivX4, XviD, FFmpeg msmpeg4, atd).
  </para></listitem>
</orderedlist>

<formalpara>
<title>Pøíklady</title>
<para>
Vysvìtlení volby <option>-mf</option> je v man stránce.

<informalexample>
<para>
Vytvoøení MPEG-4 souboru ze v¹ech JPEG souborù v aktuálním adresáøi:
<screen>
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc lavc -lavcopts vcodec=mpeg4 -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení MPEG-4 souboru z nìkterých JPEG souborù v aktuálním adresáøi:
<screen>
mencoder mf://<replaceable>snímek001.jpg,snímek002.jpg</replaceable> -mf w=800:h=600:fps=25:type=jpg -ovc lavc -lavcopts vcodec=mpeg4 -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení Motion JPEG (MJPEG) souboru ze v¹ech JPEG souborù v aktuálním
adresáøi:
<screen>
mencoder mf://*.jpg -mf w=800:h=600:fps=25:type=jpg -ovc copy -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení nekomprimovaného souboru ze v¹ech PNG souborù v aktuálním adresáøi:
<screen>
mencoder mf:// -mf w=800:h=600:fps=25:type=png -ovc raw -oac copy -o <replaceable>výstup.avi</replaceable>
</screen>
</para>
</informalexample>

<note><para>
©íøka musí být celé èíslo násobek 4, to je dáno omezením RAW RGB AVI formátu.
</para></note>

<informalexample>
<para>
Vytvoøení Motion PNG (MPNG) souboru ze v¹ech PNG souborù v aktuálním adresáøi:
<screen>
mencoder mf://*.png -mf w=800:h=600:fps=25:type=png -ovc copy -oac copy -o <replaceable>výstup.avi</replaceable> <!--
--></screen>
</para>
</informalexample>

<informalexample>
<para>
Vytvoøení Motion TGA (MTGA) souboru ze v¹ech TGA souborù v aktuálním adresáøi:
<screen>
mencoder mf://*.tga -mf w=800:h=600:fps=25:type=tga -ovc copy -oac copy -o <replaceable>výstup.avi</replaceable><!--
--></screen>
</para>
</informalexample>

</para>
</formalpara>
</sect1>


<sect1 id="menc-feat-extractsub">
<title>Extrakce DVD titulkù do VOBsub souboru</title>

<para>
<application>MEncoder</application> je schopen vyextrahovat titulky z DVD do
VOBsub formátovaných souborù. Ty sestávají ze dvou souborù zakonèených
<filename>.idx</filename> a <filename>.sub</filename> a jsou obvykle zabaleny
v jediném <filename>.rar</filename> archivu.
<application>MPlayer</application> je umí pøehrávat s pomocí voleb
<option>-vobsub</option> a <option>-vobsubid</option>.
</para>

<para>
Zadejte základní jméno (èili bez pøípony <filename>.idx</filename> nebo
<filename>.sub</filename>) výstupních souborù pomocí volby
<option>-vobsubout</option> a index pro tyto titulky ve zbývajících souborech
pomocí <option>-vobsuboutindex</option>.
</para>

<para>
Pokud není vstup z DVD, mìli byste pou¾ít <option>-ifo</option> pro indikaci
<filename>.ifo</filename> souboru nutného k vytvoøení výsledného
<filename>.idx</filename> souboru.
</para>

<para>
Pokud vstup není z DVD a nemáte <filename>.ifo</filename> soubor, budete muset
pou¾ít volbu <option>-vobsubid</option> k nastavení, pro které id jazyka se má
vytvoøit <filename>.idx</filename> soubor.
</para>

<para>
Ka¾dým spu¹tìním se pøidají bì¾ící titulky pokud soubory <filename>.idx</filename>
a <filename>.sub</filename> ji¾ existují. Tak¾e byste je mìli v¹echny odstranit
døíve ne¾ zaènete.
</para>

<example>
<title>Kopírování dvojích titulkù z DVD bìhem dvouprùchodového enkódování</title>
<screen>
rm titulky.idx titulky.sub
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vpass=1 -vobsubout titulky -vobsuboutindex 0 -sid 2
mencoder dvd://1 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vpass=2 -vobsubout titulky -vobsuboutindex 1 -sid 5<!--
--></screen>
</example>

<example>
<title>Kopírování francouzských titulkù z MPEG souboru</title>
<screen>
rm titulky.idx titulky.sub
mencoder <replaceable>film.mpg</replaceable> -ifo <replaceable>film.ifo</replaceable> -vobsubout titulky -vobsuboutindex 0 -vobsuboutid fr -sid 1<!--
--></screen>
</example>

</sect1>

<sect1 id="aspect">
<title>Zachování pomìru stran</title>
<para>
DVD a SVCD (èili MPEG-1/2) soubory obsahují hodnotu pomìru stran,
popisující, jak by mìl pøehrávaè ¹kálovat video proud, tak¾e lidé nebudou mít
¹i¹até hlavy (pø.: 480x480 + 4:3 = 640x480). Pokud ov¹em enkódujeme do AVI
(DivX) souborù, mìjte na pamìti, ¾e AVI hlavièky neukládají tuto hodnotu.
Pøe¹kálování videa je odporné a èasovì nároèné, tak¾e musí být lep¹í zpùsob!
</para>

<para>A zde jej máte</para>

<para>
MPEG-4 má unikátní vlastnost: video proud mù¾e obsahovat svùj po¾adovaný pomìr
stran. Ano, pøesnì jako MPEG-1/2 (DVD, SVCD) a H.263 soubory. Nane¹tìstí,
<emphasis role="bold">¾ádný</emphasis> video pøehrávaè nepodporuje tento atribut
MPEG-4, s výjimkou <application>MPlayer</application>u.
</para>

<para>
Tato vlastnost mù¾e být pou¾ita pouze s kodekem <systemitem>mpeg4</systemitem> z
<link linkend="ffmpeg"><systemitem class="library">libavcodec</systemitem></link>u.
Mìjte na pamìti: aèkoli
<application>MPlayer</application> korektnì pøehraje vytvoøený soubor, ostatní
pøehrávaèe pou¾ijí ¹patný pomìr stran.
</para>

<para>
Opravdu byste mìli oøíznout èerné okraje nad a pod filmem.
Nastudujte si pou¾ití filtrù <systemitem>cropdetect</systemitem> a
<systemitem>crop</systemitem> v man stránce.
</para>

<para>
Pou¾ití
<screen>mencoder <replaceable>vzorové-svcd.mpg</replaceable> -ovc lavc -lavcopts vcodec=mpeg4:autoaspect -vf crop=714:548:0:14 -oac copy -o <replaceable>výstup.avi</replaceable></screen>
</para>
</sect1>

<sect1 id="custommatrices"><title>U¾ivatelské inter/intra matice</title>

<para>
Díky této vlastnosti
<link linkend="ffmpeg"><systemitem class="library">libavcodec</systemitem></link>u
mù¾ete nastavit u¾ivatelskou inter (I-snímky/klíèové snímky) a intra
(P-snímky/predikované (rozumìjte vypoèítané) snímky) matice. To je podporováno
mnoha kodeky:
<systemitem>mpeg1video</systemitem> a <systemitem>mpeg2video</systemitem>
jsou hlá¹eny jako funkèní.
</para>

<para>
Typické pou¾ití této vlastnosti je nastavení matic preferovaných
<ulink url="http://www.kvcd.net/">KVCD</ulink> specifikacemi.
</para>

<para>
<emphasis role="bold">Kvantizaèní Matice KVCD &quot;Notch&quot;:</emphasis>
</para>

<para>
Intra:
<screen>
 8  9 12 22 26 27 29 34
 9 10 14 26 27 29 34 37
12 14 18 27 29 34 37 38
22 26 27 31 36 37 38 40
26 27 29 36 39 38 40 48
27 29 34 37 38 40 48 58
29 34 37 38 40 48 58 69
34 37 38 40 48 58 69 79
</screen>

Inter:
<screen>
16 18 20 22 24 26 28 30
18 20 22 24 26 28 30 32
20 22 24 26 28 30 32 34
22 24 26 30 32 32 34 36
24 26 28 32 34 34 36 38
26 28 30 32 34 36 38 40
28 30 32 34 36 38 42 42
30 32 34 36 38 40 42 44
</screen>
</para>

<para>
Pou¾ití:
<screen>
$ mencoder <replaceable>vstup.avi</replaceable> -o <replaceable>výstup.avi</replaceable> -oac copy -ovc lavc -lavcopts inter_matrix=...:intra_matrix=...
</screen>
</para>

<para>
<screen>
$ mencoder <replaceable>vstup.avi</replaceable> -ovc lavc -lavcopts
vcodec=mpeg2video:intra_matrix=8,9,12,22,26,27,29,34,9,10,14,26,27,29,34,37,
12,14,18,27,29,34,37,38,22,26,27,31,36,37,38,40,26,27,29,36,39,38,40,48,27,
29,34,37,38,40,48,58,29,34,37,38,40,48,58,69,34,37,38,40,48,58,69,79
:inter_matrix=16,18,20,22,24,26,28,30,18,20,22,24,26,28,30,32,20,22,24,26,
28,30,32,34,22,24,26,30,32,32,34,36,24,26,28,32,34,34,36,38,26,28,30,32,34,
36,38,40,28,30,32,34,36,38,42,42,30,32,34,36,38,40,42,44 -oac copy -o svcd.mpg
</screen>
</para>
</sect1>

<sect1 id="menc-feat-dvd-mpeg4">
<title>Vytvoøení MPEG-4 (&quot;DivX&quot;) ripu DVD filmu ve vysoké kvalitì</title>

<para>
  Velmi èastou otázkou je "Jak mohu vytvoøit rip v nejvy¹¹í mo¾né kvalitì pro
  danou velikost?". Dal¹í otázkou je "Jak vytvoøím DVD rip v nejvy¹¹í mo¾né
  kvalitì? Velikost souboru mì nezajímá, chci tu nejvy¹¹í kvalitu."
</para>

<para>
  Druhá otázka je ponìkud ¹patnì polo¾ená. Konec koncù, pokud je vám lhostejná
  velikost souboru, proè prostì nezkopírujete celý MPEG-2 video proud z DVD?
  Jistì¾e va¹e AVI bude mít kolem 5 GB, ale pokud chcete nejvy¹¹í kvalitu a
  na velikosti nezále¾í, je to jistì nejlep¹í volba.
</para>

<para>
  Ve skuteènosti, dùvodem pøevodu DVD do MPEG-4 je právì to, ¾e vám na velikosti
  souboru <emphasis role="bold">zále¾í</emphasis>.
</para>

<para>
  Je tì¾ké nabídnout kuchaøku jak vytvoøit DVD rip ve velmi vysoké kvalitì. Je
  nutné uvá¾it mno¾ství faktorù a mìli byste rozumìt tìmto detailùm, jinak
  budete asi zklamáni výsledkem. Ní¾e prozkoumáme nìkteré z tìchto vìcí a
  pak se podíváme na pøíklad. Pøedpokládáme, ¾e pou¾ijete
  <systemitem class="library">libavcodec</systemitem> pro enkódování videa,
  aèkoli teorie je stejná i pro ostatní kodeky.
</para>

<para>
  Pokud je toho na vás moc, asi byste mìli pou¾ít nìkterý z pìkných frontendù,
  které jsou zmínìny v
  <ulink url="http://mplayerhq.hu/homepage/design7/projects.html#mencoder_frontends">sekci MEncoder</ulink>
  na na¹í stránce odvozených projektù.
  Takto budete schopni dosahovat vysoce kvalitních ripù bez velkého pøemý¹lení,
  proto¾e vìt¹ina tìchto nástrojù je navr¾ena tak, aby dìlala vhodná rozhodnutí
  za vás.
</para>

<sect2 id="menc-feat-dvd-mpeg4-2pass">
<title>Pevný kvantizer vs. dva prùchody</title>

<para>
  Jsou tøi pøístupy k enkódování videa: pevný datový tok (CBR), pevný kvantizer
  a dvouprùchodový (ABR, nebili prùmìrovaný datový tok).
</para>

<para>
  V ka¾dém z tìchto re¾imù <systemitem class="library">libavcodec</systemitem>
  rozbije videosnímek na makrobloky 16x16 pixelù a potom na ka¾dý makroblok
  aplikuje kvantizer. Èím je ni¾¹í kvantizer, tím je vy¹¹í kvalita a datový tok.
  Metoda, kterou <systemitem class="library">libavcodec</systemitem> pou¾ívá pro
  urèení jaký kvantizer pou¾ít pro daný makroblok, se li¹í a je vysoce
  ovlivnitelná. (Toto je extrémní zjednodu¹ení daného procesu, ale je vhodné
  rozumìt základnímu principu.)
</para>

<para>
  Pokud nastavíte konstantní datový tok, <systemitem
  class="library">libavcodec</systemitem> bude enkódovat video tak, ¾e zahodí
  detaily podle potøeby a jen tolik, aby se udr¾el pod zadaným datovým tokem.
  Pokud je vám opravdu lhostejná velikost souboru, mù¾ete také pou¾ít CBR a
  nastavit datový tok na nekoneèno. (V praxi to znamená nastavit hodnotu tak
  vysoko, aby nijak neomezovala, jako 10000 Kbitù.) Bez reálného omezení
  datového toku pou¾ije <systemitem class="library">libavcodec</systemitem>
  nejni¾¹í mo¾ný kvantizer pro ka¾dý makroblok (ten je nastaven pomocí
  <option>vqmin</option>, výchozí je 2). Jakmile nastavíte dostateènì ni¾¹í
  datový tok, tak¾e je <systemitem class="library">libavcodec</systemitem>
  pøinucen pou¾ít vy¹¹í kvantizer, pak témìø jistì sní¾íte kvalitu svého videa.
  Abyste se tomu vyhnuli, mìli byste zvá¾it zmen¹ení videa podle postupu
  popsaného pozdìji v této pøíruèce.
</para>

<para>
  Pøi konstantním kvantizeru <systemitem  class="library">libavcodec</systemitem>
  pou¾ívá kvantizer nastavený volbou <option>vqscale</option> na ka¾dý makroblok.
  Pokud chcete maximálnì kvalitní rip, opìt bez ohledu na datový tok, mù¾ete
  pou¾ít <option>vqscale=2</option>. To povede ke stejnému datovému toku a PSNR
  (odstup signál&ndash;¹um) jako CBR s <option>vbitrate</option>=infinity a
  výchozím <option>vqmin</option> rovným 2.
</para>

<para>
  Problém s konstantní kvantizací je ten, ¾e pou¾ívá zadaný kvantizer a» to daný
  makroblok potøebuje èi nikoli. Je toti¾ mo¾né pou¾ít vy¹¹í kvantizer na
  makroblok bez obìtování viditelné kvality. Proè tedy plýtvat bity s nemístnì
  nízkým kvantizerem? Vá¹e CPU má tolik cyklù, kolik máte èasu, ale na harddisku
  máte jen urèitý poèet bitù.
</para>

<para>
  Pøi dvouprùchodovém enkódování se v prvním prùchodu projde film jakoby mìl být
  CBR, ale vlastnosti ka¾dého snímku se zaznamenají do logu. Tato data jsou pak
  pou¾ita pøi druhém prùchodu pro inteligentní stanovení pou¾itého kvantizeru.
  V rychlých scénách nebo scénách s malým poètem detailù budou èastìji pou¾ívány
  vy¹¹í kvantizery a v pomalých nebo detailních scénách zase ni¾¹í kvantizery.
</para>

<para>
  Pokud pou¾ijete <option>vqscale=2</option>, plýtváte bity. Pokud pou¾ijete
  <option>vqscale=3</option>, pak nedostanete nejkvalitnìj¹í mo¾ný rip.
  Dejme tomu, ¾e ripujete DVD pøi <option>vqscale=3</option> a
  výsledkem je 1800Kbit. Pokud provedete dvouprùchodové enkódování
  s <option>vbitrate=1800</option>, výsledné video bude mít <emphasis
  role="bold">vy¹¹í kvalitu</emphasis> pøi
  <emphasis role="bold">stejném datovém toku</emphasis>.
</para>

<para>
  Jeliko¾ jsme vás nyní pøesvìdèili, ¾e dvouprùchodový re¾im je správná volba,
  skuteènou otázkou je, jaký datový tok pou¾ít? Odpovìï je, ¾e není jediná
  odpovìï. Ideálnì byste mìli zvolit takový datový tok, který zajistí nejlep¹í
  rovnováhu mezi kvalitou a velikostí souboru. Ten bude poka¾dé jiný
  v závislosti na zdrojovém videu.
</para>

<para>
  Pokud na velikosti souboru nezále¾í, pak je dobrý startovní mùstek pro rip
  s velmi vysokou kvalitou je kolem 2000 Kbitù plus-mínus 200 Kbitù.
  Pro rychlé akèní nebo vysoce detailní zdrojové video, nebo máte-li velmi
  kritické oko, se budete rozhodovat mezi 2400 nebo 2600.
  U nìkterých DVD nepoznáte rozdíl pøi 1400 Kbitech. Je vhodné experimentovat
  se scénami pøi rùzných datových tocích, abyste pro to dostali cit.
</para>

<para>
  Pokud se sna¾íte o urèitou velikost, budete muset nìjak spoèítat datový tok.
  Ale je¹tì pøedtím musíte zjistit, kolik místa byste mìli rezervovat pro
  zvukové(ou) stopy(u), tak¾e byste si
  <link linkend="menc-feat-dvd-mpeg4-audio">je mìli ripnout</link> jako první.
  Mù¾ete si pak spoèítat datový tok pomocí následující rovnice:
  <systemitem>datový_tok = (po¾adovaná_velikost_v_Mbajtech - velikost_zvuku_v_Mbajtech) *
  1024 * 1024 / délka_v_sek * 8 / 1000</systemitem>
  Napøíklad abyste nacpali dvouhodinový film na 702MB CD, se 60MB zvukovou
  stopou, bude muset být datový tok videa:
  <systemitem>(702 - 60) * 1024 * 1024 / (120*60) * 8 / 1000
  = 740kbps (kilobitù za sekundu)</systemitem>
</para>

</sect2>


<sect2 id="menc-feat-dvd-mpeg4-constraints">
<title>Omezení pro efektivní enkódování</title>

<para>
  Ze samé podstaty komprese typu MPEG vyplývají urèitá omezení, která byste mìli
  ctít, pokud chcete maximální kvalitu.
  MPEG rozdìlí video na ètverce 16x16 nazývané makrobloky, které se skládají
  ze ètyø blokù 8x8 jasové (luma) slo¾ky a dvou blokù 8x8 barevné (chroma)
  slo¾ky v polovièním rozli¹ení (jeden pro osu èervená-cyan (modrozelená) a druhý pro osu
  modrá-¾lutá).
  Dokonce i kdy¾ ¹íøka a vý¹ka va¹eho videa nejsou násobky 16, pou¾ije enkodér
  dostatek 16x16 makroblokù, aby pokryl celou oblast obrazu a zabere místo
  navíc, které pøijde vniveè.
  Tak¾e chcete-li maximalizovat kvalitu pøi dané velikosti souboru, není dobrý
  nápad pou¾ívat rozmìry které nejsou násobky 16.
</para>

<para>
  Vìt¹ina DVD má také rùznì velké èerné okraje videa. Ponechání tìchto ploch
  mù¾e rùzným zpùsobem sní¾it kvalitu.
</para>

<orderedlist>
<listitem>
<para>
  Komprese typu MPEG je rovnì¾ velmi závislá na plo¹ných frekvenèních
  transformacích, konkrétnì Diskrétní Kosinové Transformaci (DCT), která se
  podobá Fourierovì transformaci. Tento druh enkódování je efektivní na
  reprezentaci opakujících se vzorù a pozvolné pøechody, ale má potí¾e s ostrými
  pøechody. Chcete-li je enkódovat, musíte pou¾ít mnoho bitù, jinak se objeví
  artefakty známé jako krou¾kování.
</para>

<para>
  Frekvenèní transformace (DCT) je provedena zvlá¹» pro ka¾dý makroblok
  (ve skuteènosti na ka¾dý blok), tak¾e problém nastane pouze tehdy, je-li ostrý
  pøechod uvnitø bloku. Pokud va¹e èerné okraje zaèínají pøesnì na hranicích
  násobkù 16 pixelù, pak to není problém. Èerné okraje jsou v¹ak na DVD jen
  málokdy pìknì umístìny, tak¾e je v praxi budete muset v¾dy odstranit, abyste
  se vyhnuli tomuto problému.
</para>
</listitem>
</orderedlist>

<para>
  Navíc k plo¹nì frekvenèním transformacím pou¾ívá komprese typu MPEG vektory
  pohybu k popisu zmìn od jednoho snímku ke druhému. Vektory pohybu pøirozenì
  pracují ménì efektivnì s novým obsahem pøicházejícím zpoza okrajù snímku,
  proto¾e ten nebyl pøítomen na pøedchozím snímku. Dokud se obraz roz¹iøuje
  smìrem k okrajùm snímku, nemají s tím vektory pohybu ¾ádný problém, ale
  jsou-li zde èerné okraje, mù¾e problém nastat:
</para>

<orderedlist continuation="continues">
<listitem>
<para>
  Komprese typu MPEG ukládá pro ka¾dý makroblok vektor, identifikující která
  èást pøedchozího obrázku by mìla být zkopírována onoho makrobloku jako základ
  pro predikci následujícího snímku. Pouze zbývající odli¹nosti musí být
  enkódovány. Pokud makroblok pøesahuje okraj obrázku a obsahuje èást èerného
  okraje, vektory pohybu z ostatních èástí obrázku pøepí¹í èerný okraj.
  To znamená mnoho bitù spotøebovaných buï na znovuzaèernìní, nebo se (spí¹)
  vektory pohybu nepou¾ijí vùbec a v¹echny zmìny v tomto makrobloku se budou
  kódovat pøímo. Jinými slovy se velmi sní¾í efektivita enkódování.
</para>

<para>
  Tento problém nastává opìt jen v pøípadì, ¾e èerné okraje nezaèínají na lince
  její¾ pozice je násobkem 16.
</para>
</listitem>

<listitem>
<para>
  Nakonec zde máme makroblok uvnitø obrázku do nìj¾ se posunuje objekt z okraje
  obrázku. Kódování typu MPEG neumí øíct "zkopíruj to co je na obrázku, ale ne
  èerný okraj." Tak¾e se zkopíruje i èerný okraj a spotøebuje se spousta bitù
  na enkódování té èásti obrázku, která tu mìla být.
</para>

<para>
  Pokud se obrázek dostane úplnì ven z enkódované oblasti, má MPEG speciální
  optimalizace pro opakované kopírování pixelù na okraj obrázku pokud pøijde
  vektor pohybu zvenèí enkódované oblasti. Tato vlastnost bude k nièemu, pokud
  má film èerné okraje. Na rozdíl od problémù 1 a 2 zde umístìní okrajù na
  násobky 16 nepomù¾e.
</para>
</listitem>

<listitem>
<para>
  Navzdory tomu, ¾e okraje jsou úplnì èerné a nikdy se nemìní, je zde v¾dy
  alespoò minimální datový tok spotøebovaný na vìt¹í mno¾ství makroblokù.
</para>
</listitem>
</orderedlist>

<para>
  Ze v¹ech tìchto dùvodù doporuèujeme zcela odstranit èerné okraje. Dále, pokud
  je na okraji obrázku oblast se ¹umem/zkreslením, jejím odstøi¾ením se je¹tì
  zvý¹í efektivita enkódování. Videofilní puristé, kteøí chtìjí zùstat tak
  blízko originálu, jak je to jen mo¾né, mohou protestovat proti tomuto oøezání,
  ale pokud nehodláte enkódovat s konstantním kvantizerem, kvalita kterou
  dostanete díky oøezání znatelnì pøevý¹í mno¾ství ztracených informací na
  okrajích.
</para>
</sect2>


<sect2 id="menc-feat-dvd-mpeg4-crop">
<title>Oøezávání a ¹kálování</title>

<para>
  Nativní DVD rozli¹ení je 720x480 pro NTSC a 720x576 pro PAL, ale je zde je¹tì
  pøíznak pomìru stran, který udává, zda se jedná o obrazovku (full-screen)(4:3),
  nebo ¹irokoúhlý film (wide-screen)(16:9). Mnoho (jestli ne vìt¹ina)
  ¹irokoúhlých DVD není pøesnì 16:9, ale bude buï 1.85:1 anebo 2.35:1
  (cinescope). To znamená, ¾e zde budou ve videu èerné okraje, které bude nutné
  odstøihnout.
</para>

<para>
  <application>MPlayer</application> poskytuje filtr pro detekci potøebného
  oøezu, který stanoví oøezový obdélník (<option>-vf cropdetect</option>).
  Proto¾e MPEG-4 pou¾ívá makrobloky 16x16, mìli byste se ujistit, ¾e oba rozmìry
  videa jsou násobkem 16, jinak sní¾íte kvalitu, zvlá¹» pøi nízkých datových
  tocích. Mù¾ete to zajistit zaokrouhlením ¹íøky a vý¹ky oøezového obdélníku
  dolù na nejbli¾¹í násobek 16. Pøi oøezávání byste mìli zvý¹it odsazení
  (offset) v ose y o polovinu rozdílu mezi starou a novou vý¹kou, tak¾e bude
  výsledné video bráno ze støedu snímku. Z dùvodu principu vzorkování DVD videa
  se ujistìte, ¾e je odsazení sudé èíslo. (Popravdì, pøijmìte jako pravidlo,
  nikdy nepou¾ívat liché hodnoty pro jakýkoli z parametrù pøi oøezávání a
  ¹kálování videa.) Pokud nechcete zahodit tìch nìkolik pixelù navíc, mù¾ete
  místo toho radìji zmìnit velikost videa (¹kálovat). Na to se podíváme
  v pøíkladu ní¾e.
  V praxi mù¾ete nechat filtr <option>cropdetect</option> udìlat v¹echnu práci
  zmínìnou vý¹e, jeliko¾ má volitelný parametr <option>round</option>
  (zaokrouhlení), jeho¾ výchozí hodnota je 16.
</para>

<para>
  Rovnì¾ buïte opatrní na "napùl èerné" pixely na okrajích. V¾dy je rovnì¾
  odstøihnìte, jinak zde budete plýtvat bity, které mù¾ete pou¾ít jinde.
</para>

<para>
  Poté co provedete v¹e, co jsme si doposud øekli, budete mít video, které asi
  nebude právì 1.85:1 nebo 2.35:1, ale nìkde poblí¾. Mù¾ete spoèítat nový pomìr
  stran ruènì, ale <application>MEncoder</application> nabízí volbu pro
  class="library">libavcodec</systemitem> nazývanou <option>autoaspect</option>,
  která to za vás udìlá. Nezvìt¹ujte video jen proto, abyste dosáhli ètvercových
  pixelù, pokud je vám milé místo na disku. ©kálování by mìlo být provedeno pøi
  pøehrávání, kdy pøehrávaè pou¾ije pomìr stran ulo¾ený v AVI pro zaji¹tìní
  správného rozli¹ení.
  Nane¹tìstí ne v¹echny pøehrávaèe uplatòují tuto auto¹kálovací informaci,
  tak¾e mù¾ete pøece jen chtít ¹kálovat.
</para>

<para>
  Nejdøív byste si mìli spoèítat enkódovaný pomìr stran:
  <systemitem>PSo = (©o x (PSa / PRdvd )) / Vo</systemitem>
<itemizedlist>
<title>kde:</title>
<listitem><para>
  ©o a Vo jsou ¹íøka a vý¹ka oøezaného videa,
</para></listitem>
<listitem><para>
  PRdvd je pomìr pixelù v DVD, který je roven 1.25=(720/576) pro DVD
</para></listitem>
<listitem><para>
  v PALu a 1.5=(720/480) pro DVD v NTSC,
</para></listitem>
</itemizedlist>
</para>

<para>
  Pak si mù¾ete spoèítat rozli¹ení X a Y podle urèitého faktoru kvality komprese
  (CQ):
  <systemitem>RozY = INT(SQRT( 1000*Datový_tok/25/PSo/CQ )/16) * 16</systemitem>
  <systemitem>RozX = INT( RozY * PSo / 16) * 16</systemitem>
</para>

<para>
  Dobøe, ale co je ten CQ?
  CQ odpovídá poètu bitù na pixel a na snímek v zakódování. Jinými slovy, èím
  vy¹¹í je CQ, tím ni¾¹í je ¹ance uvidìt enkódovací artefakty.
  Pokud ov¹em máte cílový rozmìr va¹eho filmu (1 nebo 2 CD napøíklad), máte jen
  omezené mno¾ství bitù, které mù¾ete spotøebovat; tak¾e je nutné najít vhodný
  kompromis mezi komprimovatelností a kvalitou.
</para>

<para>
  CQ závisí jak na datovém toku, tak na rozli¹ení filmu. Abyste zvý¹ili CQ,
  obvykle zmen¹íte daný film, tak¾e je datový tok spoèítán ve funkci cílové
  velikosti a délky filmu, které jsou konstantní.
  CQ pod 0.18 obvykle vede k velmi ètvereèkovanému obrazu, proto¾e není dostatek
  bitù pro zakódování informací ka¾dého makrobloku (MPEG4, stejnì jako mnoho
  jiných kodekù seskupuje pixely do blokù pøi komprimaci obrázku; pokud není
  dostatek bitù, jsou viditelné hranice tìchto blokù).
  Proto je rozumné volit CQ v rozmezí 0.20 a¾ 0.22 pro rip na 1 CD a
  0.26 a¾ 0.28 pro 2 CD.
</para>

<para>
  Prosíme berte v potaz, ¾e CQ je jen informaèní pomùcka závisející na
  enkódovaném obsahu. CQ okolo 0.18 mù¾e být dostateènì dobrý pro Bergmana,
  na rozdíl od filmu jako je Matrix, který obsahuje mnoho rychlých scén.
  Na druhou stranu je zbyteèné zvy¹ovat CQ vý¹ ne¾ 0.30, jeliko¾ budete plýtvat
  bity za minimální zisk kvality.
</para>

</sect2>

<sect2 id="menc-feat-dvd-mpeg4-audio">
<title>Zvuk</title>

<para>
  Zvuk je mnohem jednodu¹¹í problém k øe¹ení: pokud prahnete po kvalitì, prostì
  jej nechte tak jak je.
  Dokonce i AC3 5.1 datové proudy mají nanejvý¹ 448Kbitù/s a stojí za ka¾dý bit.
  Mo¾ná jste v poku¹ení pøevést zvuk do Ogg Vorbis pøi vysoké kvalitì, ale jen
  proto, ¾e dnes nemáte A/V receiver pro hardwarové dekódování AC3 neznamená,
  ¾e jej nebudete mít zítra. Pøipravte své DVD ripy zachováním AC3 datových
  proudù.
  Datový proud AC3 mù¾ete zachovat buï jeho zkopírováním pøímo do video proudu
  <link linkend="menc-feat-mpeg4">bìhem enkódování</link>.
  Také mù¾ete extrahovat AC3 proud, abyste jej pak namixovali do nosièù jako je
  NUT nebo Matroska.
  <screen>mplayer <replaceable>zdrojový_soubor.vob</replaceable> -aid 129 -dumpaudio -dumpfile <replaceable>zvuk.ac3</replaceable></screen>
  vytáhne do souboru <replaceable>zvuk.ac3</replaceable> zvukovou stopu
  èíslo 129 ze souboru <replaceable>zdrojový_soubor.vob</replaceable> (NB: DVD
  VOB soubory obvykle pou¾ívají odli¹né èíslování audia,
  co¾ znamená, ¾e VOB zvuková stopa 120 je druhou zvukovou stopou v souboru).
</para>

<para>
  Nìkdy ov¹em opravdu nemáte jinou mo¾nost ne¾ dále zkomprimovat zvuk, aby vám
  zbylo více bitù na video.
  Vìt¹ina lidí volí komprimaci buï pomocí MP3 nebo Vorbis audio kodekù.
  Zatímco ten druhý je efektivnìj¹í z prostorového hlediska, MP3 je lépe
  podporován hardwarovými pøehrávaèi, aèkoli èasy se mìní.
</para>

<para>
  Nejdøíve ze v¹eho budete muset pøevést DVD zvuk do WAV souboru, který pak
  pou¾ije zvukový kodek jako vstup.
  Napøíklad:
  <screen>mplayer <replaceable>zdrojový_soubor.vob</replaceable> -ao pcm:file=<replaceable>výsledný_zvuk.wav</replaceable> -vc dummy -aid 1 -vo null</screen>
  vylije druhou zvukovou stopu ze souboru
  <replaceable>zdrojový_soubor.vob</replaceable> do souboru
  <replaceable>výsledný_zvuk.wav</replaceable>.
  Mìli byste normalizovat zvuk pøed enkódováním, proto¾e DVD zvukové stopy jsou
  obvykle nahrávány pøi nízkých hlasitostech.
  Mù¾ete napøíklad pou¾ít nástroj <application>normalize</application>, který je
  k dispozici ve vìt¹inì distribucí.
  Pokud pou¾íváte Windows, stejnou práci udìlá nástroj jako
  <application>BeSweet</application>.
  Komprimovat budete buï ve Vorbisu nebo MP3.
  Napøíklad:
  <screen>oggenc -q1 <replaceable>cílový_zvuk.wav</replaceable></screen>
  provede enkódování <replaceable>cílového_zvuku.wav</replaceable> s kvalitou 1,
  která pøibli¾nì odpovídá 80Kb/s a je to minimální kvalita na kterou byste mìli
  enkódovat, pokud vám zále¾í na kvalitì.
  Poznamenejme, ¾e <application>MEncoder</application> v souèasnosti neumí
  muxovat Vorbis zvukové stopy do výstupního souboru, proto¾e podporuje pouze
  AVI a MPEG kontejnery jako výstup. Pro oba platí, ¾e nìkteré pøehrávaèe mohou
  mít problémy s udr¾ením audio/video synchronizace, pokud je pøítomen VBR zvuk
  jako je Vorbis.
  Nemìjte obavy, v tomto dokumentu vám uká¾eme, jak to lze udìlat pomocí
  programù tøetích stran.
</para>

</sect2>

<sect2 id="menc-feat-dvd-mpeg4-interlacing">
<title>Prokládání a Telecine</title>

<para>
  Témìø ve¹keré filmy jsou natáèeny pøi 24 snímcích/s. Jeliko¾ NTSC má
  snímkovou rychlost 30000/1001 snímkù/s, je tøeba provést úpravu tìchto
  24 snímkù/s videí, aby mìly správnou NTSC snímkovou rychlost. Tato úprava se
  jmenuje 3:2 pulldown a obecnì je známa jako telecine (proto¾e je pulldown
  èasto provádìn bìhem pøenosu filmu na video) a, jednodu¹e øeèeno, pracuje tak,
  ¾e se film zpomalí na 24000/1001 snímkù/s a ka¾dý ètvrtý snímek se zopakuje.
</para>

<para>
  Naopak ¾ádné speciální úpravy se neprovádìjí videu pro PAL DVD, která bì¾í
  pøi 25 snímcích/s. (Technicky lze na PAL provést telecine, tzv. 2:2 pulldown,
  ale v praxi se nepou¾ívá.) Film s 24 snímky/s je jednodu¹e pøehráván rychlostí
  25 snímkù/s. Výsledkem je, ¾e video bì¾í o nìco rychleji, ale pokud nejste
  vetøelec, tak si rozdílu ani nev¹imnete. Vìt¹ina filmù má navíc vý¹kovì
  korigovaný zvuk, tak¾e pøi pøehrávání 25 snímkù/s v¹e zní jak má i pøesto, ¾e
  zvuk (a proto i celé video) má o 4% krat¹í dobu pøehrávání ne¾ NTSC DVD.
</para>

<para>
  Jeliko¾ video na PAL DVD nebylo upravováno, nemusíte si dìlat starosti s jeho
  snímkovou rychlostí. Zdroj má 25 snímkù/s, vá¹ rip také. Pokud ov¹em ripujete
  NTSC DVD film, musíte provést inverzní telecine.
</para>

<para>
  Filmy toèené rychlostí 24 snímkù/s jsou na NTSC DVD ulo¾eny buï jako
  30000/1001 po telecine, nebo jako progresivní (neprokládaný) se snímkovou
  24000/1001 snímkù/s, na kterých by mìl provést telecine DVD pøehrávaè za letu.
  Není to ale zákon: nìkteré TV série jsou prokládané (napø. Buffy Lovec upírù),
  zatímco jiné jsou porùznu neprokládané nebo prokládané (napø. Andìl, nebo 24
  hodin).
</para>

<para>
  Doporuèujeme, abyste si pøeèetli sekci o tom
  <link linkend="menc-feat-telecine">Jak si poradit s telecine a prokladem na NTSC DVD</link>
  a nauèili se jak vyu¾ít rùzné mo¾nosti.
</para>

<para>
  Pokud ov¹em vìt¹inou ripujete pouze filmy, nejspí¹ se setkáváte
  s neprokládaným nebo prokládaným videem 24 snímkù/s. V tom pøípadì mù¾ete
  pou¾ít <option>pullup</option> filtr <option>-vf pullup,softskip</option>.
</para>

</sect2>


<sect2 id="menc-feat-dvd-mpeg4-filtering">
<title>Filtrování</title>

<para>
  Obecnì byste mìli filtrovat video tak málo, jak je to jen mo¾né, abyste
  zùstali co nejblí¾ DVD originálu. Oøezání je èasto nutné (jak jsme ji¾ øekli),
  ale ne¹kálujte video. Aèkoli zmen¹ení rozli¹ení je obèas upøednostòováno pøed
  pou¾itím vy¹¹ích kvantizerù, musíme se vyhnout obìma pøípadùm: pamatujme, ¾e
  jsme se ji¾ na zaèátku rozhodli obìtovat bity za kvalitu.
</para>

<para>
  Rovnì¾ neupravujte gamu, kontrast, jas, atd. Co vypadá dobøe na va¹í
  obrazovce, nemusí vypadat dobøe na jiných. Tato pøizpùsobení by mìla být
  provádìna pouze pøi pøehrávání.
</para>

<para>
  Jednu vìc byste v¹ak udìlat mìli, a to protáhnout video velmi lehkým
  od¹umovací filtr, jako je <option>-vf hqdn3d=2:1:2</option>.
  Opìt je to proto, abychom mohli nìkteré bity lépe vyu¾ít: proè s nimi plýtvat
  na ¹um, kdy¾ si jej mù¾ete pøidat pøi pøehrávání? Zvý¹ení parametrù pro
  <option>hqdn3d</option> je¹tì více zvý¹í komprimovatelnost, ale pokud to
  pøe¾enete, riskujete zhor¹ení viditelnosti obrazu. Doporuèené hodnoty okolo
  (<option>2:1:2</option>) jsou dost konzervativní; mìli byste volnì
  experimentovat s vy¹¹ími hodnotami a posoudit výsledek sami.
</para>

</sect2>

<sect2 id="menc-feat-dvd-mpeg4-lavc-encoding-options">
<title>Enkódovací volby libavcodecu</title>

<para>
  V ideálním pøípadì byste asi chtìli jen øíct enkodéru, aby se pøepnul do
  re¾imu "vysoká kvalita" a ¹el na to.
  To by bylo jistì hezké, ale nane¹tìstí je to tì¾ké zavést, jeliko¾ rùzné
  volby enkódování vedou k rùzné kvalitì v závislosti na zdrojovém materiálu.
  To proto, ¾e komprese závisí na vizuálních vlastnostech daného videa.
  Napøíklad anime a ¾ivá akce mají zcela rozdílné vlastnosti a tedy vy¾adují
  odli¹né volby pro dosa¾ení optimálního enkódování.
  Dobrá zpráva je, ¾e nìkteré volby by nikdy nemìly chybìt, jako
  <option>mbd=2</option>, <option>trell</option> a <option>v4mv</option>.
  Podrobný popis obvyklých enkódovacích voleb naleznete ní¾e.
</para>


<itemizedlist>
<title>Volby k nastavení:</title>
<listitem><para>
  <emphasis role="bold">vmax_b_frames</emphasis>: 1 nebo 2 je v poøádku,
  v závislosti na filmu.
  Poznamenejme, ¾e libavcodec zatím nepodporuje uzavøený GOP (volba
  <option>cgop</option> zatím nepracuje), tak¾e DivX5 nebude schopen dekódovat
  nic enkódovaného s B-snímky.
</para></listitem>

<listitem><para>
  <emphasis role="bold">vb_strategy=1</emphasis>: pomáhá ve scénách s rychlým
  pohybem.
  Vy¾aduje vmax_b_frames >= 2.
  V nìkterých videích mù¾e vmax_b_frames sní¾it kvalitu, ale vmax_b_frames=2
  spolu s vb_strategy=1 pomù¾e.
</para></listitem>

<listitem><para>
  <emphasis role="bold">dia</emphasis>: okruh vyhledávání pohybu. Èím vìt¹í, tím
  lep¹í a pomalej¹í.
  Záporné hodnoty mají úplnì jiný význam.
  Dobrými hodnotami jsou -1 pro rychlé enkódování, nebo 2-4 pro pomalej¹í.
</para></listitem>

<listitem><para>
  <emphasis role="bold">predia</emphasis>: pøedprùchod pro vyhledávání pohybu.
  Není tak dùle¾itý jako dia. Dobré hodnoty jsou 1 (výchozí) a¾ 4. Vy¾aduje
  preme=2, aby byla opravdu k nìèemu.
</para></listitem>

<listitem><para>
  <emphasis role="bold">cmp, subcmp, precmp</emphasis>: Porovnávací funkce pro
  odhad pohybu.
  Experimentujte s hodnotami 0 (výchozí), 2 (hadamard), 3 (dct) a 6 (omezení
  datového toku).
  0 je nejrychlej¹í a dostateèná pro precmp.
  Pro cmp a subcmp je 2 dobrá pro anime a 3 zase pro ¾ivou akci.
  6 mù¾e, ale nemusí být o nìco lep¹í, ale je pomalá.
</para></listitem>

<listitem><para>
  <emphasis role="bold">last_pred</emphasis>: Poèet prediktorù pohybu
  pøebíraných z pøedchozího snímku.
  1-3 nebo tak pomù¾ou za cenu men¹ího zdr¾ení.
  Vy¹¹í hodnoty jsou v¹ak pomalé a nepøiná¹í ¾ádný dal¹í u¾itek.
</para></listitem>

<listitem><para>
  <emphasis role="bold">cbp, mv0</emphasis>: Ovládá výbìr makroblokù.
  Malá ztráta rychlosti za malý zisk kvality.
</para></listitem>

<listitem><para>
  <emphasis role="bold">qprd</emphasis>: adaptivní kvantizace zalo¾ená na
  komplexnosti makrobloku.
  Mù¾e pomoci i u¹kodit v závislosti na videu a ostatních volbách.
  Toto mù¾e zpùsobovat artefakty, pokud nenastavíte vqmax na nìjakou rozumnì
  malou hodnotu (6 je dobrá, mo¾ná byste ale mìli jít a¾ na 4); vqmin=1 mù¾e
  také pomoci.
</para></listitem>

<listitem><para>
  <emphasis role="bold">qns</emphasis>: velmi pomalá, zvlá¹» v kombinaci
  s qprd.
  Tato volba nutí enkodér minimalizovat ¹um díky kompresi artefaktù, místo aby
  se sna¾il striktnì zachovávat vìrnost videa. Nepou¾ívejte ji, pokud jste ji¾
  nezkusili v¹echno ostatní kam a¾ to ¹lo a výsledek pøesto není dost dobrý.
</para></listitem>

<listitem><para>
  <emphasis role="bold">vqcomp</emphasis>: Vylep¹ení ovládání datového toku.
  Dobré hodnoty se li¹í podle videa. Mù¾ete to bezpeènì ponechat jak to je,
  pokud chcete.
  Sní¾ením vqcomp pustíte více bitù do scén s nízkou komplexností, zvý¹ením je
  po¹lete do scén s vysokou komplexností (výchozí: 0.5, rozsah: 0-1. doporuèený
  rozsah: 0.5-0.7).
</para></listitem>

<listitem><para>
  <emphasis role="bold">vlelim, vcelim</emphasis>: Nastaví jediný koeficient
  prahu eliminace pro jasové a barevné roviny.
  Ty jsou enkódovány oddìlenì ve v¹ech MPEGu podobných algoritmech.
  My¹lenka stojící za tìmito volbami je pou¾ití dobré heuristiky pro urèení,
  zda je zmìna v bloku men¹í ne¾ vámi nastavený práh a v tom pøípadì se blok
  enkóduje jako "nezmìnìný".
  To ¹etøí bity a mo¾ná i zrychlí enkódování. vlelim=-4 a vcelim=9 se zdají být
  dobré pro hrané filmy, ale pøíli¹ nepomohou s anime; pokud enkódujete anime,
  mìli byste je asi nechat beze zmìn.
</para></listitem>

<listitem><para>
  <emphasis role="bold">qpel</emphasis>: Odhad pohybu s pøesností na ètvrt
  pixelu. MPEG-4 pou¾ívá pøesnost na pùl pixelu jako výchozí pøi vyhledávání
  pohybu, proto je tato volba spojena s urèitou re¾ií, jeliko¾ se do výstupního
  souboru ukládá více informací.
  Kompresní zisk/ztráta závisí na filmu, ale obvykle to není pøíli¹ efektivní
  na anime.
  qpel v¾dy zpùsobí zvý¹ení výpoèetní nároènosti dekódování (v praxi +20% èasu
  CPU).
</para></listitem>

<listitem><para>
  <emphasis role="bold">psnr</emphasis>: neovlivní aktuální enkódování, ale
  zaznamená typ/velikost/kvalitu ka¾dého snímku do log souboru a na konci vypí¹e
  souhrnný PSNR (odstup signálu od ¹umu).
</para></listitem>

</itemizedlist>

<itemizedlist>
<title>Volby se kterými nedoporuèujeme si hrát:</title>
<listitem><para>
  <emphasis role="bold">vme</emphasis>: Výchozí je nejlep¹í.
</para></listitem>

<listitem><para>
  <emphasis role="bold">lumi_mask, dark_mask</emphasis>: Psychovizuálnì
  adaptivní kvantizace.
  Nehrajte si s tìmito volbami, pokud vám jde o kvalitu. Rozumné hodnoty mohou
  být efektivní ve va¹em pøípadì, ale pozor, je to velmi subjektivní.
</para></listitem>

<listitem><para>
  <emphasis role="bold">scplx_mask</emphasis>: Sna¾í se pøedcházet blokovým
  artefaktùm, ale postprocesing je lep¹í.
</para></listitem>
</itemizedlist>

</sect2>

<sect2 id="menc-feat-dvd-mpeg4-example">
<title>Pøíklad</title>

<para>
  Tak¾e jste si koupili zbrusu novou kopii filmu Harry Potter a Tajemná komnata
  (¹irokoúhlou verzi samozøejmì) a chcete si toto DVD ripnout, tak¾e si jej
  mù¾ete pøidat do svého Domácího kino-poèítaèe PC. Je to region 1 DVD, tak¾e je
  v NTSC. Ní¾e uvedený pøíklad je stále vhodný i pro PAL, jen musíte vynechat
  <option>-ofps 24000/1001</option> (proto¾e výstupní snímková rychlost je
  shodná se vstupní) a pøirozenì budou rozdílné souøadnice pro oøez.
</para>

<para>
  Po spu¹tìní <option>mplayer dvd://1</option>, postupujeme podle informací
  obsa¾ených v sekci <link linkend="menc-feat-telecine">Jak nalo¾it s telecine
  a prokladem v NTSC DVD</link> a zjistíme ¾e je to 24000/1001 neprokládané
  video, tak¾e nepotøebujeme pou¾ít inverzní telecine filtr, jako je
  <option>pullup</option> nebo <option>filmdint</option>.
</para>

<para>
  Dále musíme zjistit vhodný oøezový obdélník, tak¾e pou¾ijeme filtr cropdetect:

  <screen>mplayer dvd://1 -vf cropdetect</screen>

  Ujistìte se, ¾e jste pøe¹li pøes zaplnìný snímek (nìjakou jasnou scénu) a
  v konzoli <application>MPlayer</application>u uvidíte:

  <screen>crop area: X: 0..719  Y: 57..419  (-vf crop=720:362:0:58)</screen>

  Potom pøehrajeme film s tímto filtrem, abychom otestovali jeho správnost:

  <screen>mplayer dvd://1 -vf crop=720:362:0:58</screen>

  A zjistíme, ¾e to vypadá zcela v poøádku. Dále se ujistíme, ¾e ¹íøka i vý¹ka
  jsou násobky 16. ©íøka je v poøádku, vý¹ka ov¹em ne. Proto¾e jsme nepropadli
  v sedmé tøídì z matematiky, víme, ¾e nejbli¾¹ím násobkem 16 ni¾¹ím ne¾ 362 je
  352.
</para>

<para>
  Mohli bychom pou¾ít <option>crop=720:352:0:58</option>, ale bude lep¹í
  ustøihnout kousek nahoøe i dole, tak¾e zachováme støed. Zkrátili jsme vý¹ku
  o 10 pixelù, ale nechceme zvý¹it odsazení y o 5 pixelù, proto¾e je to liché
  èíslo, co¾ by nepøíznivì ovlivnilo kvalitu. Místo toho zvý¹íme odsazení y o 4
  pixely:

  <screen>mplayer dvd://1 -vf crop=720:352:0:62</screen>

  Dal¹í dùvod pro odstøi¾ení pixelù shora i zdola je to, ¾e si mù¾eme být jisti
  odstøi¾ením napùl èerných pixelù pokud existují. Pokud je v¹ak va¹e video
  telecinováno, ujistìte se, ¾e máte v øetìzu filtrù <option>pullup</option>
  filtr (nebo jiný filtr pro inverzi telecine, který hodláte pou¾ít) je¹tì pøed
  odstranìním prokladu a oøezem. (Pokud se rozhodnete zachovat va¹e video
  prokládané, pak se ujistìte, ¾e va¹e vertikální odsazení (offset)
  je násobkem 4.)
</para>

<para>
  Pokud si dìláte starosti se ztrátou tìch 10 pixelù, mo¾ná radìji sní¾íte
  rozmìry na nejbli¾¹í násobek 16. Øetìzec filtrù by pak vypadal asi takto:

  <screen>-vf crop=720:362:0:58,scale=720:352</screen>

  Takovéto zmen¹ení videa bude znamenat ztrátu malého mno¾ství detailù, co¾ bude
  pravdìpodobnì stì¾í postøehnutelné. Zvìt¹ování by naopak vedlo ke sní¾ení
  kvality (pokud byste nezvý¹ili datový tok). Oøez odstraní tyto pixely úplnì.
  To je jedna z vìcí, kterou byste si mìli uvá¾it pro ka¾dý pøípad zvlá¹».
  Napøíklad pokud bylo DVD video vyrobeno pro televizi, mìli byste se vyvarovat
  vertikálnímu ¹kálování, jeliko¾ poèet øádkù odpovídá originální nahrávce.
</para>

<para>
  Pøi prohlídce jsme zjistili, ¾e video je pomìrnì akèní, s vysokým poètem
  detailù, tak¾e jsme zvolili datový tok 2400 Kbitù.
</para>

<para>
  Nyní jsme pøipraveni provést dvouprùchodové enkódování. Prùchod jedna:

  <screen>mencoder dvd://1 -ofps 24000/1001 -oac copy -vf crop=720:352:0:62,hqdn3d=2:1:2 -ovc lavc \
-lavcopts vcodec=mpeg4:vbitrate=2400:v4mv:mbd=2:trell:cmp=3:subcmp=3:mbcmp=3:autoaspect:vpass=1 \
-o Harry_Potter_2.avi</screen>

  A prùchod dva je stejný, jen nastavíme <option>vpass=2</option>:

  <screen>mencoder dvd://1 -ofps 24000/1001 -oac copy -vf crop=720:352:0:62,hqdn3d=2:1:2 -ovc lavc \
-lavcopts vcodec=mpeg4:vbitrate=2400:v4mv:mbd=2:trell:cmp=3:subcmp=3:mbcmp=3:autoaspect:vpass=2 \
-o Harry_Potter_2.avi</screen>
</para>

<para>
  Volby <option>v4mv:mbd=2:trell</option> velmi zvý¹í kvalitu za cenu èasové
  nároènosti enkódování. Vcelku není dùvod tuto volbu vypustit, pokud je
  primárním cílem kvalita. Volby <option>cmp=3:subcmp=3:mbcmp=3</option>
  vyberou porovnávací funkci, která poskytuje lep¹í kvalitu, ne¾ výchozí.
  S tímto parametrem mù¾ete zkusit experimentovat (nahlédnìte do man stránky pro
  seznam mo¾ných hodnot), jeliko¾ rùzné funkce mohou mít velký vliv na kvalitu
  v závislosti na zdrojovém materiálu. Napøíklad pokud zjistíte, ¾e
  <systemitem class="library">libavcodec</systemitem> produkuje pøíli¹ mnoho
  ètvereèkových artefaktù, mù¾ete zkusit zvolit experimentální NSSE jako
  porovnávací funkci pøes <option>*cmp=10</option>.
</para>

<para>
  V pøípadì tohoto filmu bude výsledné AVI dlouhé 138 minut a veliké kolem 3GB.
  A proto¾e jste øekli, ¾e na velikosti nezále¾í, je to pøijatelná velikost.
  Ale pokud byste jej chtìli men¹í, mù¾ete zkusit ni¾¹í datový tok.
  Efekt zvy¹ování datového toku se toti¾ neustále sni¾uje, tak¾e zatímco je
  zlep¹ení po zvý¹ení z 1800 Kbitù na 2000 Kbitù zjevné, nemusí být ji¾ tak
  velké nad 2000 Kbitù. Beze v¹eho s tím experimentujte, dokud nebudete
  spokojeni.
</para>

<para>
  Jeliko¾ jsme protáhli video od¹umovacím filtrem, mìli bychom jej trochu pøidat
  bìhem pøehrávání. To, spolu s <option>spp</option> post-procesním filtrem,
  znatelnì zvý¹í vnímanou kvalitu a pomù¾e odstranit ètvereèkové artefakty ve
  videu. S <application>MPlayer</application>ovou volbou <option>autoq</option>
  mù¾e být mno¾ství postprocesingu provádìného filtrem spp pøizpùsobováno
  vytí¾ení CPU. V tuto chvíli rovnì¾ mù¾ete provést korekci gama a/nebo barevnou
  korekci k dosa¾ení nejlep¹ích výsledkù. Napøíklad:

  <screen>mplayer Harry_Potter_2.avi -vf spp,noise=9ah:5ah,eq2=1.2 -autoq 3</screen>

</para>
</sect2>

<sect2 id="menc-feat-dvd-mpeg4-muxing">
<title>Muxování (multiplexování)</title>
<para>
  Nyní, kdy¾ máte své video enkódované, budete jej nejspí¹ chtít muxovat
  s jedním nebo více zvukovými stopami do nosného filmového formátu, jako je
  AVI, MPEG, Matroska nebo NUT.
  <application>MEncoder</application> je zatím schopen zvuk a video zapracovat
  pouze do nosných formátù MPEG a AVI.
  Napøíklad:
  <screen>mencoder -oac copy -ovc copy  -o <replaceable>výstupní_film.avi</replaceable> -audiofile <replaceable>vstupní_audio.mp2</replaceable> <replaceable>vstupní_video.avi</replaceable></screen>
  To by mìlo slouèit video soubor <replaceable>vstupní_video.avi</replaceable>
  a zvukový soubor <replaceable>vstupní_audio.mp2</replaceable>
  do AVI souboru <replaceable>výstupní_film.avi</replaceable>.
  Tento pøíkaz pracuje s MPEG-1 layer I, II a III (známým jako MP3) zvukem,
  WAV a také nìkolika dal¹ími formáty zvuku.
</para>

<para>
  <application>MEncoder</application> obsahuje experimentální podporu pro
  <systemitem class="library">libavformat</systemitem>, co¾ je knihovna
  z projektu FFmpeg, která podporuje muxování a demuxování celé øady nosných
  formátù.
  Napøíklad:
  <screen>mencoder -oac copy -ovc copy  -o <replaceable>výstupní_film.asf</replaceable> -audiofile <replaceable>vstupní_audio.mp2</replaceable> <replaceable>vstupní_video.avi</replaceable> -of lavf -lavfopts format=asf</screen>
  To provede stejnou èinnost jako pøedchozí pøíklad, av¹ak výstupním formátem
  bude ASF.
  Prosím berte na vìdomí, ¾e tato podpora je velmi experimentální (ale de ode
  dne lep¹í) a bude funkèní pouze pokud jste zkompilovali
  <application>MPlayer</application> s podporou pro
  <systemitem class="library">libavformat</systemitem> (co¾ znamená, ¾e
  pøedkompilovaná binární verze nebude vìt¹inou fungovat).
</para>

<sect3 id="menc-feat-dvd-mpeg4-muxing-avi-limitations">
<title>Limitace nosného formátu AVI</title>
<para>
  Aèkoli je to po MPEG-1 nejpodporovanìj¹í nosný formát, má AVI i jisté
  zásadní nedostatky. Snad nejviditelnìj¹í je re¾ie.
  Na ka¾dý chunk AVI souboru je 24 bajtù ztraceno na hlavièky a index.
  To se projeví asi 5 MP na hodinu, neboli 1-2.5% prodlou¾ení 700 MB filmu.
  Nevypadá to jako mnoho, ale mù¾e to znamenat rozdíl mezi mo¾ností pou¾ít
  video pøi 700 kbitech/s nebo 714 kbitech/s a tady se ka¾dý bit projeví na
  kvalitì.
</para>

<para>
  Navíc k této neefektivitì má AVI také následující hlavní omezení:
</para>

<orderedlist>
<listitem>
<para>
  Mù¾e být uchováván pouze obsah s konstantní snímkovou rychlostí. To je
  zvlá¹tì omezující, kdy¾ má pùvodní materiál, který chcete enkódovat, smí¹ený
  obsah. Napøíklad smìs NTSC videa a filmového materiálu.
  Jistì¾e jsou zde cestièky, které umo¾ní ulo¾it obsah se smí¹enou snímkovou
  rychlostí v AVI, ale ty zvy¹ují (ji¾ tak velkou) re¾ii pìtinásobnì nebo víc,
  proto nejsou praktické.
</para>
</listitem>
<listitem>
<para>
  Zvuk v AVI musí mít buï konstantní datový tok (CBR) nebo konstantní velikost
  rámce (èili v¹echny rámce se dekódují na stejný poèet vzorkù).
  Nane¹tìstí ten nejefektivnìj¹í kodek, Vorbis, nesplòuje ani jeden z tìchto
  po¾adavkù.
  Pokud tedy plánujete ulo¾it svùj film do AVI, budete muset pou¾ít ménì
  efektivní kodek, jako MP3 nebo AC3.
</para>
</listitem>
</orderedlist>

<para>
  Z vý¹e uvedených dùvodù <application>MEncoder</application> zatím
  nepodporuje promìnnou snímkovou rychlost ani enkódování do Vorbisu.
  Nemusíte to v¹ak pova¾ovat za omezení, jestli¾e je
  <application>MEncoder</application> jediným nástrojem pro va¹e
  enkódování. Nakonec je mo¾né pou¾ít <application>MEncoder</application> pouze
  pro enkódování videa a pak pou¾ít externí nástroje pro enkódování zvuku a
  namuxování do jiného nosného formátu.
</para>
</sect3>

<sect3 id="menc-feat-dvd-mpeg4-muxing-matroska">
<title>Muxování do nosného formátu Matroska</title>
<para>
  Matroska je svobodný a otevøený standard nosného formátu, zamìøený na
  nabídku mnoha pokroèilých vlastností, které star¹í nosné formáty, jako AVI,
  nemohou poskytnout.
  Napøíklad Matroska podporuje zvuk s promìnným datovým tokem (VBR),
  promìnné snímkové rychlosti (VFR), kapitoly, pøílohy souborù, kód pro
  detekci chyb (EDC) a moderní A/V kodeky jako "Advanced Audio
  Coding" (AAC), "Vorbis" nebo "MPEG-4 AVC" (H.264), z nich¾ ¾ádný nelze
  pou¾ít v AVI.
</para>

<para>
  Nástroje pro vytváøení Matroska souborù jsou souhrnnì nazvány 
  <application>mkvtoolnix</application> a jsou dostupné pro vìt¹inu Unixových
  platforem a stejnì tak <application>Windows</application>.
  Proto¾e je Matroska otevøený standard, mù¾ete najít jiné nástroje, které vám
  lépe padnou, ale proto¾e mkvtoolnix je nejroz¹íøenìj¹í a je podporován
  pøímo Matroska týmem, pokryjeme jen jejich pou¾ití.
</para>

<para>
  Asi nejsnaz¹í zpùsob, jak zaèít s Matroskou je pou¾ít 
  <application>MMG</application>, grafickou nadstavbu dodávanou s
  <application>mkvtoolnix</application> a øídit se
  <ulink url="http://www.bunkus.org/videotools/mkvtoolnix/doc/mkvmerge-gui.html">návodem k mkvmerge GUI (mmg)</ulink>
</para>

<para>
  Mù¾ete rovnì¾ muxovat zvukové a video soubory z pøíkazového øádku:
  <screen>mkvmerge -o <replaceable>výstup.mkv</replaceable> <replaceable>vstupní_video.avi</replaceable> <replaceable>vstupní_audio1.mp3</replaceable> <replaceable>vstupní_audio2.ac3</replaceable></screen>
  To spojí video soubor <replaceable>vstupní_video.avi</replaceable>
  a dva zvukové soubory <replaceable>vstupní_audio1.mp3</replaceable>
  a <replaceable>vstupní_audio2.ac3</replaceable> do Matroska souboru
  <replaceable>výstup.mkv</replaceable>.
  Matroska, jak jsme ji¾ øekli, umí mnohem víc ne¾ to, jako více zvukových stop
  (vèetnì doladìní audio/video synchronizace), kapitoly, titulky, støíhání,
  atd...
  Detaily naleznete v dokumentaci k tìmto aplikacím.
</para>

</sect3>

</sect2>

</sect1>

<sect1 id="menc-feat-telecine">
<title>Jak nalo¾it s telecine a prokladem v NTSC DVD</title>

<sect2 id="menc-feat-telecine-intro">
<title>Pøedstavení</title>
<formalpara>
<title>Co je to telecine?</title>
<para>
  Pokud moc nerozumíte tomu, co je napsáno v tomto dokumentu, doporuèujeme
  nav¹tívit tuto stránku:
  <ulink url="http://www.divx.com/support/guides/guide.php?gid=10">http://www.divx.com/support/guides/guide.php?gid=10</ulink>
  Na této adrese je srozumitelný a rozumnì vyèerpávající popis co je to
  telecine.
</para></formalpara>

<formalpara>
<title>Poznámka k èíslùm.</title>
<para>
  Mnoho dokumentù, vèetnì vý¹e odkazované pøíruèky, udává hodnotu pùlsnímkù za
  sekundu NTSC videa jako 59.94 a odpovídající snímky za sekundu jako 29.97
  (pro telecinované a prokládané video) a 23.976 (pro neprokládané).
  Pro jednoduchost nìkteré dokumenty zaokrouhlují tyto hodnoty na 60, 30 a 24.
</para></formalpara>

<para>
  Pøesnì øeèeno jsou v¹echny tyto èísla pøibli¾ná. Èernobílé NTSC video mìlo
  pøesnì 60 pùlsnímkù za sekundu, ale pozdìji byla zvolena hodnota 60000/1001,
  aby bylo mo¾né pøidat barevná data a zùstat kompatibilní se starými
  èernobílými televizemi. Digitální NTSC (jak je na DVD) má rovnì¾ rychlost
  60000/1001 pùlsnímkù za sekundu. Z toho vyplývá, ¾e prokládané a telecinované
  video má 30000/1001 snímkù za sekundu; neprokládané video má 24000/1001 snímkù
  za sekundu.
</para>

<para>
  Star¹í verze dokumentace <application>MEncoder</application>u a mnoho zpráv
  v archivu konference hovoøí o 59.94, 29.97 a 23.976.
  V¹echna dokumentace <application>MEncoder</application>u byla aktualizována
  a pou¾ívá zlomkových hodnot. Vy byste je mìli pou¾ívat také.
</para>

<para>
  <option>-ofps 23.976</option> je nesprávnì.
  Místo toho byste mìli pou¾ít <option>-ofps 24000/1001</option>.
</para>

<formalpara>
<title>Jak je pou¾íváno telecine.</title>
<para>
  Ve¹keré video urèené k zobrazení na NTSC televizi musí mít 60000/1001
  pùlsnímkù za sekundu. Filmy vyrábìné pro televizi jsou èasto natáèeny pøímo
  ve 60000/1001 pùlsnímcích za sekundu, ale vìt¹ina filmù do kin je natáèena pøi
  24 nebo 24000/1001 snímcích za sekundu. Kdy¾ je film pøepisován na DVD, je
  video upraveno pro televizi v procesu zvaném telecine.
</para></formalpara>

<para>
  Na DVD není video ve skuteènosti nikdy ulo¾eno v 60000/1001 pùlsnímcích za
  sekundu. Video je¾ bylo pùvodnì 60000/1001, bude mít ka¾dý pár pùlsnímkù
  zkombinován do podoby snímku s rychlostí 30000/1001 snímkù za sekundu.
  Hardwarové DVD pøehrávaèe pak ètou pøíznak, zabudovaný ve video proudu, který
  udává jestli první pùlsnímek tvoøí liché nebo sudé øádky.
</para>

<para>
  Obsah ve 24000/1001 snímcích za sekundu obvykle zùstává tak jak byl v dobì
  pøepisu na DVD a DVD pøehrávaè musí provést telecine za letu. Nìkdy je v¹ak
  video telecinováno <emphasis>pøed</emphasis> ulo¾ením na DVD; dokonce i kdy¾
  mìlo pùvodnì 24000/1001 snímkù za sekundu, bude mít 60000/1001 pùlsnímkù za
  sekundu. Pokud je ulo¾en na DVD, páry pùlsnímkù jsou zkombinovány do formy
  30000/1001 snímkù za sekundu.
</para>

<para>
  Kdy¾ se podíváme na jednotlivé snímky vzniklé z videa o 60000/10001 pùlsnímcích
  za sekundu, telecinovaného nebo ne, je zøetelnì vidìt toto prokládání jakmile
  je zde nìjaký pohyb, jeliko¾ jeden pùlsnímek (øeknìme liché øádky)
  reprezentuje èasový okam¾ik o 1/(60000/1001) sekundy pozdìj¹í ne¾ ten druhý.
  Pøehrávání prokládaného videa na poèítaèi vypadá ¹karedì jak proto, ¾e monitor
  má vy¹¹í rozli¹ení, ale i proto¾e video je zobrazováno snímek po snímku místo
  pùlsnímek po pùlsnímku.
</para>

<itemizedlist>
<title>Poznámky:</title>
<listitem><para>
  Tento odstavec platí pouze pro NTSC DVD, nikoli PAL.
  </para></listitem>
<listitem><para>
  Øádky s pøíklady spu¹tìní <application>MEncoder</application>u v dokumentu
  <emphasis role="bold">nejsou</emphasis> urèeny pro opravdové pou¾ití.
  Obsahují pouze nutné minimum vy¾adované pro enkódování pøíslu¹né ke kategorii
  videa. Jak dìlat dobré DVD ripy nebo doladit
  <systemitem class="library">libavcodec</systemitem> pro maximální kvalitu
  není v zábìru tohoto dokumentu.
  </para></listitem>
<listitem><para>
  Poznámky pod èarou pøíslu¹né pro tuto pøíruèku jsou linkovány takto:
  <link linkend="menc-feat-telecine-footnotes">[1]</link>
  </para></listitem>
</itemizedlist>
</sect2>

<sect2 id="menc-feat-telecine-ident">
<title>Jak zjistit o jaký typ videa se jedná</title>

<sect3 id="menc-feat-telecine-ident-progressive">
<title>Progresivní (neprokládané)</title>
<para>
  Progresivní video je pùvodnì natoèeno pøi 24000/1001 snímcích za sekundu a
  ulo¾eno na DVD beze zmìn.
</para>

<para>
  Kdy¾ pøehrajete progresivní DVD v <application>MPlayer</application>u,
  <application>MPlayer</application> vypí¹e následující øádek jakmile zaène
  pøehrávat:

  <screen> demux_mpg: 24000/1001 fps progressive NTSC content detected, switching framerate.</screen>

  Od tohoto okam¾iku by demux_mpg nemìl nikdy øíct ¾e na¹el
  &quot;30000/1001 fps NTSC obsah.&quot;
</para>

<para>
  Kdy¾ sledujete progresivní video, nemìli byste nikdy vidìt ¾ádný proklad.
  Dejte si ale pozor, jeliko¾ je obèas tro¹ku telecine namixováno tam, kde byste
  to vùbec neèekali. Setkal jsem se s TV show na DVD, které mìly sekundu
  telecine pøi ka¾dé zmìnì scény nebo na zcela náhodných místech. Jednou jsem se
  díval na DVD, které bylo do pùlky progresivní a od pùlky telecinováno. Pokud
  chcete být <emphasis>opravdu</emphasis> dùkladní, mù¾ete oskenovat celý film:

  <screen>mplayer dvd://1 -nosound -vo null -benchmark</screen>

  Pou¾ití volby <option>-benchmark</option> nechá
  <application>MPlayer</application> pøehrát film tak rychle, jak je to jen
  mo¾né; stejnì to ale, v závislosti na va¹em stroji, chvíli potrvá.
  V¾dy, kdy¾ demux_mpg ohlásí zmìnu snímkové rychlosti, øádek tìsnì nad hlá¹ením
  uká¾e èas ve kterém ke zmìnì do¹lo.
</para>

<para>
  Obèas je progresivní video na DVD oznaèeno jako
  &quot;soft-telecine&quot; proto¾e je zamý¹leno, aby telecine provedl DVD
  pøehrávaè.
</para>
</sect3>

<sect3 id="menc-feat-telecine-ident-telecined">
<title>Telecinováno (pøepsáno pro NTSC televizi)</title>
<para>
  Telecinované video bylo pùvodnì natoèeno pøi 24000/1001, ale bylo telecinováno
  <emphasis>pøed</emphasis> zápisem na DVD.
</para>

<para>
  <application>MPlayer</application> (nikdy) nehlásí ¾ádnou zmìnu snímkové
  rychlosti, kdy¾ pøehrává telecinované video.
</para>

<para>
  Pøi sledování telecinovaného videa uvidíte prokladové artefakty, které jako by
  &quot;blikaly&quot;: opakovanì mizí a objevují se.
  Blí¾e se na to mù¾ete podívat:
  <orderedlist>
  <listitem>
    <screen>mplayer dvd://1</screen>
    </listitem>
  <listitem><para>
    Pøeviòte na èást s pohybem.
    </para></listitem>
  <listitem><para>
    Pou¾ijte klávesu <keycap>.</keycap> pro krokování po jednom snímku.
    </para></listitem>
  <listitem><para>
    Sledujte vzor prokládanì vypadajících a progresivnì vypadajících snímkù.
    Pokud je vzor, který sledujete PPPII,PPPII,PPPII,..., pak je video
    telecinováno. Pokud vidíte jiný vzor, pak mohlo být video telecinováno
    pou¾itím nìjaké nestandardní metody; <application>MEncoder</application>
    neumí bezztrátovì pøevést nestandardní telecine do progresivního. Pokud
    nevidíte ¾ádný vzor, pak je video nejspí¹ prokládané.
    </para></listitem>
  </orderedlist>
</para>

<para>
  Nìkdy je telecinované video na DVD oznaèeno jako &quot;hard-telecine&quot;.
  Jeliko¾ hard-telecine ji¾ je ve 60000/1001 pùlsnímcích za sekundu, DVD
  pøehrávaè pøehraje video bez jakýchkoli manipulací.
</para>
</sect3>

<sect3 id="menc-feat-telecine-ident-interlaced">
<title>Prokládané</title>
<para>
  Prokládané video bylo od samého zaèátku filmováno pøi 60000/1001 pùlsnímcích
  za sekundu a ulo¾eno na DVD ve 30000/1001 snímcích za sekundu. Efekt
  prokládání (èasto oznaèovaný jako &quot;roztøepení&quot;) je výsledkem
  skládání pùlsnímkù do snímkù. Vzdálenost mezi pùlsnímky má být 1/(60000/1001)
  sekundy a proto kdy¾ jsou zobrazeny souèasnì, je rozdíl jasnì patrný.
</para>

<para>
  Stejnì jako u telecinovaného videa by <application>MPlayer</application> nemìl
  hlásit jakékoli zmìny snímkové rychlosti pøi pøehrávání prokládaného obsahu.
</para>

<para>
  Kdy¾ si prohlédnete video blí¾e pomocí krokování snímkù pomocí klávesy
  <keycap>.</keycap>, uvidíte, ¾e ka¾dý jednotlivý snímek je prokládaný.
</para>
</sect3>

<sect3 id="menc-feat-telecine-ident-mixedpt">
<title>Smí¹ené progresivní a telecinované</title>
<para>
  Ve¹kerý obsah &quot;smí¹eného progresivního a telecinovaného&quot; videa mìl
  pùvodnì 24000/1001 snímkù za sekundu, ale nìkteré èásti pro¹ly telecine.
</para>

<para>
  Kdy¾ <application>MPlayer</application> pøehrává tuto kategorii, bude (èasto
  i opakovanì) pøepínat mezi &quot;30000/1001 snímky/s NTSC&quot;
  a &quot;24000/1001 snímky/s progresivním NTSC&quot;. Sledujte spodek
  <application>MPlayer</application>ova výstupu, abyste zachytili tyto zprávy.
</para>

<para>
  Mìli byste provìøit èásti se &quot;30000/1001 snímky/s NTSC&quot;, abyste mìli
  jistotu, ¾e jsou skuteènì telecinovány a ne jen prokládané.
</para>
</sect3>

<sect3 id="menc-feat-telecine-ident-mixedpi">
<title>Smí¹ené progresivní a prokládané</title>
<para>
  Ve &quot;smí¹eném progresivním a prokládaném&quot; obsahu bylo progresivní a
  prokládané video splácáno dohromady.
</para>

<para>
  Tato kategorie vypadá jako &quot;smí¹ené progresivní a telecine&quot;,
  dokud si neprohlédnete èásti se 30000/1001 snímky/s a neuvidíte, ¾e nemají
  telecine vzor.
</para>
</sect3>

</sect2>

<sect2 id="menc-feat-telecine-encode">
<title>Jak enkódovat jednotlivé kategorie</title>
<para>
  Jak jsem se zmínil na zaèátku, pøíklady pøíkazových øádkù
  <application>MEncoder</application>u ní¾e <emphasis role="bold">nejsou</emphasis>
  urèeny pro praktické pou¾ití; pouze demonstrují, minimum voleb nutných k tomu,
  abyste správnì enkódovali ka¾dou kategorii.
</para>

<sect3 id="menc-feat-telecine-encode-progressive">
<title>Progresivní/title>
<para>
  Progresivní video nevy¾aduje ¾ádné speciální filtrování pro enkódování.
  Jediná volba, která by urèitì nemìla chybìt je
  <option>-ofps 24000/1001</option>. Jinak se <application>MEncoder</application>
  pokusí enkódovat pøi 30000/1001 snímcích/s a bude opakovat snímky.
</para>

<para>
  <screen>mencoder dvd://1 -nosound -ovc lavc -ofps 24000/1001</screen>
</para>

<para>
  Èasto se stává, ¾e video, které vypadá progresivnì, má v sobì zamíchány
  kratièké telecinované èásti. Pokud si nejste jisti, je nejbezpeènìj¹í
  pova¾ovat video za
  <link linkend="menc-feat-telecine-encode-mixedpt">smí¹ené progresivní a
  telecinované</link>. Ztráta výkonu je jen malá
  <link linkend="menc-feat-telecine-footnotes">[3]</link>.
</para>
</sect3>

<sect3 id="menc-feat-telecine-encode-telecined">
<title>Telecinované</title>
<para>
  Telecine lze obrátit a dostat tak pùvodní 24000/1001 obsah, za pou¾ití metody
  zvané inverzní telecine.
  <application>MPlayer</application> má nìkolik filtrù právì pro tuto èinnost;
  nejlep¹í z tìchto filtrù, <option>pullup</option>, je popsán v èásti
  <link linkend="menc-feat-telecine-encode-mixedpt">smí¹ené progresivní a
  telecinované</link>.
</para>
</sect3>

<sect3 id="menc-feat-telecine-encode-interlaced">
<title>Prokládané</title>
<para>
  V praxi není vìt¹inou mo¾né dostat kompletní progresivní video z prokládaného
  obsahu. Jediný zpùsob jak to udìlat bez ztráty poloviny svislého rozli¹ení je
  zdvojením snímkové rychlosti a zkusit &quot;odhadnout&quot; co mám provést
  s odpovídajícími linkami ka¾dého z pùlsnímkù (má to ov¹em i nevýhody &ndash;
  viz metoda 3).
</para>

<orderedlist>
<listitem><para>
  Enkódujte video v prokládané formì. Obvykle prokládání zpùsobí tì¾kou újmu
  schopnosti enkodéru dobøe komprimovat, ale
  <systemitem class="library">libavcodec</systemitem> má dvì volby urèené právì
  pro lep¹í ukládání prokládaného videa: <option> ildct</option> a
  <option>ilme</option>. Rovnì¾ velmi doporuèujeme pou¾ití volby
  <option>mbd=2</option> <link linkend="menc-feat-telecine-footnotes">[2] </link>
  proto¾e bude enkódovat makrobloky jako neprokládané tam, kde není ¾ádný pohyb.
  Volba <option>-ofps</option> zde <emphasis role="bold">není</emphasis> nutná.

  <screen>mencoder dvd://1 -nosound -ovc lavc -lavcopts ildct:ilme:mbd=2</screen>
  </para></listitem>
<listitem><para>
  Pou¾ijte filtr odstraòující proklad pøed enkódováním. Je jich zde nìkolik,
  mù¾ete si vybrat. Ka¾dý z nich má svá pro i proti. Prohlédnìte si výstup
  <option>mplayer -pphelp</option> abyste zjistili, které jsou k dispozici
  (grep pro &quot;deint&quot;) a vyhledejte
  <ulink url="http://www.mplayerhq.hu/homepage/design6/info.html#mailing_lists">
  e-mailové konference MPlayeru</ulink>, kde naleznete mnoho diskusí o rùzných
  filtrech. Snímková rychlost se ani zde nemìní, tak¾e ¾ádné
  <option>-ofps</option>. Odstranìní proklady by rovnì¾ mìlo být provedeno po
  oøezání <link linkend="menc-feat-telecine-footnotes">[1]</link>, ale pøed
  ¹kálováním.

  <screen>mencoder dvd://1 -nosound -vf pp=lb -ovc lavc</screen>
  </para></listitem>
<listitem><para>
  Nane¹tìstí je tato volba vadná v <application>MEncoder</application>u;
  mìla by dobøe pracovat v <application>MEncoder G2</application>, ale ten tu
  zatím není. Stejnì je urèením <option> -vf tfields</option> vytvoøení
  kompletního snímku z ka¾dého pùlsnímku, co¾ zvý¹í snímkovou rychlost na
  60000/1001. Výhoda tohoto pøístupu je v tom, ¾e nepøijdete o ¾ádná data;
  Proto¾e v¹ak ka¾dý snímek pochází jen z jediného pùlsnímku, musí být chybìjící
  linky nìjak dopoèítány. Neexistuje mnoho dobrých metod, generujících chybìjící
  data, tak¾e výsledek bude trochu podobný tomu, kdy¾ se pou¾ije nìkterý filtr
  odstraòující proklad.
  Generováním chybìjících linek vznikají dal¹í problémy tím, ¾e se zdvojnásobí
  mno¾ství dat. Tak¾e jsou potøeba vy¹¹í datové toky pro enkódování, aby byla
  zachována kvalita a spotøebuje se více výkonu CPU jak pro enkódování, tak pro
  dekódování. tfields má nìkolik rùzných voleb pro volbu zpùsobu generování
  chybìjících linek. Pokud pou¾ijete tuto mo¾nost, prostudujte si manuál a
  zvolte si volbu, která s va¹ím materiálem vypadá nejlépe.
  Poznamenejme, ¾e pøi pou¾ití <option>tfields</option>
  <emphasis role="bold">musíte</emphasis> nastavit <option>-fps</option> a
  <option>-ofps</option> na dvojnásobek snímkové rychlosti originálu.

  <screen>mencoder dvd://1 -nosound -vf tfields=2 -ovc lavc -fps 60000/1001 -ofps 60000/1001</screen>
  </para></listitem>
<listitem><para>
  Pokud plánujete výrazné zmen¹ování, mù¾ete extrahovat a enkódovat jen jeden
  z pùlsnímkù. Samozøejmì pøijdete o polovinu svislého rozli¹ení, ale pokud
  plánujete zmen¹ení ideálnì na 1/2 originální velikosti, nebude na této ztrátì
  vùbec zále¾et. Výsledek bude progresivní soubor s 30000/1001 snímky za sekundu.
  Celý postup spoèívá v pou¾ití <option>-vf field</option> a následném oøezu
  <link linkend="menc-feat-telecine-footnotes">[1]</link> a pøíslu¹ném
  ¹kálování. Pamatujte, ¾e musíte nastavit scale tak, aby kompenzoval
  zmen¹ení svislého rozmìru na polovinu.
  <screen>mencoder dvd://1 -nosound -vf field=0 -ovc lavc</screen>
  </para></listitem>
</orderedlist>
</sect3>

<sect3 id="menc-feat-telecine-encode-mixedpt">
<title>Smí¹ené progresivní a telecinované</title>
<para>
  Abychom pøevedli smí¹ené progresivní a telecinované video zcela na progresivní
  video, musí být telecinované èásti inverznì telecinovány. K tomu lze dospìt
  tøemi postupy popsanými ní¾e.Poznamenejme, ¾e byste mìli
  <emphasis role="bold">v¾dy</emphasis> provést inverzní telecine pøed
  jakýmkoliv ¹kálováním; a v pøípadì, ¾e pøesnì nevíte co dìláte, také pøed
  oøezáním <link linkend="menc-feat-telecine-footnotes">[1]</link>.
  Volba <option>-ofps 24000/1001</option> je vy¾adována, proto¾e výstupní video
  bude mít 24000/1001 snímkù za sekundu.
</para>

<itemizedlist>
<listitem><para>
  <option>-vf pullup</option> je navr¾en tak, aby inverznì telecinoval, ale
  progresivní data nechával jak jsou. Pro správnou funkci
  <emphasis role="bold">musí</emphasis> být <option>pullup</option> následován
  filtrem <option>softskip</option>, jinak <application>MEncoder</application>
  zhavaruje. <option>pullup</option> je v¹ak nejèist¹í a nejpøesnìj¹í dostupnou
  metodou pro enkódování jak telecinovaného, tak &quot;smí¹eného progresivního a
  telecinovaného&quot;.

  <screen>mencoder dvd://1 -nosound -vf pullup,softskip -ovc lavc -ofps 24000/1001</screen>
  </para>


  </listitem>
  <listitem><para>
  Star¹í metodou je, spí¹e ne¾ inverznì telecinovat telecinované èásti,
  telecinovat progresivní èásti a poté inverznì telecinovat celé video.
  Zmatení? softpulldown je filtr, který projde celé video a pøevede celý soubor
  na telecinovaný. Pokud budeme následovat softpulldown buï
  <option>detc</option> nebo <option>ivtc</option>, bude koneèný výsledek zcela
  progresivní. Nutná je volba <option>-ofps 24000/1001</option>.

  <screen>mencoder dvd://1 -nosound -vf softpulldown,ivtc=1 -ovc lavc -ofps 24000/1001</screen>
  </para>
  </listitem>

<listitem><para>
  Osobnì jsem nepou¾il <option>-vf filmdint</option>, ale toto o nìm (pøibli¾nì)
  øekl D Richard Felker III:

  <blockquote><para>Je to OK, ale IMO to zkou¹í a¾ pøíli¹ èasto odstraòovat
    proklad místo provádìní inverzního telecine (stejnì jako settop DVD
    pøehrávaèe &amp; progresivní televize) co¾ vede ke ¹karedému tøepotání a
    dal¹ím artefaktùm. Pokud jej chcete pou¾ívat, mìli byste pøedtím alespoò
    trochu èasu vìnovat ladìní voleb a sledováním výstupu, abyste mìli jistotu,
    ¾e vám to nìco nekazí.</para></blockquote>
  </para></listitem>
</itemizedlist>
</sect3>

<sect3 id="menc-feat-telecine-encode-mixedpi">
<title>Smí¹ené progresivní a prokládané</title>
<para>
  Máme dvì volby pro práci s touto kategorií, obì jsou v¹ak kompromisem. Mìli
  byste se rozhodnout podle trvání/umístìní ka¾dého typu.
</para>

<itemizedlist>
<listitem><para>
  Pova¾ujte to za progresivní. Prokládané èásti budou vypadat prokládanì a
  nìkteré z prokládaných políèen bude muset být zahozeno, co¾ povede
  k nestejnomìrnému poskakování. Mù¾ete proti tomu nasadit postprocesní filtr,
  pokud chcete, ale tím mírnì degradujete progresivní èásti.
  </para>

  <para>
  Této volbì byste se mìli rozhodnì vyhnout, pokud chcete nakonec zobrazovat
  video na zobrazovaèi s prokládaným obrazem (pøes TV kartu napøíklad).
  Pokud máte prokládané snímky ve videu s rychlostí 24000/1001 snímkù za
  sekundu, budou telecinovány spolu s progresivními snímky. Polovina
  prokládaných "snímkù" bude zobrazena po dobu trvání tøech snímkù
  (3/(60000/1001) sekund), co¾ povede k poskakování. Efekt
  &quot;cukání zpìt&quot; vypadá skuteènì zle. Pokud se o to pøece pokusíte,
  <emphasis role="bold">musíte</emphasis> pou¾ít filtr odstraòující proklad,
  jako je <option>lb</option> nebo <option>l5</option>.
  </para>

  <para>
  ©patnou volbou je to i pro progresivní zobrazovaè. Ten zahodí páry po sobì
  jdoucích snímkù, co¾ povede k pøeru¹ování, které mù¾e být více viditelné, ne¾
  pøi druhé metodì, která zobrazuje nìkteré progresivní snímky dvakrát.
  Prokládané video se 30000/1001 snímky za sekundu je toti¾ ponìkud trhané,
  proto¾e by ve skuteènosti mìlo být promítáno pøi 60000/1001 pùlsnímcích za
  sekundu, tak¾e zdvojení nìkterých snímkù není tak moc vidìt.
  </para>

  <para>
  V ka¾dém pøípadì je nejlep¹í posoudit obsah a zpùsob, jakým bude zobrazován.
  Pokud je va¹e video z 90% progresivní a nikdy jej nebudete pou¹tìt na
  televizi, mìli byste volit progresivní pøístup.
  Pokud je progresívní jen z poloviny, pravdìpodobnì jej bude lep¹í enkódovat
  jako ba bylo celé prokládané.
  </para>
  </listitem>

<listitem><para>
  Pokládat jej za prokládané. Nìkteré snímky v progresivních èástech budou muset
  být duplikovány, co¾ povede k nepravidelnému poskakování. Opìt platí, ¾e
  filtry pro odstranìní prokladu mohou ponìkud degradovat progresivní èásti.
  </para></listitem>

</itemizedlist>
</sect3>

</sect2>

<sect2 id="menc-feat-telecine-footnotes">
<title>Poznámky pod èarou</title>
<orderedlist>
<listitem><formalpara>
  <title>K oøezu:</title>
  <para>
  Video data na DVD jsou ukládána ve formátu zvaném YUV 4:2:0. V YUV videu jsou,
  jasová (&quot;èernobílá&quot;; angl. luma) a barvonosná (angl. chroma) slo¾ka
  ukládány oddìlenì. Proto¾e je lidské oko ménì citlivé na zmìnu barvy, ne¾ na
  jas, pøipadá v YUV 4:2:0 obrázku pouze jeden barvonosný pixel na ka¾dé ètyøi
  jasové pixely. V progresivním obrázku má ka¾dý ètverec 2x2 jasovými pixely
  právì jeden barvonosný pixel. Proto musíte oøezávat progresivní YUV 4:2:0
  na sudé rozmìry a pou¾ívat sudé odsazení (offsety). Napøíklad
  <option>crop=716:380:2:26</option> je OK, ale
  <option>crop=716:380:3:26 </option> není.
  </para>
  </formalpara>

  <para>
  Kdy¾ máte co do èinìní s prokládaným YUV 4:2:0, je situace mnohem
  komplikovanìj¹í. Místo ka¾dých ètyøech pixelù v <emphasis>rámu</emphasis>
  sdílejících barvonosný pixel, ka¾dé ètyøi jasové pixely v ka¾dém
  <emphasis>pùlsnímku</emphasis> sdílejí barvonosný pixel. Kdy¾ jsou pùlsnímky
  prolo¾eny do snímku, ka¾dá linka má vý¹ku jeden pixel. A nyní místo aby dané
  ètyøi pixely tvoøily ètverec, jsou první dva vedle sebe a druhé dva jsou vedle
  sebe o dvì linky ní¾. Dva pixely tìsnì pod nimi patøí do jiného pùlsnímku a
  proto sdílí jiný barvonosný pixel se dvìma jasovými pixely o dva øádky ní¾.
  V¹echno tohle nás nutí mít svislé rozmìry oøezání a odsazení bezezbytku
  dìlitelné ètyømi. Vodorovné staèí mohou zùstat jen sudé.
  </para>

  <para>
  Pro telecinované video doporuèuji, abyste oøezání provádìli a¾ po inverzi
  telecine. Jakmile je video progresivní, staèí øezat jen na sudé rozmìry.
  Pokud si v¹ak pøece jen chcete dopøát mírné zrychlení, které mù¾e poskytnout
  èasný oøez, musíte svisle dodr¾et násobky ètyøech, jinak nebude mít filtr
  pro inverzi telecine správná data.
  </para>

  <para>
  Prokládané (nikoli telecinované) video musíte v¾dy oøezávat svisle násobky
  ètyø, pokud pøed oøezáním nepou¾ijete <option>-vf field</option>.
  </para>
  </listitem>

<listitem><formalpara>
  <title>K volbám pro enkódování a kvalitì:</title>
  <para>
  Jen proto, ¾e doporuèuji <option>mbd=2</option> zde neznamená, ¾e by tato
  volba nemohla být pou¾ita jinde. V kombinaci s <option>trell</option>, je
  <option>mbd=2</option> jednou ze dvou voleb
  <systemitem class="library">libavcodec</systemitem>u, které nejvíce zvy¹ují
  kvalitu a vy byste mìli v¾dy pou¾ít alespoò tyto dvì, pokud není na ¹kodu
  zpomalení rychlosti enkódování (napø. pøi enkódování v reálném èase).
  Mnoho dal¹ích voleb <systemitem class="library">libavcodec</systemitem>u
  zvy¹uje kvalitu enkódování (a sni¾uje jeho rychlost), ale to je mimo zamìøení
  tohoto textu.
  </para>
  </formalpara>
  </listitem>

<listitem><formalpara>
  <title>K výkonu filtru pullup:</title>
  <para>
  Pou¾ití <option>pullup</option> je bezpeèné (spolu se <option>softskip
  </option>) ne progresivní video a je to obvykle dobrá volba, pokud nebyl zdroj
  provìøen, ¾e je celý progresivní. Ve vìt¹inì pøípadù je ztráta výkonu malá.
  V ojedinìlých pøípadech enkódování zpùsobí <option>pullup</option>, ¾e je
  <application>MEncoder</application> o 50% pomalej¹í. Pøidání zpracování zvuku
  a pokroèilých <option>lavcopts</option> zastíní tento rozdíl tak, ¾e rozdíl
  v rychlosti pùsobený pou¾itím <option>pullup</option> se sní¾í na 2%.
  </para>
  </formalpara>
  </listitem>

</orderedlist>

<!-- Some further explanation, because of homonym problem in interlace and
     interleave translation. If anybody wants it in english, just ask.  -->

<listitem><formalpara>
  <title>K pøekladu:</title>
  <para>
  Pøeklad slov interlace a interleave je velmi obtí¾ný, proto¾e vede k jedinému
  èeskému ekvivalentu &ndash; prokládání. V prvním pøípadì (interlace) se jedná
  o prokládání obrázku, kdy se z lichých a sudých øádkù vytvoøí dva pùlsnímky,
  co¾ je bì¾né v TV.
  Prokládání (interleave) je naproti tomu slouèení rùzného obsahu (zvuk, video)
  do jediného souboru &ndash; kontejneru (napø. AVI) tak, ¾e se ka¾dá slo¾ka
  rozdìlí na malé èásti (tzv. chunky) a ty se pak jeden za druhým ukládají podle
  urèitého vzoru. O to se stará muxer (multiplexer). Abychom dostali zpìt
  jednotlivé slo¾ky, musíme poskládat proházené kousky zase zpìt, o co¾ se stará
  demuxer (demultiplexor).
  
  </para>
  </formalpara>
  </listitem>

</orderedlist>

</sect2>

</sect1>

</chapter>
