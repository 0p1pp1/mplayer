<?xml version="1.0" encoding="iso-8859-1"?>
<!-- synced with 1.19 -->
<sect2 id="video-dev">
<title>Dispositivos de salida de video</title>

<sect3 id="mtrr">
<title>Configurando MTRR</title>

<para>
Es MUY recomendable comprobar si los registros MTRR están
correctamente establecidos, porque pueden proporcionar un
aumento considerable de rendimiento.
</para>

<para>
Haga <command>/proc/mtrr</command>:
<screen>
<prompt>--($:~)--</prompt> cat /proc/mtrr
reg00: base=0xe4000000 (3648MB), size=  16MB: write-combining, count=9
reg01: base=0xd8000000 (3456MB), size= 128MB: write-combining, count=1<!--
--></screen>
</para>

<para>
Esto es lo correcto, muestra mi Matrox G400 con 16MB de memoria.
Tengo esto por usar XFree 4.x.x, que configura los registros MTRR
automáticamente.
</para>

<para>
Si no funciona, deberá hacerlo de manera manual. Primero, debe encontrar
la dirección base. Tiene 3 formas de encontrarla:

<orderedlist>
<listitem><para>
  desde los mensajes de inicio de X11, por ejemplo:
  <screen>
(--) SVGA: PCI: Matrox MGA G400 AGP rev 4, Memory @ 0xd8000000, 0xd4000000
(--) SVGA: Linear framebuffer at 0xD8000000<!--
--></screen>
  </para></listitem>
<listitem><para>
  de <filename>/proc/pci</filename> (use la órden <command>lspci -v</command>):
  <screen>
01:00.0 VGA compatible controller: Matrox Graphics, Inc.: Unknown device 0525
Memory at d8000000 (32-bit, prefetchable)
  </screen>
  </para></listitem>
<listitem><para>
  de los mensajes del controlador del kernel mga_vid kernel (use <command>dmesg</command>):
  <screen>mga_mem_base = d8000000</screen>
  </para></listitem>
</orderedlist>
</para>

<para>
Después encuentre el tamaño de la memoria. Esto es muy fácil, convierta el
tamaño de la memoria RAM de video a hexadecimal, o use esta tabla:
<informaltable frame="none">
<tgroup cols="2">
<tbody>
<row><entry>1 MB</entry><entry>0x100000</entry></row>
<row><entry>2 MB</entry><entry>0x200000</entry></row>
<row><entry>4 MB</entry><entry>0x400000</entry></row>
<row><entry>8 MB</entry><entry>0x800000</entry></row>
<row><entry>16 MB</entry><entry>0x1000000</entry></row>
<row><entry>32 MB</entry><entry>0x2000000</entry></row>
</tbody>
</tgroup>
</informaltable>
</para>

<para>
Ahora ya conoce la dirección base y el tamaño de la memoria, ¡vamos
a configurar los registros MTRR!
Por ejemplo, para la tarjeta Matrox de antes (<literal>base=0xd8000000</literal>)
con 32MB ram (<literal>size=0x2000000</literal>) ejecute:
<screen>
echo "base=0xd8000000 size=0x2000000 type=write-combining" &gt;| /proc/mtrr
</screen>
</para>

<para>
No todas las CPUs soportan MTRRs. Por ejemplo K6-2's antiguos (alrededor
de 266MHz, stepping 0) no soportan MTRR, pero stepping 12's lo
soportan (<command>cat /proc/cpuinfo</command> para comprobarlo).
</para>
</sect3>

<sect3 id="output-trad">
<title>Salidas de video para tarjetas de video tradicionales</title>
<sect4 id="xv">
<title>Xv</title>

<para>
Bajo XFree86 4.0.2 o posterior, puede usar las rutinas de hardware YUV de su
tarjeta gráfica usando la extensión XVideo. Esto es lo que usa la opción
<option>-vo xv</option>. Además, este controlador soporta ajustes de
brillo/contraste/saturación/etc (a menos que use el antiguo, lento codec
DirectShow DivX, que tiene soporte siempre), vea la página de manual.
</para>

<para>
Para que esto funcione, asegúrese de comprobar lo siguiente:

<orderedlist>
<listitem><para>
  Tiene que usar XFree86 4.0.2 o posterior (otras versiones no tienen XVideo)
  </para></listitem>
<listitem><para>
  Su tarjeta actualmente soporta aceleración hardware (las modernas lo hacen)
  </para></listitem>
<listitem><para>
  X carga la extensión XVideo, esto es algo como:
  <programlisting>(II) Loading extension XVideo</programlisting>
  en <filename>/var/log/XFree86.0.log</filename>
  <note><para>
   Esto carga solo la extensión de XFree86. En una instalación buena, siempre
   es cargado, y no importa si el soporte XVideo para la
   <emphasis role="bold">tarjeta</emphasis> ha sido cargado!
  </para></note>
  </para></listitem>
<listitem><para>
  Su tarjeta tiene soporte Xv bajo Linux. Para comprobarlo, pruebe
  <command>xvinfo</command>, es parte de la distribucióno XFree86. Debe mostrar
  un texto largo, similar a éste:
  <screen>
X-Video Extension version 2.2
screen #0
  Adaptor #0: "Savage Streams Engine"
    number of ports: 1
    port base: 43
    operations supported: PutImage
    supported visuals:
      depth 16, visualID 0x22
      depth 16, visualID 0x23
    number of attributes: 5
(...)
    Number of image formats: 7
      id: 0x32595559 (YUY2)
        guid: 59555932-0000-0010-8000-00aa00389b71
        bits per pixel: 16
        number of planes: 1
        type: YUV (packed)
      id: 0x32315659 (YV12)
        guid: 59563132-0000-0010-8000-00aa00389b71
        bits per pixel: 12
        number of planes: 3
        type: YUV (planar)
(...etc...)<!--
--></screen>
  Debe soportar formatos de pixel YUY2 packed, y YV12 planar para ser
  usables con <application>MPlayer</application>.
  </para></listitem>
<listitem><para>
  Y finalmente, compruebe si <application>MPlayer</application> fue
  compilado con soporte 'xv'. <filename>./configure</filename> muestra
  esto.
  </para></listitem>
</orderedlist>
</para>

<sect5 id="tdfx">
<title>Tarjetas 3dfx</title>

<para>
Controladores antiguos 3dfx se sabe que tienen problemas con la aceleración
XVideo, no soportan ni YUY2 ni YV12, ni nada. Verifique que tiene XFree86
versión 4.2.0 o posterior, este funciona bien con YV12 y YUY2. Versiones
previas, incluyendo 4.1.0, <emphasis role="bold">falla con YV12</emphasis>.
Si experiencia efectos extraños usando <option>-vo xv</option>, pruebe SDL
(tiene XVideo también) y vea si eso puede ayudarle. Compruebe la
<link linkend="sdl">sección SDL</link> para más detalles.
</para>

<para>
¡<emphasis role="bold">O</emphasis>, pruebe el NUEVO controlador
<option>-vo tdfxfb</option>! Vea la sección <link linkend="tdfxfb">tdfxfb</link>.
</para>
</sect5>


<sect5 id="s3">
<title>Tarjetas S3</title>

<para>
Las S3 Savage3D deben funcionar bien, pero para Savage4, use XFree86 version 4.0.3
o posterior (en caso de problemas con la imagen, pruebe 16bpp). Como para
S3 Virge: hay soporte xv, pero la tarjeta es lenta por sí misma, será mejor que
la venda.
</para>

<note>
<para>
Actualmente no está claro qué modelos de Savage carecen de soporte YV12, y
convierten por controlador (lento). Si sospecha de su tarjeta, obtenga un
controlador nuevo, o pregunte de forma correcta en la lista de correo
mplayer-users por un controlador con soporte para MMX/3DNow.
</para>
</note>
</sect5>


<sect5 id="nvidia">
<title>Tarjetas nVidia</title>

<para>
nVidia no son una buena elección bajo Linux (de acuerdo con nVidia esto
<link linkend="nvidia-opinions">no es verdad</link>)... Tiene que usar un
controlador de código-cerrado de nVidia, disponible en el sitio web de
nVidia. El controlador estándar de XFree86 no tiene soporte de XVideo para
estas tarjetas, debido a las especificaciones/código cerrados de nVidia.
</para>

<para>
Hasta donde tengo entendido el último controlador de XFree86 contiene soporte
XVideo para GeForce 2 y 3.
</para>

<para>
Las tarjetas Riva128 no tienen soporte XVideo incluso ni con el controlador
de nVidia :( Quejas a nVidia.
</para>
</sect5>


<sect5 id="ati">
<title>Tarjetas ATI</title>

<para>
El <ulink url="http://www.linuxvideo.org/gatos">controlador GATOS</ulink>
(que es el que debería de usar, a menos que tenga una Rage128 o Radeon) tiene
VSYNC activado por defecto. Esto significa que tiene velocidad de decodificación (!)
sincronizado con la tasa de refresco del monitor. Si la reproducción es lenta, pruebe
a desactivar VSYNC, o establezca una tasa de refresco a n*(fps de la película) Hz.
</para>

<para>
Radeon VE - si necesita X, use XFree86 4.2.0 o posterior para esta tarjeta.
No tiene soporte de salida de TV. Por supuesto con <application>MPlayer</application>
puede felizmente obtener gráficos <emphasis role="bold">acelerados</emphasis>, con o
sin <emphasis role="bold">salida TV</emphasis>, y no se necesitan bibliotecas o X.
Lea la sección <link linkend="vidix">VIDIX</link>.
</para>
</sect5>


<sect5 id="neomagic">
<title>Tarjetas NeoMagic</title>

<para>
Estas tarjetas se pueden encontrar en algunos portátiles. Debe usar XFree86 4.3.0 o
posterior, o incluso los controladores de Stefan Seyfried
<ulink url="http://www.mplayerhq.hu/MPlayer/contrib/NeoMagic-driver/">Xv-capable</ulink>.
Elija el que corresponda a su versión de XFree86.
</para>

<para>
XFree86 4.3.0 incluye soporte  Xv, a pesar de eso Bohdan Horst envió un pequeño
<ulink url="http://www.mplayerhq.hu/MPlayer/contrib/NeoMagic-driver/neo_driver.patch">parche</ulink>
contra los fuentes de XFree86 que aceleran las operaciones de framebuffer (y XVideo por tanto)
hasta cuatro veces. El parche ha sido incluido en XFree86 CVS y deberá estar en la
siguiente liberación después de la 4.3.0.
</para>

<para>
Para permitir reproducción de contenido de tamaño de DVD cambie su XF86Config como este:
<programlisting>
Section "Device"
    [...]
    Driver "neomagic"
    <emphasis>Option "OverlayMem" "829440"</emphasis>
    [...]
EndSection<!--
--></programlisting>
</para>
</sect5>


<sect5 id="trident">
<title>Tarjetas Trident</title>
<para>
Si quiere usar xv con una tarjeta trident, sepa que no funciona con
4.1.0, instale XFree 4.2.0. 4.2.0 añade soporte para xv en pantalla completa
con la tarjeta Cyberblade XP.
</para>
</sect5>


<sect5 id="kyro">
<title>Tarjetas Kyro/PowerVR</title>
<para>
Si quiere usar Xv con una tarjeta basada en Kyro (por ejemplo Hercules
Prophet 4000XT), debe descargar los controladores desde
<ulink url="http://www.powervr.com/">el sitio de PowerVR</ulink>
</para>
</sect5>
</sect4>

<!-- ********** -->

<sect4 id="dga">
<title>DGA</title>

<formalpara>
<title>PREÁMBULO</title>
<para>
Este documento intenta explicar en pocas palabras que es DGA en general
y que puede hacer el controlador de video DGA de <application>MPlayer</application>
(y qué no puede hacer).
</para>
</formalpara>

<formalpara>
<title>QUÉ ES DGA</title>
<para>
<acronym>DGA</acronym> es una abreviatura para <emphasis>Direct Graphics
Access</emphasis> y eso significa que es un programa que pasa por alto
el servidor X y modifica directamente la memoria de framebuffer. Técnicamente
hablando esto se hace mapeando la memoria del framebuffer en el rango de
memoria de su proceso. Esto es permitido por el kernel solo si tiene privilegios
de superusuario. Puede obtenerlos identificandose como
<systemitem class="username">root</systemitem> o estableciendo el bit SUID en
el ejecutable de <application>MPlayer</application> (<emphasis role="bold">no
recomendado</emphasis>).
</para>
</formalpara>
<para>
Hay dos versiones de DGA: DGA1 es usado por XFree 3.x.x y DGA2 fue
introducido con Xfree 4.0.1.
</para>

<para>
DGA1 provee solo acceso directo al framebuffer como se describe más arriba.
Para cambiar la resolución de la señal de video debe apoyarse en la extensión
XVidMode.
</para>

<para>
DGA2 incorpora las características de la extensión XVidMode y también
permite cambiar la profundidad de color de la pantalla. Con eso puede,
básicamente ejecutar un servidor X con profundidad de color de 32 bit,
cambiando a una profundidad de 15 bits y viceversa.
</para>

<para>
Sin embargo DGA tiene algunos problemas. Parece ser muy dependiente del
chip gráfico que usa en la implementación del controlador de video en
el servidor X que controla a este chip. Por eso no funciona en todos los
sistemas...
</para>

<formalpara>
<title>INSTALANDO SOPORTE DGA PARA MPLAYER</title>

<para>Primero asegura que X carga la extensión DGA, mira en
<filename>/var/log/XFree86.0.log</filename>:

<programlisting>(II) Loading extension XFree86-DGA</programlisting>

Vea, XFree86 4.0.x o posterior es ¡ALTAMENTE RECOMENDADO!
El controlador DGA de <application>MPlayer</application> es autodetectado
por <filename>./configure</filename>, o puede forzarlo con <option>--enable-dga</option>.
</para>
</formalpara>

<para>
Si el controlador no puede cambiar a una resolución menor, experimente
con opciones <option>-vm</option> (solo con X 3.3.x), <option>-fs</option>,
<option>-bpp</option>, <option>-zoom</option> para encontrar un modo de
video donde quepa la película. No hay un conversor bueno por ahora :(
</para>

<para>
Hágase <systemitem class="username">root</systemitem>. DGA necesita acceso
root para permitir escribir directamente en la memoria de video. Si quiere
ejecutarlo como usuario, entonces instale <application>MPlayer</application>
SUID root:

<screen>
chown root /usr/local/bin/mplayer
chmod 750 /usr/local/bin/mplayer
chmod +s /usr/local/bin/mplayer
</screen>

Ahora funciona como usuario simple, también.
</para>

<caution>
<title>Riesgos de seguridad</title>
<para>
¡Esto es un <emphasis role="bold">gran</emphasis> riesgo de seguridad!
<emphasis role="bold">Nunca</emphasis> haga esto en un servidor o en un ordenador
que pueda ser accedido por otra gente porque pueden ganar privilegios de root
a través del <application>MPlayer</application> SUID root.
</para>
</caution>

<para>
Ahora use la opción <option>-vo dga</option>, y ya debe ir! (espero :) También
debe probar si la opción <option>-vo sdl:dga</option> funciona para usted!
¡Esto es mucho más rápido!
</para>


<formalpara id="dga-modelines">
<title>CAMBIOS DE RESOLUCIÓN</title>

<para>
El controlador DGA le permite cambiar la resolución de la señal de salida.
Esto evita tener que hacer escalado por software (lento) y al mismo tiempo
provee imagen a pantalla completa. Idealmente debe cambiarse a la resolución
exacta (excepto para respetar relación de aspecto) de los datos de video, pero
el servidor X solo permite cambiar resoluciones predefinidas en
<filename>/etc/X11/XF86Config</filename>
<filename>/etc/X11/XF86Config</filename>
(<filename>/etc/X11/XF86Config-4</filename> para XFree 4.X.X respectivamente).
Estas son definidas por las llamadas modelines y dependen de las capacidades
de su hardware de video. El servidor X escanea este archivo de configuración
durante el inicio y desactiva los modelines que no sirvan para su hardware.
Puede encontrar que modos sobreviven en el archivo de historial de X11. Puede
encontrarse en: <filename>/var/log/XFree86.0.log</filename>.
</para>
</formalpara>

<para>
Se sabe que estas entradas funcionan bien con un chip Riva128, usando el
modulo de controlador nv.o del servidor X.
</para>


<para><programlisting>
Section "Modes"
  Identifier "Modes[0]"
  Modeline "800x600"  40     800 840 968 1056  600 601 605 628
  Modeline "712x600"  35.0   712 740 850 900   400 410 412 425
  Modeline "640x480"  25.175 640 664 760 800   480 491 493 525
  Modeline "400x300"  20     400 416 480 528   300 301 303 314 Doublescan
  Modeline "352x288"  25.10  352 368 416 432   288 296 290 310
  Modeline "352x240"  15.750 352 368 416 432   240 244 246 262 Doublescan
  Modeline "320x240"  12.588 320 336 384 400   240 245 246 262 Doublescan
EndSection
</programlisting></para>


<formalpara>
<title>DGA &amp; MPLAYER</title>
<para>
DGA es usado en dos lugares con <application>MPlayer</application>: El
controlador SDL puede prepararse para que lo use (<option>-vo sdl:dga</option>)
y el controlador DGA (<option>-vo dga</option>. Lo mencionado más arriba es
correcto para ambos; en las siguientes secciones explicaré cómo funciona
el controlador DGA para <application>MPlayer</application>.
</para>
</formalpara>


<formalpara>
<title>CARACTERISTICAS</title>

<para>
El controlador DGA es invocado especificando <option>-vo dga</option> en la
línea de órdenes. El comportamiento por defecto es cambiar a una resolución
que coincida con la resolución original del video o tan cercana como sea
posible. De forma deliberada ignora las opciones <option>-vm</option> y
<option>-fs</option> (activando el cambio de modo de video y pantalla
completa) - siempre intenta cubrir tanta área de su pantalla como sea
posible cambiando el modo de video, lo que lo hace usar un ciclo adicional
de su CPU para escalar la imagen. Si no le gusta este modo que elije puede
forzar que se elija el modo que se ajuste más a la resolución especificada
por <option>-x</option> y <option>-y</option>. Proporcionando la opción
<option>-v</option>, el controlador DGA imprimirá, junto con otro montón
de cosas, una lista de todas las resoluciones soportadas por su archivo
<filename>XF86Config</filename> actual. Teniendo DGA2 también puede forzar
que se use cierta profundidad de color usando la opción <option>-bpp</option>.
Profundidades de color válidas son 15, 16, 24 y 32. Depende de su hardware
que estén soportadas de manera nativa o que se hagan mediante una conversión
por software (posiblemente lento).
</para>
</formalpara>
<para>
Si tiene la suerte suficiente para tener memoria fuera de pantalla restante
donde colocar una imagen entera, el controlador DGA usará doblebuffering,
lo que puede resultar en una reproducción de la película mucho más suave.
Le informará de cuándo está activado o no el doble-buffer.
</para>

<para>
Doblebuffering significa que el siguiente marco de su video está siendo
dibujado en alguna zona de memoria fuera de la pantalla mientras se muestra
el marco actual. Cuando el siguiente marco está listo, el chip de gráficos
solo dice la posición en memoria donde se encuentra y muestra los datos
que hay allí. Mientras tanto el otro buffer en memoria es rellenado de nuevo
con nuevos datos de video.
</para>

<para>
Doblebuffering puede ser activado usando la opción <option>-double</option>
y desactivado con <option>-nodouble</option>. Actualmente la opción por
defecto es doblebuffering desactivado. Cuando use el controlador DGA,
la información en pantalla (OSD) solo funciona si está el doblebuffering activado.
Sin embargo, activar doblebufferint puede resultar en una falta grande
de velocidad (en mi K6-II+ 525 usa un 20% adicional de tiempo de CPU!) dependiendo
de la implementación de DGA para su hardware.
</para>


<formalpara>
<title>ASUNTOS SOBRE VELOCIDAD</title>

<para>
Generalmente hablando, el acceso DGA al framebuffer debe ser al menos tan
rápido como usar el controlador X11 con el beneficio adicional de obtener
una imagen a pantalla completa. Los porcentajes de velocidad son impresos por
<application>MPlayer</application> y se tienen que interpretar con cuidado,
por ejemplo, con el controlador X11 no se incluye el tiempo usado por
el servidor X necesario para realizar el dibujo en pantalla. Conecte un
terminal serie a su equipo e inicie <command>top</command> para ver qué
es realmente lo que está ocurriendo en su equipo.
</para>
</formalpara>

<para>
Generalmente hablando, el aumento de velocidad por usar DGA frente al uso
'normal' usando X11 depende en gran medida de su tarjeta gráfica y de cómo
de optimizado esté el módulo del servidor X.
</para>

<para>
Si tiene un sistema lento, mejor use 15 o 16 bit de profundidad de color porque
requieren solo la mitad de ancho de banda de memoria que una pantalla de 32 bit.
</para>

<para>
Usar una profundidad de color de 24 bit sigue siendo incluso buena idea aunque
su tarjeta soporte 32 bit de forma nativa porque transfiere 25% menos datos que
el modo 32/32.
</para>

<para>
He visto algunos archivos AVI reproducidos en un Pentium MMX 266. Las CPUs
AMD K6-2 deben funcionar a 400 MHz o superior.
</para>


<formalpara>
<title>FALLOS CONOCIDOS</title>

<para>
Bien, de acuerdo con algunos desarrolladores de XFree, DGA es bastante
bestia. Ellos aconsejan que es mejor no usarlo. Su implementación no
funciona bien con todos los controladores de chipsets para XFree existentes.
</para>
</formalpara>

<itemizedlist>
<listitem><simpara>
  Con XFree 4.0.3 y <filename>nv.o</filename> hay un fallo que resulta en
  extraños colores.
  </simpara></listitem>
<listitem><simpara>
  El controlador ATI requiere cambiar el modo original más de una vez una
  vez finaliza el uso de DGA.
  </simpara></listitem>
<listitem><simpara>
  Algunos controladores símplemente fallan al volver a la resolución
  normal (use
  <keycap>Ctrl</keycap>+<keycap>Alt</keycap>+<keycap>Keypad +</keycap> y 
  <keycap>Ctrl</keycap>+<keycap>Alt</keycap>+<keycap>Keypad -</keycap>
  para volver al modo normal de manera manual).
  </simpara></listitem>
<listitem><simpara>
  Algunos controladores símplemente muestran colores extraños.
  </simpara></listitem>
<listitem><simpara>
  Algunos controladores se quejan de la cantidad de memoria que intenta
  mapear el espacio de direcciones del proceso, incluso cuando vo_dga no
  quiere usar doblebuffering (¿SIS?).
  </simpara></listitem>
<listitem><simpara>
  Algunos controladores parecen fallar informando de un único modo
  válido. En este caso el controlador DGA falla diciendole que no tiene
  sentido el modo 100000x100000 o algo así.
  </simpara></listitem>
<listitem><simpara>
  OSD solo funciona con doblebuffering activado (si no parpadea).
  </simpara></listitem>
</itemizedlist>

</sect4>
<!--</sect3>-->

<!-- ********** -->

<sect4 id="sdl">
<title>SDL</title>

<para>
<acronym>SDL</acronym> (Simple Directmedia Layer) es básicamente una
interfaz unificada de video/audio. Los programas que la usan solo tienen
que preocuparse de SDL, y no del controlador de video o audio que SDL esté
usando. Por ejemplo una versión de Doom que use SDL puede usarse en
svgalib, aalib, X, fbdev, y otros, solo tiene que especificar el (por
ejemplo) controlador de video a usar con la variable de entorno
<envar>SDL_VIDEODRIVER</envar>. Bueno, teóricamente.
</para>

<para>
Con <application>MPlayer</application>, se usa la característica del escalador
software del controlador X11 para tarjetas/controladores que no soportan
XVideo, hasta que hagamos nuestro propio (más rápido, más bonito) escalador
por software. También usamos su salida aalib, pero ahora tenemos el nuestro propio
que es más confortable. Su modo DGA fue mejor que el nuestro, hasta hace poco.
¿Lo quiere probar ahora? :)
</para>

<para>
También ayuda con algunos controladores/tarjetas con fallos si el video va
a saltos (sin ser un problema de sistema lento), o el audio va con retardo.
</para>

<para>
La salida de video SDL permite mostrar los subtítulos debajo de la película,
en la (si está presente) banda negra.
</para>

<variablelist>
<title>Hay varias opciones en la línea de órdenes para SDL:</title>
<varlistentry>
  <term><option>-vo sdl:<replaceable>nombre</replaceable></option></term>
  <listitem><simpara>
    especifica el controlador de SDL de video a usar (i.e. <literal>aalib</literal>,
    <literal>dga</literal>, <literal>x11</literal>)
  </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-ao sdl:<replaceable>nombre</replaceable></option></term>
  <listitem><simpara>
    especifica el controlador de SDL de audio a usar (i.e. <literal>dsp</literal>,
    <literal>esd</literal>, <literal>arts</literal>)
  </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-noxv</option></term>
  <listitem><simpara>
    desactiva la aceleración hardware XVideo
  </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-forcexv</option></term>
  <listitem><simpara>
    intenta forzar la aceleración XVideo
  </simpara></listitem>
</varlistentry>
</variablelist>

<table>
<title>Teclas solo para SDL</title>
<tgroup cols="2">
<thead>
<row><entry>Tecla</entry><entry>Acción</entry></row>
</thead>
<tbody>
<row><entry><keycap>c</keycap></entry><entry>
    cambia entre los modos de pantalla completa disponibles
    </entry></row>
<row><entry><keycap>n</keycap></entry><entry>
    regresa al modo normal
    </entry></row>
</tbody>
</tgroup>
</table>

<itemizedlist>
<title>Fallos conocidos:</title>
<listitem><simpara>
  Al pulsar teclas bajo una consola sdl:aalib el controlador la repite
  indefinidamente. (¡Mejor use la opción <option>-vo aa</option>!) Es un
  fallo de SDL, yo no puedo cambiarlo (probado con SDL 1.2.1).
  </simpara></listitem>
<listitem><simpara>
  ¡NO USE SDL con GUI! El comportamiento no será el esperado.
  </simpara></listitem>
</itemizedlist>
</sect4>


<sect4 id="svgalib">
<title>SVGAlib</title>

<formalpara>
<title>INSTALACIÓN</title>
<para>
Debe instalar svgalib y su paquete de desarrollo para construir
<application>MPlayer</application> con el controlador SVGAlib (es autodetectado,
aunque también puede forzarse), y no se olvide de editar
<filename>/etc/vga/libvga.config</filename> para configurar su tarjeta y su
monitor.
</para>
</formalpara>

<note>
<para>
Asegúrese de no usar la opción <option>-fs</option>, porque cambia el estado
del uso del escalador software, y es lento. Si realmente lo necesita, use
la opción <option>-sws 4</option> lo que le producirá peor calidad, pero
es algo más rápido.
</para>
</note>

<formalpara><title>SOPORTE EGA (4BPP)</title>
<para>
SVGAlib incorpora EGAlib, y <application>MPlayer</application> tiene la
posibilidad de mostrar cualquier película en 16 colores, de manera que se
puede usar con las siguientes configuraciones de equipos:
</para>
</formalpara>

<itemizedlist>
<listitem><simpara>
  Tarjeta EGA con monitor EGA: 320x200x4bpp, 640x200x4bpp, 640x350x4bpp
  </simpara></listitem>
<listitem><simpara>
  Tarjeta EGA con monitor CGA: 320x200x4bpp, 640x200x4bpp
  </simpara></listitem>
</itemizedlist>

<para>
El valor bpp (bits por pixel) debe establecerse a 4 manualmente:
<option>-bpp 4</option>
</para>

<para>
La película probablemente deberá ser escalada para ajustarse al modo EGA:
<screen>-vf scale=640:350</screen>
o
<screen>-vf scale=320:200</screen>
</para>

<para>
Para eso se necesita una rutina de escalado de mala calidad pero rápida:
<screen>-sws 4</screen>
</para>

<para>
Quizá la corrección automática de relación de aspecto deberá desactivarse:
<screen>-noaspect</screen>
</para>

<note><para>
De acuerdo con mi experiencia la mejor calidad de imagen
en pantallas EGA puede obtenerse decrementando el brillo un poco:
<option>-vf eq=-20:0</option>. También necesité bajar la tasa de
muestreo en mi equipo, porque el sonido no funcionaba a 44kHz:
<option>-srate 22050</option>.
</para></note>

<para>
Puede activar OSD y subtítulos solo con el filtro <systemitem>expand</systemitem>,
vea la página de manual para los parámetros concretos.
</para>
</sect4>


<sect4 id="fbdev">
<title>Salida en framebuffer (FBdev)</title>

<para>
Si se construye o no el objetivo FBdev es autodetectado durante el
<filename>./configure</filename>. Lea la documentación del framebuffer en
los fuentes del núcleo (<filename>Documentation/fb/*</filename>) para más
información.
</para>

<para>
Si su tarjeta no soporta el estándar VBE 2.0 (tarjetas ISA/PCI antiguas, tales
como S3 Trio64), solo VBE 1.2 (¿o anterior?): Bueno, VESAfb sigue funcionando,
pero necesitará cargar SciTech Display Doctor (formalmente UniVBE) antes de
iniciar Linux. Use un disco de inicio DOS o similar. Y no olvide registrar
UniVBE ;))
</para>

<para>
La salida FBdev toma parámetros adicionales sobre los otros:
</para>

<variablelist>
<varlistentry>
  <term><option>-fb</option></term>
  <listitem><simpara>
    especifica el dispositivo framebuffer a usar (<filename>/dev/fb0</filename>)
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-fbmode</option></term>
  <listitem><simpara>
    nombre del modo a usar (de acuerdo con <filename>/etc/fb.modes</filename>)
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-fbmodeconfig</option></term>
  <listitem><simpara>
    archivo de configuración de modos (por defecto <filename>/etc/fb.modes</filename>)
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-monitor_hfreq</option></term>
  <term><option>-monitor_vfreq</option></term>
  <term><option>-monitor_dotclock</option></term>
  <listitem><simpara>
    valores importantes <emphasis role="bold">important</emphasis>, vea
    <filename>example.conf</filename>
    </simpara></listitem>
</varlistentry>
</variablelist>

<para>
Si desea cambiar a un modo específico, use
<screen>mplayer -vm -fbmode <replaceable>nombre_del_modo</replaceable> <replaceable>nombrearchivo</replaceable></screen>
</para>

<itemizedlist>
<listitem><para>
  <option>-vm</option> sin más opciones elije el mejor modo desde
  <filename>/etc/fb.modes</filename>. Puede usarse junto con
  las opciones <option>-x</option> y <option>-y</option> también. La opción
  <option>-flip</option> está soportada solo si el formato de pixel de la
  película coincide con el formato de pixel del modo de video. Preste atención
  al valor bpp, el controlador fbdev intentará usar el actual, o si especifica
  uno con la opción <option>-bpp</option>, pues ese.
  </para></listitem>
<listitem><para>
  La opción <option>-zoom</option> no está soportada (use <option>-vf scale</option>).
  No puede usar modos de 8bpp (o menos).
  </para></listitem>
<listitem><para>
  Posiblemente quiera desactivar el cursor:
  <screen>echo -e '\033[?25l'</screen>
  o
  <screen>setterm -cursor off</screen>
  y el protector de pantalla:
  <screen>setterm -blank 0</screen>
  Para volver a activar el cursor:
  <screen>echo -e '\033[?25h'</screen>
  o
  <screen>setterm -cursor on</screen>
  </para></listitem>
</itemizedlist>

<note>
<para>
Los cambios de modo de video para FBdev <emphasis>no funcionan</emphasis> con
el framebuffer VESA, y no nos pida que funcione, porque no es una limitación
de <application>MPlayer</application>.
</para>
</note>
</sect4>


<sect4 id="mga_vid">
<title>Framebuffer de Matrox (mga_vid)</title>

<para>
Esta sección se encarga de describir el soporte de Matrox
G200/G400/G450/G550 BES (Back-End Scaler), el controlador del núcleo mga_vid.
Está en activo desarrollo poro A'rpi, y tiene soporte de VSYNC por hardware
con triple buffering. Funciona tanto en consola con frambuffer como bajo X.
</para>

<warning>
<para>
¡Esto es solo en Linux! En sistemas no-Linux (probado en FreeBSD), puede
usar en su lugar <link linkend="vidix">VIDIX</link>!
</para>
</warning>

<procedure>
<title>Instalación:</title>
<step><para>
  Para usarlo, primero tendrá que compilar <filename>mga_vid.o</filename>:
  <screen>
cd drivers
make<!--
--></screen>
  </para></step>
<step><para>
  Cree ahora el dispositivo <filename>/dev/mga_vid</filename>:
  <screen>mknod /dev/mga_vid c 178 0</screen>
  y cargue el controlador con
  <screen>insmod mga_vid.o</screen>
  </para></step>
<step><para>
  Deberá verificar la autodetección del tamaño de memoria
  usando la órden <command>dmesg</command>. Si es incorrecta,
  use la opción <option>mga_ram_size</option> (antes haga
  <command>rmmod mga_vid</command>), especifique el tamaño
  de la memoria de la tarjeta gráfica en MB:
  <screen>insmod mga_vid.o mga_ram_size=16</screen>
  </para></step>
<step><para>
  Para que se cargue/descargue automáticamente cuando sea necesario,
  primero inserte la siguiente línea al final de
  <filename>/etc/modules.conf</filename>:
  
  <programlisting>alias char-major-178 mga_vid</programlisting>

  Después copie el módulo <filename>mga_vid.o</filename> al lugar
  apropiado bajo <filename>/lib/modules<replaceable>versión de
  kernel</replaceable>/<replaceable>dondesea</replaceable></filename>.
  </para><para>
  Y después ejecute
  <screen>depmod -a</screen>
  </para></step>
<step><para>
  Ahora deberá (re)compilar <application>MPlayer</application>,
  <filename>./configure</filename> detectará 
  <filename>/dev/mga_vid</filename> y construirá el controlador 'mga'.
  Luego lo podrá usar con <application>MPlayer</application> mediante
  <option>-vo mga</option> si tiene una consola matroxfb, o
  <option>-vo xmga</option> bajo XFree86 3.x.x ó 4.x.x.
  </para></step>
</procedure>

<para>
El controlador mga_vid coopera con Xv.
</para>

<para>
El archivo de dispositivo <filename>/dev/mga_vid</filename> puede ser leído
para obtener informaión, por ejemplo mediante <screen>cat /dev/mga_vid</screen>
y puede se escrito para realizar cambios en el brillo:
<screen>echo "brightness=120" &gt; /dev/mga_vid</screen>
</para>
</sect4>


<sect4 id="tdfxfb" xreflabel="3Dfx YUV support (tdfxfb)">
<title>Soporte 3Dfx YUV</title>
<para>
Este controlador usa el controlador framebuffer del kernel tdfx para
reproducir las películas con aceleración YUV. Necesita un kernel con
soporte tdfxfb, y recompilar con
<screen>./configure --enable-tdfxfb</screen>
</para>
</sect4>


<sect4 id="opengl">
<title>Salida OpenGL</title>

<para>
<application>MPlayer</application> permite mostrar películas usando OpenGL,
pero si su plataforma/controlador soporta xv como es el caso en un PC con
Linux, usa xv en su lugar, el rendimiento en OpenGL es considerablemente
peor. Si tiene una implementación de X11 sin soporte para xv, OpenGL es una
alternativa viable.
</para>

<para>
Desafortunadamente no todos los controladores soportan esta característica.
Los controladores Utah-GLX (para XFree86 3.3.6) lo soportan para todas las
tarjetas.
Vea <ulink url="http://utah-glx.sourceforge.net"/> para detalles sobre su
instalación.
</para>

<para>
XFree86(DRI) 4.0.3 o posterior soportan OpenGL con tarjetas Matrox y Radeon,
4.2.0 o posterior soportan Rage128.
Vea <ulink url="http://dri.sourceforge.net"/> para instrucciones de descarga
e instalación.
</para>

<para>
Un consejo de uno de nuestros usuarios: la salida de video GL puede usarse
para obtener salida de TV con sincronización vertical. Puede establecer
una variable de entorno (por lo menos con nVidia):
</para>

<para>
<command>export $__GL_SYNC_TO_VBLANK=1</command>
</para>

</sect4>


<sect4 id="aalib">
<title>AAlib - reproduciendo en modo texto</title>

<para>
AAlib es una biblioteca para mostrar gráficos en modo texto, usando un
render ASCII potente. Hay <emphasis>montones</emphasis> de programas que
tienen soporte para AAlib, como Doom, Quake, etc. 
<application>MPlayer</application> contiene un controlador que funciona
bastante bien para ello. Si <filename>./configure</filename> detecta
que aalib está instalado, el controlador aalib libvo será compilado.
</para>

<para>
Puede usar algunas teclas en la ventana AA para cambiar las opciones
de renderizado:
</para>

<informaltable>
<tgroup cols="2">
<thead>
  <row><entry>Tecla</entry><entry>Acción</entry></row>
</thead>
<tbody>
<row><entry><keycap>1</keycap></entry><entry>
  reducir contraste
  </entry></row>
<row><entry><keycap>2</keycap></entry><entry>
  aumentar contraste
  </entry></row>
<row><entry><keycap>3</keycap></entry><entry>
  reducir brillo 
  </entry></row>
<row><entry><keycap>4</keycap></entry><entry>
  aumentar brillo
  </entry></row>
<row><entry><keycap>5</keycap></entry><entry>
  cambiar renderizado rápido activado/desactivado
  </entry></row>
<row><entry><keycap>6</keycap></entry><entry>
  establece el modo de difuminado (ninguno, distribución de error,
  Floyd Steinberg)
  </entry></row>
<row><entry><keycap>7</keycap></entry><entry>
  invierte la imagen
  </entry></row>
<row><entry><keycap>8</keycap></entry><entry>
  cambia entre control de aa y <application>MPlayer</application>
  </entry></row>
</tbody>
</tgroup>
</informaltable>

<variablelist>
<title>Pueden usarse las siguientes opciones en la línea de órdenes:</title>
<varlistentry>
  <term><option>-aaosdcolor=<replaceable>V</replaceable></option></term>
  <listitem><para>
    cambia el color OSD 
    </para></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aasubcolor=<replaceable>V</replaceable></option></term>
  <listitem><para>
    cambia el color de los subtítulos
    </para><para>
    donde <replaceable>V</replaceable> puede ser:
    <literal>0</literal> (normal),
    <literal>1</literal> (oscuro),
    <literal>2</literal> (negrita),
    <literal>3</literal> (tipografía negrita),
    <literal>4</literal> (invertido),
    <literal>5</literal> (especial).
    </para></listitem>
</varlistentry>
</variablelist>

<variablelist>
<title>AAlib provee por sí mismo una gran cantidad de opciones. Aquí están
algunas de las más importantes:</title>
<varlistentry>
  <term><option>-aadriver</option></term>
  <listitem><simpara>
    establecer el controlador aa recomendado (X11, curses, Linux)
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aaextended</option></term>
  <listitem><simpara>
    usar los 256 caracteres
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aaeight</option></term>
  <listitem><simpara>
    usar ASCII de ocho bit
    </simpara></listitem>
</varlistentry>
<varlistentry>
  <term><option>-aahelp</option></term>
  <listitem><simpara>
    muestra todas las opciones de aalib
    </simpara></listitem>
</varlistentry>
</variablelist>

<note>
<para>
El renderizado hace un uso intensivo de la CPU, especialmente usando
AA-en-X (usando aalib bajo X), y hace un uso menos intenso de CPU en
una consola estándar, sin framebuffer. Use SVGATextMode para establecer
un modo texto grande, ¡y disfrútelo! (en las tarjetas Hercules con
pantalla secundaria queda muy bien :)) (pero en mi humilde opinión
puede usar la opción <option>-vf 1bpp</option> para obtener gráficos
en hgafb :)
</para>
</note>

<para>
Use la opción <option>-framedrop</option> si su ordenador no es lo
suficientemente rápido para renderizar todos los marcos!
</para>

<para>
Al reproducir en un terminal puede obtener mejor velocidad y calidad
usando el controlador Linux, en lugar del curses (<option>-aadriver linux</option>).
Pero lo malo es que necesita permisos de escritura en
<filename>/dev/vcsa<replaceable>&lt;terminal&gt;</replaceable></filename>!
Esto no es automáticamente detectado por aalib, pero vo_aa intenta encontrar
el mejor modo.
Vea <ulink url="http://aa-project.sourceforge.net/tune"/> para más detalles
y ajustes.
</para>
</sect4>


<sect4 id="vesa">
<title>VESA - salida en VESA BIOS</title>

<para>
Este controlador fue diseñado e introducido como un
<emphasis role="bold">controlador genérico</emphasis> para cualquier tarjeta
gráfica que tenga una BIOS compatible con VESA VBE 2.0. Otra ventaja
de este controlador es que intenta forzar la activación de la salida
de TV.
<citetitle>VESA BIOS EXTENSION (VBE) Version 3.0 Fecha: 16 de Septiembre,
1998</citetitle> (Página 70) dice:
</para>

<blockquote>
<formalpara><title>Diseños de controlador-dual</title>
<para>
VBE 3.0 soporta el diseño de controlador-dual asumiendo que ambos controladores
norlmanmente son proporcionados por el mismo OEM, bajo el control de una ROM
BIOS única en la misma tarjeta gráfica, es posible esconder el hecho
de que hay dos controladores presentes para la aplicación. Esto tiene la
limitación de prevenir el uso simultáneo de controladores independientes,
pero permite a las aplicaciones que se hayan desarrollado antes de la liberación
de VBE 3.0 operar normalmente. La función VBE 00h (Devuelve Información sobre
el Controlador) devuelve información combinada de ambos controladores, incluyendo
una lista combinada de los modos disponibles. Cada una de las funciones VBE
restantes operan en el controlador activo.
</para>
</formalpara>
</blockquote>

<para>
Por ello puede hacer que la salida-TV funcione usando este controlador.
(Yo creo que la salida-TV normalmente tiene una cabeza individual o
al menos una salida individual.)
</para>

<itemizedlist spacing="compact">
<title>VENTAJAS</title>
<listitem><simpara>
  Le permite ver sus películas <emphasis role="bold">incluso si Linux no
  conoce</emphasis> su hardware de video.
  </simpara></listitem>
<listitem><simpara>
  No necesita tener instalado nada relacionado con gráficos en su Linux
  (como X11 (también conocido como XFree86), fbdev ni nada por el estilo).
  Este controlador puede funcionar en <emphasis role="bold">modo-texto</emphasis>.
  </simpara></listitem>
<listitem><simpara>
  Puede hacer <emphasis role="bold">funcionar la salida-TV</emphasis>.
  (Esto es conocido al menos para las tarjetas ATI).
  </simpara></listitem>
<listitem><simpara>
  Este controlador llama al manejador <function>int 10h</function> y no
  realiza una emulación - hace llamas <emphasis role="bold">reales</emphasis>
  de BIOS <emphasis>real</emphasis> en <emphasis>modo-real</emphasis>.
  (actualmente en modo vm86).
  </simpara></listitem>
<listitem><simpara>
  Puede usar VIDIX con él, obteniendo pantalla de gráficos acelerados
  <emphasis role="bold">y</emphasis> salida TV al mismo tiempo!
  (Recomendado para tarjetas ATI.)
  </simpara></listitem>
<listitem><simpara>
  Si tiene VESA VBE 3.0+, y especifica
  <systemitem>monitor_hfreq, monitor_vfreq, monitor_dotclock</systemitem> en
  algún sitio (archivo de configuración, o línea de órdenes) podrá obtener
  la tasa de refresco mayor posible. (Usando la Fórmula de Temporización General).
  Para activar ésta característica debe especificar <emphasis role="bold">todas</emphasis>
  las opciones de su monitor.
  </simpara></listitem>
</itemizedlist>

<itemizedlist spacing="compact">
<title>DESVENTAJAS</title>
<listitem><simpara>
  Solo funciona en <emphasis role="bold">sistemas x86</emphasis>.
  </simpara></listitem>
<listitem><simpara>
  Solo puede ser usado por <systemitem class="username">root</systemitem>.
  </simpara></listitem>
<listitem><simpara>
  En la actualidad solo está disponible para  <emphasis role="bold">Linux</emphasis>.
  </simpara></listitem>
</itemizedlist>

<important>
<para>
No use este controlador con <emphasis role="bold">GCC 2.96</emphasis>!
¡No funcionará!
</para>
</important>

<variablelist>
<title>OPCIONES EN LA LÍNEA DE ÓRDENES PARA VESA</title>
<varlistentry>
  <term><option>-vo vesa:<replaceable>opts</replaceable></option></term>
  <listitem><simpara>
    reconocidas actualmente: <literal>dga</literal> para forzar el modo dga
    y <literal>nodga</literal> para desactivar el modo dga. En modo dga puede
    activar doble buffering mediante la opción <option>-double</option>. Nota:
    puede omitir estos parámetros activando
    <emphasis role="bold">autodetección</emphasis> del modo dga.
    </simpara></listitem>
</varlistentry>
</variablelist>

<itemizedlist spacing="compact">
<title>PROBLEMAS CONOCIDOS Y SUS SOLUCIONES</title>
<listitem><simpara>
  Si tiene instalada una tipografía <emphasis role="bold">NLS</emphasis> en
  su equipo Linux y ejecuta el controlador VESA en modo-texto entonces después
  de terminar <application>MPlayer</application> tendrá cargada una
  <emphasis role="bold">tipografía ROM</emphasis> en lugar de la nacional.
  Puede cargar de nuevo la tipografía nacional usando la utilidad
  <command>setsysfont</command> de la distribución Mandrake por ejemplo.
  (<emphasis role="bold">Consejo</emphasis>: La misma utilidad se usa para
  la localización de fbdev).
  </simpara></listitem>
<listitem><simpara>
  Algunos <emphasis role="bold">controladores gráficos para Linux</emphasis>
  no actualizan el <emphasis role="bold">modo BIOS</emphasis> activo en la
  memoria DOS. Si tiene ese problema - use siempre el controlador VESA solo
  en <emphasis role="bold">modo-texto</emphasis>. De otro modo
  el modo texto (#03) será activado de todas maneras y tendrá que reiniciar
  la computadora.
  </simpara></listitem>
<listitem><simpara>
  Además puede obtener una pantalla <emphasis role="bold">negra</emphasis> cuando
  el controlador VESA termine. Para volver al estado original de la pantalla -
  símplemente cambie a otra consola (pulsando <keycap>Alt</keycap>+<keycap>F&lt;x&gt;</keycap>)
  y vuelva a la consola original del mismo modo.
  </simpara></listitem>
<listitem><simpara>
  Para  hacer que <emphasis role="bold">funcione la salida-TV</emphasis> deberá
  tener conectado el conector de TV antes de iniciar el PC porque la BIOS de video
  lo inicia automáticamente durante el proceso POST.
  </simpara></listitem>
</itemizedlist>
</sect4>


<sect4 id="x11">
<title>X11</title>

<para>
Evite usarlo si es posible. La salida a X11 (usa la extensión de memoria
compartida), sin ninguna aceleración hardware. Soporta (acelerado por
MMX/3DNow/SSE, pero sigue siendo lento) escalado por software, use las
opciones <option>-fs -zoom</option>. La mayoría de las tarjetas tienen
soporte de escalado por hardware, use la salida <option>-vo xv</option>
para obtenerlo, o <option>-vo xmga</option> para las Matrox.
</para>

<para>
El problema es que la mayoría de los controladores de las tarjetas no
soportan aceleración hardware en un monitor/TV secundario. En esos casos,
puede ver una ventana de color verde/azul en lugar de la película. Aquí es
donde entra en escena este controlador, pero necesitará una CPU potente
para escalar por software. No use el escalador+salida por software de SDL,
¡obtendrá una peor calidad de imagen!
</para>

<para>
El escalado por software es muy lento, mejor pruebe a cambiar el modo de video.
Es muy simple. Vea los <link linkend="dga-modelines">la sección de modos de
DGA</link>, e insertela en su <filename>XF86Config</filename>.

<itemizedlist spacing="compact">
<listitem><simpara>
  Si tiene XFree86 4.x.x: use la opcioón <option>-vm</option>. Esto cambiará
  a una resolución donde la película se ajuste. Si no lo hace:
  </simpara></listitem>
<listitem><simpara>
  Con XFree86 3.x.x: tiene que cambiar entre las resoluciones disponibles
  con las teclas
  <keycap>Ctrl</keycap>+<keycap>Alt</keycap>+<keycap>plus</keycap>
  y 
  <keycap>Ctrl</keycap>+<keycap>Alt</keycap>+<keycap>minus</keycap>.
  </simpara></listitem>
</itemizedlist>
</para>

<para>
Si no puede encontrar los modos que ha insertado, consule la salida de
XFree86. Algunos controladores no pueden usar pixelclocks bajos que son
necesarios para modos de video de baja resolución.
</para>
</sect4>


<sect4 id="vidix">
<title>VIDIX</title>

<formalpara>
<title>PREÁMBULO</title>
<para>
<acronym>VIDIX</acronym> es la abreviatura para 
<emphasis role="bold">VID</emphasis>eo<emphasis role="bold">I</emphasis>nterface
para *ni<emphasis role="bold">X</emphasis>.
VIDIX ha sido diseñado e introducido como una interfaz para los controladores de
espacio de usuario que proveen tanto rendimiento de video como mga_vid lo hace para
las tarjetas Matrox. También es muy portable.
</para>
</formalpara>
<para>
Esta interfaz ha sido diseñada como un intento por ajustar las interfaces
de aceleración de video existentes (conocidas como mga_vid, rage128_vid, radeon_vid,
pm3_vid) en un esquema fijo. Provee una interfaz de alto nivel a los chips
que es conocida como BES (BackEnd scalers) u OV (Video Overlays). No provee
interfaz a bajo nivel de cosas conocidas por los servidores gráficos.
(No quiero competir con el equipo X11 en el cambio de modos de gráfidcos).
Es decir, el principal objetivo de esta interfaz es maximizar la velocidad
de la reproducción de video.
</para>

<itemizedlist spacing="compact">
<title>USO</title>
<listitem><simpara>
  Puede usar un controlador de salida de video individual:
  <option>-vo xvidix</option>. Este controlador ha sido desarrollado como u
  front end de X11 a la tecnología VIDIX. Requiere un servidor X y puede funcionar
  solo bajo un servidor X. Note que, como accede directamente al hardware y
  no usa el controlador X, los mapas de pixels en caché en la memoria de la
  tarjeta gráfica pueden estar corruptos. Puede prevenir esto limitando la
  cantidad de memoria de video usada por X con la opción "VideoRam" de
  XF86Config en la sección device. Debe establecer el valor a la cantidad de
  memoria instalada en su tarjeta menos 4MB. Si tiene menos de 8MB de ram de
  video, puede usar la opción "XaaNoPixmapCache" en la sección screen en su lugar.
  </simpara></listitem>
<listitem><simpara>
  Puede usar el subdispositivo VIDIX aplicado a varios controladores de salida
  de video, tales como: <option>-vo vesa:vidix</option>
  (<emphasis role="bold">solo en Linux</emphasis>) y <option>-vo fbdev:vidix</option>.
  </simpara></listitem>
</itemizedlist>

<para>
Como ve no impora qué controlador de salida de video se usa con
<emphasis role="bold">VIDIX</emphasis>.
</para>

<itemizedlist spacing="compact">
<title>REQUISITOS</title>
<listitem><simpara>
  La tarjeta gráfica debe estár en modo gráfico (he escrito
  <emphasis role="bold">debe</emphasis> símplemente porque lo he probado en
  modo-texto - funciona pero tiene una salida poco útil ;) Use AAlib para eso).
  <emphasis role="bold">Nota</emphasis>: Todo el mundo puede probar este truco
  comentando el modo al cambiar el controlador vo_vesa.
  </simpara></listitem>
<listitem><simpara>
  El controlador de salida de video de <application>MPlayer</application> debe
  conocer el modo de video activo y ser capaz de decir al subdispositivo
  VIDIX algunas características de video del servidor.
  </simpara></listitem>
</itemizedlist>

<formalpara>
<title>MODOS DE USO</title>
<para>
Cuando VIDIX se usa como <emphasis role="bold">subdispositivo</emphasis>
(<option>-vo vesa:vidix</option>) entonces la configuración del modo de video
es hecha por el dispositivo de salida de video (<emphasis role="bold">vo_server</emphasis>
en pocas palabras). Por ese motivo puede pasar en la línea de órdenes de
<application>MPlayer</application> las mismas teclas que para vo_server.
Además entiende <option>-double</option> como un parámetro visible globalmente.
(Recomiendo usar esto con VIDIX por lo menos en tarjetas ATI). Como para
<option>-vo xvidix</option> : actualmente reconoce las siguientes opciones:
<option>-fs -zoom -x -y -double</option>.
</para>
</formalpara>
<para>
También puede especificar el controlador VIDIX directamente con un  tercer
argumento en la línea de órdenes:

<screen>mplayer -vo xvidix:mga_vid.so -fs -zoom -double file.avi</screen>
or
<screen>mplayer -vo vesa:vidix:radeon_vid.so -fs -zoom -double -bpp 32 file.avi</screen>

Pero esto es peligroso, y no debería hacerlo. En ese caso el controlador
se ve forzado y el resultado puede ser impredicible (puede incluso
<emphasis role="bold">dejar colgado</emphasis> su ordenador). Debe hacerlo
SOLO si está absolutamente seguro de que funciona, y
<application>MPlayer</application> no lo hace automáticamente. Por favor
en ese caso dígaselo a los desarrolladores. La manera correcta de usar VIDIX es
sin argumentos para activar la autodetección del controlador.
</para>

<para>
VIDIX es una tecnología nueva y es extremadamente posible que en su
sistema no funcione. En ese caso la única solución para usted es
portarlo (principalmente con libdha). Pero se supone que debe de funcionar
en los sistemas en los que funciona X11.
</para>

<para>
Debido a que VIDIX requiere acceso directo al hardware puede ejecutarlo
como root o establecer el bit SUID en el binario de
<application>MPlayer</application> (<emphasis role="bold">Advertencia:
¡eso es un riesgo de seguridad!</emphasis>). De manera alternativa,
puede usar un módulo especial del kernel, como esto:
</para>

<procedure>
<step><para>
  Descargue la <ulink url="http://www.arava.co.il/matan/svgalib/">versión de desarrollo</ulink>
  de svgalib (por ejemplo 1.9.17), <emphasis role="bold">O</emphasis>
  descargue una versión hecha por Alex especialmente para usar con
  <application>MPlayer</application> (no necesita el código fuente de svgalib para
  compilar) desde
  <ulink url="http://www.mplayerhq.hu/~alex/svgalib_helper-1.9.17-mplayer.tar.bz2">aquí</ulink>.
  </para></step>
<step><para>
  Compile el módulo en el directorio <filename class="directory">svgalib_helper</filename>
  (puede encontrarse dentro del directorio
  <filename class="directory">svgalib-1.9.17/kernel/</filename> si ha descargado el
  código fuente del sitio de svgalib) e insmodéelo.
  </para></step>
<step><para>
  Para crear los dispositivos necesarios en el directorio
  <filename class="directory">/dev</filename>, haga un <screen>make device</screen>
  en el directorio <filename class="directory">svgalib_helper</filename> como root.
  </para></step>
<step><para>
  Mueva el directorio <filename class="directory">svgalib_helper</filename> a
  <filename class="directory">mplayer/main/libdha/svgalib_helper</filename>.
  </para></step>
<step><para>
  Requerido si descarga el código fuente desde el sitio de svgalib: Borre el comentario
  antes de la línea CFLAGS que contiene la cadena "svgalib_helper" en
  <filename class="directory">libdha/Makefile</filename>.
  </para></step>
<step><para>
  Recompile e instale libdha.
  </para></step>
</procedure>

<sect5 id="vidix-ati">
<title>Tarjetas ATI</title>
<para>
Actualmente la mayoría de las tarjetas ATI están soportadas de manera nativa,
desde la Mach64 hasta las más nuevas Radeons.
</para>

<para>
Hay dos binarios compilados: <filename>radeon_vid</filename> para Radeon y
<filename>rage128_vid</filename> para tarjetas Rage 128. Puede forzar uno
o dejar que el sistema VIDIX pruebe automáticamente todos los controladores
disponibles.
</para>
</sect5>

<sect5 id="vidix-mga">
<title>Tarjetas Matrox</title>
<para>
Hemos sido informados de que funcionan Matrox G200,G400,G450 y G550.
</para>

<para>
El controlador soporta ecualizadores de video y debe ser casi tan rápido como el
<link linkend="mga_vid">Matrox framebuffer</link>
</para>
</sect5>

<sect5 id="vidix-trident">
<title>Tarjetas Trident</title>
<para>
Hay un controlador disponible para los chipset Trident Ciberblade/i1, que
puede ser encontrado en las placas base VIA Epia.
</para>

<para>
El controlador ha sido escrito y es mantenido por Alastair M. Robinson, quien
ofrece las últimas versiones para descarga en su
<ulink url="http://www.blackfiveservices.co.uk/EPIAVidix.shtml">página personal</ulink>.
Los controladores son añadiros a <application>MPlayer</application> con solo un poco
de retardo, ya que CVS siempre debe estar actualizado.
</para>
</sect5>

<sect5 id="vidix-3dlabs">
<title>Tarjetas 3DLabs</title>
<para>
Aunque hay un controlador para los chips 3DLabs GLINT R3 y Permedia3, ninguno
ha sido probado, así que cualquier comentario o informe será bienvenido.
</para>
</sect5>
</sect4>

<sect4 id="directfb">
<title>DirectFB</title>
<blockquote><para>
&quot;DirectFB es una biblioteca de gráficos que ha sido diseñada
con los sistemas embebidos en mente. Ofrece el máximo rendimientdo en
aceleración hardware con el mínimo uso de recursos y sobrecarga.&quot; -
cita de <ulink url="http://www.directfb.org"/>
</para></blockquote>

<para>No incluiré las características de DirectFB en esta sección.</para>

<para>
Aunque <application>MPlayer</application> no está reconocido como un &quot;proveedor
de video&quot; en DirectFB, este controlador de salida debe activar la reproducción
de video a través del DirectFB. Tiene - por supuesto - aceleración, en mi Matrox
G400 la velocidad para DirectFB es la misma que con XVideo.
</para>

<para>
Intente usar siempre la versión más reciente de DirectFB. Puede usar las opciones
de DirectFB en la línea de órdenes, usando la opción <option>-dfbopts</option>.
La capa de selección puede hacerse con el método de subdispositivo, p.e.:
<option>-vo directfb:2</option> (la capa -1 se usa por defecto: autodetectado)
</para>
</sect4>

<sect4 id="dfbmga">
<title>DirectFB/Matrox (dfbmga)</title>
<para>
Lea por favor la <link linkend="directfb">sección principal de DirectFB</link> o
la información general.
</para>

<para>Este controlador de salida de video activa CRTC2 (en un segundo monitor) en la
tarjeta G400/G450/G550, mostrando video <emphasis role="bold">independientemente</emphasis>
del monitor primario.
</para>

<para>
Instrucciones sobre cómo hacer que esto funcione se pueden encontrar en la
<ulink url="../../tech/directfb.txt">sección tech</ulink>
o directamente en la
<ulink url="http://www.sci.fi/~syrjala/directfb/Matrox_TV-out_README.txt">web personal</ulink>
de Ville Syrjala.
</para>

<note><para>
La primera versión de DirectFB que hace que esto funcione fue 0.9.17 (tiene fallos,
necesita el parche <systemitem>surfacemanager</systemitem> de la URL de más arriba).
De todos modos se está trabajando para portar el código de CRTC2 a
<emphasis role="bold">mga_vid</emphasis>.
</para></note>
</sect4>
</sect3>

<sect3 id="mpeg_decoders">
<title>Decodificadores MPEG</title>

<sect4 id="dvb">
<title>DVB</title>
<para>
<application>MPlayer</application> soporta tarjetas con el chipset Siemens DVB
de vendedores como Siemens, Technotrend, Galaxis o Hauppauge. Los últimos
controladores DVB están disponibles en
<ulink url="http://www.linuxtv.org">el sitio de Linux TV</ulink>. Si quiere hacer
transcoding de software deberá usar al menos una CPU de 1GHz.
</para>

<para>
<filename>configure</filename>debe detectar su tarjeta DVB. Si no lo hace,
fuerce la detección con
</para>

<para><screen>./configure --enable-dvb</screen></para>

<para>Si tiene cabeceras ost en una ruta no estándar, establezca la ruta con</para>

<para><screen>./configure --with-extraincdir=<replaceable>directorio de fuentes de DVB</replaceable>/ost/include
</screen></para>

<para>Y luego compile e instale del modo habitual.</para>

<formalpara>
<title>USO</title>
<para>
Decodificación por hardware (reproducción de archivos estándar MPEG1/2) puede hacerse
con esta órden:
</para>
</formalpara>
<para><screen>mplayer -ao mpegpes -vo mpegpes file.mpg|vob</screen></para>

<para>
Decodificación software o transcoding de formatos diferentes a MPEG1 puede hacerse
usando una órden como esta:
</para>
<para><screen>
mplayer -ao mpegpes -vo mpegpes yourfile.ext
mplayer -ao mpegpes -vo mpegpes -vf expand yourfile.ext
</screen></para>

<para>
Tenga en cuenta que las tarjetas DVB solo soportan altugas de 288 y 576 para PAL o
240 y 480 para NTSC. Usted <emphasis role="bold">debe</emphasis> escalar para
otras alturas añadiendo <option>scale=ancho:alto</option> con el ancho y el alto
que quiera para la opción <option>-vf</option>. Las tarjetas DVB aceptan varios
anchos, como 720, 704, 640, 512, 480, 352 etc y hacen el escalado por hardware
en dirección horizontal, de modo que no necesita escalar horizontalmente en
la mayoría de los casos. Para un DivX de 512x384 (aspecto 4:3) pruebe:
</para>

<para><screen>mplayer -ao mpegpes -vo mpegpes -vf scale=512:576</screen></para>

<para>Si tiene una película widescreen y no quiere escalar a altura completa,
puede usar el filtro <option>expand=w:h</option> para añadir bandas negras.
Para ver un DivX de 640x384, pruebe:
</para>

<para><screen>mplayer -ao mpegpes -vo mpegpes -vf expand=640:576 file.avi
</screen></para>

<para>Si su CPU es demasiado lenta para un DivX de tamaño completo de 720x576,
pruebe a subescalar:</para>

<para><screen>mplayer -ao mpegpes -vo mpegpes -vf scale=352:576 file.avi
</screen></para>

<para>Si la velocidad no mejora, pruebe a subescalar verticalmente, también:</para>

<para><screen>mplayer -ao mpegpes -vo mpegpes -vf scale=352:288 file.avi
</screen></para>

<para>
For OSD and subtitles use the OSD feature of the expand filter. So, instead of
Para OSD y subtítulos use la característica OSD del filtro expand. Para ello, en lugar de
<option>expand=w:h</option> o <option>expand=w:h:x:y</option>, use
<option>expand=w:h:x:y:1</option> (el 5º parámetro <option>:1</option>
al final habilitará el renderizado OSD). Puede que quiera mover la imagen hacia arriba
un poco para obtener una zona negra más grande para los subtítulos. También puede mover
los subtítulos hacia arriba, si quedan fuera de la pantalla de TV, use la
opción <option>-subpos &lt;0-100&gt;</option> para ajustar esto (<option>-subpos 80</option>)
es una buena elección).
</para>

<para>
Para reproducir películas que no sean de 25fps en una TV PAL o con una CPU lenta,
añada la opción <option>-framedrop</option>.
</para>

<para>
Para mantener la razón de aspecto de los archivos DivX y obtener los
parámtros óptimos de escalado (escalado horizontal por hardware y
escalado vertical por software manteniendo la razón de aspecto correcta),
use el filtro dvbscale:
</para>

<para><screen>
para una TV 4:3: -vf dvbscale,scale=-1:0,expand=-1:576:-1:-1:1
para una TV 16:9: -vf dvbscale=1024,scale=-1:0,expand=-1:576:-1:-1:1
</screen></para>

<formalpara>
<title>FUTURO</title>
<para>
Si tiene alguna pregunta o desea oir anuncios sobre características futuas
y tomar parte en discusiones acerca de estos asuntos, únase a nuestra lista
de correo
<ulink url="http://mplayerhq.hu/mailman/listinfo/mplayer-dvb">MPlayer-DVB</ulink>
Por favor, recuerde que el idioma en la lista de correo es el Inglés.
</para>
</formalpara>

<para>
En el futuro puede esperar la habilidad de mostrar OSD y subtítulos usando
las características nativas de OSD de las tarjetas DVB, así como una
reproducción más fluida de películas que no estén a 25fps y transcoding en
tiempo real entre MPEG2 y MPEG4 (descompresión parcial).
</para>
</sect4>

<sect4 id="dxr2">
<title>DXR2</title>
<para>MPlayer soporta reproducción acelerada por hardware con la tarjeta Creative DXR2.</para>
<para>
Lo primero que necesita tener es los controladores DRX2 correctamente instalados. Puede
encontrar estos controladores e instrucciones para su instalación en el sitio
<ulink url="http://dxr2.sourceforge.net/">DXR2 Resource Center</ulink>.
</para>

<variablelist>
<title>USO</title>
<varlistentry>
<term><option>-vo dxr2</option></term>
<listitem><para>activa la salida TV</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-vo dxr2:x11</option> o <option>-vo dxr2:xv</option></term>
<listitem><para>activa la salida Overlay en X11</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-dxr2 &lt;opción1:opción2:...&gt;</option></term>
<listitem><para>Esta opción se usa para manejar el controlador DXR2.</para></listitem>
</varlistentry>
</variablelist>

<para>
El chipset de overlay usado en DXR2 tiene una calidad bastante mala pero
la configuración por defecto debe funcionar para todo el mundo. El OSD puede
ser usable con overlay (no en una TV) dibujando sobre el colorkey. Con la
configuración de colorkey por defecto puede obtener resultados variables, normalmente
verá el colorkey alrededor de los caracteres o algún otro efecto divertido. Pero
si ajusta bien la configuración del colorkey debe ser capaz de obtener resultados
aceptables.
</para>

<para>Por favor, vea la página de manual para ver las opciones disponibles.</para>
</sect4>

<sect4 id="dxr3">
<title>DXR3/Hollywood+</title>
<para>
<application>MPlayer</application> soporta reproducción acelerada por hardware
con las tarjetas Creative DXR3 y Sigma Designs Hollywood. Ambas tarjetas usan
el chip decodificador em8300 MPEG de Sigma Designs.
</para>

<para>
Lo primero que necesita es tener el controlador DXR3/H+ correctamente instalado,
versión 0.12.0 o posterior. Puede encontrar estos controladores e instrucciones
para su instalación en el sitio
<ulink url="http://dxr3.sourceforge.net/">DXR3 &amp; Hollywood Plus para Linux</ulink>.
<filename>configure</filename> debe detectar su tarjeta automáticamente, y la compilación
debe funcionar sin problemas.
</para>

<!-- FIXME: find a more clear presentation -->
<variablelist>
<title>USO</title>
<varlistentry>
<term><option>-vo dxr3:prebuf:sync:norm=x:<replaceable>dispositivo</replaceable></option></term>
<listitem><para>
<option>overlay</option> activa overlay en lugar de TVOut. Requiere que tenga
una configuración de overlay que funcione correctamente. La manera facil de
configurar el overlay es iniciar primero autocal. Después ejecute MPlayer con
salida dxr3 y sin overlay, ejecute dxr3view. En dxr3view puede tocar la
configuración de overlay y ver los efectos en tiempo real, quizá esta característica
esté soportada en el GUI de MPlayer en el futuro. Cuando overlay está correctamente
configurado ya no necesitará usar más dxr3view.
<option>prebuf</option> activa el prebuffering. Prebuffering es una característica del
chip em8300 que se activa para mantener más de un marco por video al mismo tiempo. Esto
significa que cuando está ejecutando con prebufferint MPlayer intentará mantener lleno
el buffer de video con datos todo el tiempo. Si está en una máquina lenta MPlayer
probablemente usa un valor cercano a, o totalmente de 100% de CPU. Esto ocurre
normalemente si reproduce flujos MPEG (como DVDs, SVCDs a.s.o.) ya que MPlayer no
tiene recodificador a MPEG y llena el buffer muy rápido.
Con reproducción de video con prebufferint es <emphasis role="bold">mucho</emphasis>
menos sensible a otros programas que quieran uso de CPU, no elimina marcos a menos
que alguna aplicación aproveche la CPU un largo periodo de tiempo.
Cuando ejecuta sin prebuffering el em8300 es mucho más sensible a cargar la CPU,
por lo que le sugerimos que active en MPlayer la opción <option>-framedrop</option>
para evitar posibles pérdidas de sincronización.
<option>sync</option> activa el nuevo motor de sincronización. Esta es actualmente
una característica experimental. Con la característica de sincronización activada en
el reloj interno de em8300 se monitoriza todas las veces, si comienza a desviarse del
reloj de MPlayer es puesto a cero causando que em8300 se salte algunos marcos que
están comenzando a tener retardo.
<option>norm=x</option> establece la norma de TV de la tarjeta DXR3 sin la
necesidad de herramientas externas como em8300setup. Normas válidas son
5 = NTSC, 4 = PAL-60, 3 = PAL. Normas especiales son 2 (auto-ajuste usando
PAL/PAL-60) y 1 (auto-ajuste usando PAL/NTSC) porque deciden qué norma usar
consultando la tasa de imágenes por segundo de la película. norm = 0 (por
defecto) no cambia la norma actual.
<option><replaceable>dispositivo</replaceable></option> = número de dispositivo
a usar si tiene más de una tarjeta em8300.
Cualquiera de esas opciones se pueden dejar sin especificar.
<option>:prebuf:sync</option> parece que se obtiene un mejor funcionamiento cuando
se reproducen películas DivX. La gente ha informado sobre problemas usando la
opción prebuf mientras se reproducían archivos MPEG1/2. Puede que desee intentar
la reproducción sin ninguna opción primero, y si tiene problemas de sincronía,
o problemas con los subtítulos, probar con la opción <option>:sync</option>.
</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-ao oss:/dev/em8300_ma-<replaceable>X</replaceable></option></term>
<listitem><para>
Para la salida de audio, donde <replaceable>X</replaceable> es el número de dispositivo
(0 si hay una tarjeta).
</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-aop list=resample:fout=<replaceable>xxxxx</replaceable></option></term>
<listitem><para>
El em8300 no puede reproducir tasas de muestreo menores de 44100Hz. Si la tasa
de muestreo es mejor que 44100Hz elija 44100Hz o 48000Hz dependiendo de cual
se ajuste mejor. P.e. si la pelíula usa 22050Hz use 44100Hz ya que
44100 / 2 = 22050, si es 24000Hz use 48000Hz porque 48000 / 2 = 24000 y de ese
modo con cualquier valor que tenga. Esto no funciona con salida de audio
digital (<option>-ac hwac3</option>).
</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-vf lavc/fame</option></term>
<listitem><para>
Para ver contenido no-MPEG en el em8300 (p.e. DivX o RealVideo) deberá especificar
un filtro de video MPEG1 como libavcodec (lavc) o libfame (fame). Actualmente
lavc es más rápido y da mejor calidad de imagen, por lo que le sugerimos que lo
use a menos que tenga algún problema con él. Vea la página de manual para más
información acerca de <option>-vf lavc/fame</option>.
El uso de lavc es altamente recomendado. Actualmente no hay manera de establecer
los fps del em8300 lo que significa que son fijos a 29.97fps. Debido a esto es
altamente recomendable que use <option>-vf lavc=<replaceable>quality</replaceable>:25</option>
especialmente si está usando prebuffering. ¿Y por qué 25 y no 29.97? bien, el motivo
es que cuando usa 29.97 la imagen se vuelve un poco saltarina. La razón de por qué
ocurre esto no la conocemos. Si establece un valor entre 25 y 27 la imagen se vuelve
estable. Por ahora todo lo que puede haer es aceptar esto sin preguntarse por qué.
</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-vf expand=-1:-1:-1:-1:1</option></term>
<listitem><para>
A pesar de que el controlador DXR3 puede poner OSD en el video MPEG1/2/4, tiene
una calidad mucho peor que el tradicional OSD de <application>MPlayer</application>,
además de varios problemas de refresco. La línea de órdenes de arriba convertirá
primero la entrada de video a MPEG4 (esto es obligatorio, lo siento), y después
aplicará un filtro de expansión que no expandirá nada (-1: por defecto), pero
servirá para aplicar OSD normal sobre la imagen (esto es lo que hace el "1" del
final).
</para></listitem>
</varlistentry>

<varlistentry>
<term><option>-ac hwac3</option></term>
<listitem><para>
El em8300 permite la reproducción de audio AC3 (sonido surround) a través de
la salida de audio digital de la tarjeta. Vea la opción <option>-ao oss</option>
de más arriba, debe usarse para especificar salida DXR3 en lugar de una tarjeta
de sonido.
</para></listitem>
</varlistentry>
</variablelist>
</sect4>

</sect3>

<sect3 id="other">
<title>Otro hardware de visualización</title>

<sect4 id="zr">
<title>Zr</title>

<para>
Se trata de un controlador de pantalla (<option>-vo zr</option>) para un número
de tarjetas de captura/reproducción de MJPEG (probado con DC10+ y Buz, y también
debe funcionar con LML33, el DC10). El controlador funciona codificando el marco
a JPEG y enviándolo luego a la tarjeta. Para la codificación JPEG se usa
<systemitem>libavcodec</systemitem>, y además es obligatorio usarlo. Con el modo
especial <emphasis>cinerama</emphasis>, puede ver películas en wide screen real
suponiendo que tiene dos proyectores y dos tarjetas MJPEG. Dependiendo de la
configuración de resolución y calidad, este controlador puede requerir una gran
cantidad de potencia de CPU, recuerde especificar <option>-framedrop</option>
si su máquina es demasiado lenta. Nota: Mi AMD K6-2 350MHz es (con
<option>-framedrop</option>) bastante adecuada para reproducir material del
tamaño de VCD y escalar a menor tamaño del original las películas.
</para>

<para>
Este controlador se comunica con el controlador del kernel disponible en
<ulink url="http://mjpeg.sourceforge.net"/>, por eso
antes de nada deberá tener este funcionando. La presencia de una tarjeta MJPEG 
es autodetectada por el script <filename>configure</filename>, si la autodetección
falla, fuércela con 
<screen>./configure --enable-zr</screen>
</para>
<para>
La salida puede ser controlada con varias opciones, una descripción larga
de las opciones puede encontrarse en la página de manual, una lista corta de
las opciones puede verse ejecutando
<screen>mplayer -zrhelp</screen>
</para>

<para>
Piense que el escalado y el OSD (información en pantalla) no son manejados
por este controlador pero pueden hacerse usando filtros de video. Por ejemplo,
suponta que tiene una película con una resolución de 512x272 y desea verla
en pantalla completa con su DC10+. Hay tres posibilidades principalmente, puede
escalar la película a un ancho de 768, 384 o 192. Por motivos de rendimiento
y calidad, puede que quiera elegir escalar la película a 384x204 usando el
escalador por software rápido bilineal. La línea de órdenes es
<screen>mplayer -vo zr -sws 0 -vf scale=384:204 movie.avi</screen>
</para>

<para>
Se puede recortar con el filtro <systemitem>crop</systemitem> y también
por este controlador directamente. Supongamos que tenemos una película que
es demasiado ancha para mostrarla en su Buz y que quiere usar <option>-zrcrop</option>
para hacer la película menos ancha, entonces puede que le sea útil la siguiente
órden
<screen>mplayer -vo zr -zrcrop 720x320+80+0 benhur.avi</screen>
</para>

<para>
si quiere usar el filtro <option>crop</option>, puede que desee hacer
<screen>mplayer -vo zr -vf crop=720:320:80:0 benhur.avi</screen>
</para>

<para>
Si aparece <option>-zrcrop</option> más veces invoca el modo
<emphasis>cinerama</emphasis>, p.e. si quiere distribuir la película en varias
TV's o proyectores para crear una pantalla más grande. Supongamos que tiene
dos proyectores. Uno lo conecta a su Buz en <systemitem>/dev/video1</systemitem>
y el otro lo conecta a su DC10+ en <systemitem>/dev/video0</systemitem>. La película
tiene una resolución de 704x288. Supongamos también que que quiere el proyector de
la derecha en blanco y negro y el otro debe tener imágenes JPEG con calidad 10, para
todo esto deberá usar la siguiente órden
<screen>
mplayer -vo zr -zrdev /dev/video0 -zrcrop 352x288+352+0 -zrxdoff 0 -zrbw \
          -zrcrop 352x288+0+0 -zrdev /dev/video1 -zrquality 10 movie.avi
</screen>
</para>

<para>
Puede ver que las opciones que aparecen antes del segundo <option>-zrcrop</option>
solo se aplican al DC10+ y que las opciones después del segundo
<option>-zrcrop</option> se aplican al Buz. El número máximo de tarjetas
MJPEG que pueden participar en el modo <emphasis>cinerama</emphasis> es cuatro,
de modo que puede construirse una pantalla de 2x2.
</para>

<para>
Finalmente un apunte importante: No inicie o pare XawTV en el dispositivo de
reproduccion durante la misma, porque puede colgar su ordenador. Sin embargo
sí va bien si <emphasis role="bold">PRIMERO</emphasis> inicia XawTV,
<emphasis role="bold">DESPUÉS</emphasis> inicia <application>MPlayer</application>,
espera a que <application>MPlayer</application> termine y
<emphasis role="bold">DESPUÉS</emphasis> detiene XawTV.
</para>
</sect4>

<sect4 id="blinkenlights">
<title>Blinkenlights</title>
<para>
Este controlador permite la reproducción usando el protocolo UDP Blinkenlinghts. Si no
sabe qué es <ulink url="http://www.blinkenlinghts.de/">Blinkenlinghts</ulink>
no necesita este controlador.
</para>
</sect4>
</sect3>

<sect3 id="tvout">
<title>Soporte de salida-TV</title>

<sect4 id="tvout-mga-g400">
<title>Tarjetas Matrox G400</title>

<para>
Bajo Linux tiene dos maneras de que la salida de TV de la G400 funcione:
</para>

<important>
<para>
para instrucciones sobre salida-TV de Matrox G450/G550 , ¡vaya a la sección siguiente!
</para>
</important>

<variablelist>
<varlistentry>
  <term>XFree86</term>
  <listitem><para>
    Usando el controladoro y el módulo HAL, disponible en 
    <ulink url="http://www.matrox.com">el sitio web  de Matrox</ulink>.
    Esto hará que tenga salida de TV bajo X.
    </para><para>
    <emphasis role="bold">Este método no obtiene reproducción acelerada</emphasis>
    ¡como bajo Windows! La segunda salida tiene solo framebuffer YUV, el
    <emphasis>BES</emphasis> (Back End Scaler, el escalador YUV en las tarjetas
    G200/G400/G450/G550) no funciona allí! El controlador de windows arregla esto
    de algún modo, probablemente usando el motor 3D para el zoom, y el framebuffer
    YUV para mostrar la imagen ampliada. Si realmente desea usar X, use
    las opciones <option>-vo x11 -fs -zoom</option>, pero irá
    <emphasis role="bold">LENTO</emphasis>, y tendrá la protección de
    <emphasis role="bold">Macrovision</emphasis> activada (puede saltarse la
    protección de Macrovisión usando éste
    <ulink url="http://avifile.sourceforge.net/mgamacro.pl">script en perl</ulink>).
    </para></listitem>
</varlistentry>
<varlistentry>
  <term>Framebuffer</term>
  <listitem><para>
    Usando los <emphasis role="bold">módulos matroxfb</emphasis> en los kernel 2.4.
    Los kernel 2.2 no tienen la característica de TVout, por lo que no se pueden
    usar para esto. Tiene que activar todas las características específicas de
    matroxfb durante la compilación (excepto MultiHead), ¡y compilarlo como
    <emphasis role="bold">módulos</emphasis>! También necesita activar I2C.
    </para>

    <procedure>
    <step><para>
      Entre en <filename class="directory">TVout/matroxset</filename> y escriba
      <command>make</command>. Instale <filename class="directory">matroxset</filename> en
      cualquier sitio que se encuentre en su <envar>PATH</envar>.
      </para></step>
    <step><para>
      Si no tiene <command>fbset</command> instalado, entre en
      <filename class="directory">TVout/fbset</filename> y escriba <command>make</command>.
      Instale <filename class="directory">fbset</filename> en cualquier sitio
      que se encuentre en su <envar>PATH</envar>.
      </para></step>
    <step><para>
      Si no tiene <command>con2fb</command> instalado, entre en
      <filename class="directory">TVout/con2fb</filename> y escriba <command>make</command>.
      Instale <filename class="directory">con2fb</filename> en cualquier sitio
      que se encuentre en su <envar>PATH</envar>.
      </para></step>
    <step><para>
      Después entre en el directorio  <filename class="directory">TVout/</filename>
      de los fuentes de <application>MPlayer</application>, y ejecute
      <filename>./modules</filename> como root. Su consola de modo-texto
      entrará en modo framebuffer (¡no hay marcha atrás!).
      </para></step>
    <step><para>
      A continuación, EDITE y ejecute el script <filename>./matroxtv</filename>.
      Esto mostrará un menú muy simple. Pulse <keycap>2</keycap> y
      <keycap>Enter</keycap>. Ahora debe tener la misma imagen en su monitor,
      y TV. Si la imagen TV (PAL por defecto) tiene algunos efectos extraños,
      el script no ha sido capaz de establecer la resolución correcta (a 640x512
      por defecto). Pruebe otras resoluciones desde el menúo experimente un poco
      con fbset.
      </para></step>
    <step><para>
      Bueno. La siguiente tarea es hacer que el cursor en tty1 (o donde sea)
      desaparezca, y desactive el apagado automático del monitor. Ejecute
      las siguientes órdenes:
      
      <screen>
echo -e '\033[?25l'
setterm -blank 0<!--
   --></screen>
      or
      <screen>
setterm -cursor off
setterm -blank 0<!--
   --></screen>

      Probablemente desee poner lo de arriba en un script, y también limpiar
      la pantalla. Para hacer que regrese el cursor:
      <screen>echo -e '\033[?25h'</screen> o
      <screen>setterm -cursor on</screen>
      </para></step>
    <step><para>
      Muy bien chaval. Inicie la reproducción con
      <screen>
mplayer -vo mga -fs -screenw 640 -screenh 512 <replaceable>nombrearchivo</replaceable><!--
   --></screen>
   
      (Si usa X, ahora cambie a matroxfb con por ejemplo
      <keycap>Ctrl</keycap>+<keycap>Alt</keycap>+<keycap>F1</keycap>.)
      Cambie <literal>640</literal> y <literal>512</literal> si establece
      otra resolución...
      </para></step>
    <step><para>
      <emphasis role="bold">¡Disfrute de la salida de TV ultra-rápida ultra-buena
      de Matrox (mejor que Xv)!</emphasis>
      </para></step>
    </procedure>
  </listitem>
</varlistentry>
</variablelist>

<formalpara>
<title>Fabricando un cable de salida de TV para Matrox</title>
<para>
Nadie se hace responsable, ni se ofrece ninguna garantía por ningún
daño causado por esta documentación.
</para>
</formalpara>

<formalpara>
<title>Cable para G400</title>
<para>
El conector de cuatro contactos de CRTC2 es una señal de video compuesto.
La toma de tierra son los contactos sexto, séptimo y octavo. (información
proporcionada por Balázs Rácz)
</para>
</formalpara>

<formalpara>
<title>Cable para G450</title>
<para>
Los cuatro primeros contactos del conector CRTC2 son la señal de video
compuesto. La tierra es el quinto, sexto, séptimo, y decimoquinto contactos
(5, 6, 7, 15). (información proporcionada por Balázs Kerekes)
</para>
</formalpara>
</sect4>

<sect4 id="tv-out_matrox_g450">
<title>Tarjetas Matrox G450/G550</title>
<para>
El soporte para salida de TV en estas tarjetas ha sido introducido recientemente,
y aún no está en la rama principal del kernel. Actualmente el
módulo <emphasis role="bold">mga_vid</emphasis> no puede usarse AFAIK, porque
el controlador de G450/G550 funciona solo en una configuración: el primer chip
CRTC (con muchas más características) en la primera pantalla (en el monitor),
y el segundo CRTC (no <emphasis role="bold">BES</emphasis> - para explicación
sobre BES, vea la sección de G400 más arriba) en TV. Actualmente solo puede
usar el controlador de salida <emphasis>fbdev</emphasis> de
<application>MPlayer</application>.
</para>

<para>
Actualmente el primer CRTC no puede ser enrutado hacia el segundo monitor. El
autor del controlador del kernel matroxfb - Petr Vandrovec - quizá añada soporte
para ello, mostrando la salida del CRTC primario en ambas pantallas al mismo
tiempo, como recomendamos actualmente para G400, vea la sección anterior.
</para>

<para>
El parche para el kernel necesario y un 'como' detallado es descargable desde
<ulink url="http://www.bglug.ca/matrox_tvout/"/>
</para>
</sect4>


<sect4 id="tvout-ati">
<title>Tarjetas ATI</title>

<formalpara>
<title>PREÁMBULO</title>
<para>
Actualmente ATI no soporta ningún chip de salida de TV bajo Linux,
debido a los problemas de licencia de la tecnología Macrovision.
</para>
</formalpara>

<itemizedlist>
<title>ESTADO DE LA SALIDA DE TV DE LAS TARJETAS ATI EN LINUX</title>
<listitem><simpara>
  <emphasis role="bold">ATI Mach64</emphasis>:
  soportado por <ulink url="http://gatos.sf.net">gatos</ulink>.
  </simpara></listitem>
<listitem><simpara>
  <emphasis role="bold">ASIC Radeon VIVO</emphasis>:
  soportado por <ulink url="http://gatos.sf.net">gatos</ulink>.
  </simpara></listitem>
<listitem><simpara>
  <emphasis role="bold">Radeon</emphasis> y <emphasis role="bold">Rage128</emphasis>:
  soportados por <application>MPlayer</application>!
  Consulte el <link linkend="vesa">controlador VESA</link> y la secciones
  <link linkend="vidix">VIDIX</link>.
  </simpara></listitem>
<listitem><simpara>
  <emphasis role="bold">Rage Mobility P/M, Radeon, Rage 128, Mobility M3/M4</emphasis>:
  soportado por <ulink url="http://www.stud.uni-hamburg.de/users/lennart/projects/atitvout/">atitvout</ulink>.
  </simpara></listitem>
</itemizedlist>

<para>
En otras tarjetas, use el controlador <link linkend="vesa">VESA</link>,
sin VIDIX. Lo malo es que se necesita una CPU potente.
</para>

<para>
Lo único que necesita hacer - <emphasis role="bold">Tener el conector
de TV conectado antes de iniciar su PC</emphasis> porque la BIOS de video
se inicializa por sí misma solo una vez durante el proceso POST.
</para>
</sect4>


<sect4 id="tvout-voodoo">
<title>Voodoo 3</title>
<para>
Consulte <ulink url="http://www.iki.fi/too/tvout-voodoo3-3000-xfree">esta URL</ulink>.
</para>
</sect4>

<sect4 id="tvout-nvidia">
<title>nVidia</title>
<para>
Lo primero, DEBE descargar los controladores de fuente-cerrada desde 
<ulink url="http://nvidia.com"/>. No voy a describir el proceso de instalación y configuración
porque no es el objetivo que pretende cubrir esta documentación.
</para>

<para>
Después de que XFree86, XVideo, y la aceleración 3D estén funcionando correctamente,
edite su sección Devide sobre la tarjeta en el archivo <filename>XF86Config</filename>,
de acuerdo con el siguiente ejemplo (adaptado para su tarjeta/TV):

<programlisting>
Section "Device"
        Identifier      "GeForce"
        VendorName      "ASUS"
        BoardName       "nVidia GeForce2/MX 400"
        Driver          "nvidia"
        #Option         "NvAGP" "1"
        Option          "NoLogo"
        Option          "CursorShadow"  "on"

        Option          "TwinView"
        Option          "TwinViewOrientation" "Clone"
        Option          "MetaModes" "1024x768,640x480"
        Option          "ConnectedMonitor" "CRT, TV"
        Option          "TVStandard" "PAL-B"
        Option          "TVOutFormat" "Composite"

EndSection
</programlisting>
</para>

<para>
Por supuesto lo importante es la parte del TwinView.
</para>
</sect4>
</sect3>
</sect2>
