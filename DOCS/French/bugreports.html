<HTML>
<BODY BGCOLOR=white>

<FONT face=&quot;Verdana, Arial, Helvetica, sans-serif&quot; size=2>

<P><B><A NAME=C>Appendice C - Comment reporter un bogue</A></B></P>

<P><B>Comment reporter un bogue ?</B></P>

<P>Commencez par lire l'<A HREF="documentation.html#D">Appendice D</A>, et le reste de la documentation. Reportez le bogue
uniquement si votre probl&egrave;me n'est pas r&eacute;f&eacute;renc&eacute; ou r&eacute;solu.</P>

<P><B>O&ugrave; ?</B></P>

<P>Souscrivez &agrave; la liste de diffusion mplayer-users:<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="http://mplayerhq.hu/mailman/listinfo/mplayer-users"> http://mplayerhq.hu/mailman/listinfo/mplayer-users</A><BR>
et d&eacute;crivez votre probl&egrave;me:<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="mailto:mplayer-users@mplayehq.hu">mplayer-users@mplayerhq.hu</A><BR>
Nous ne reporterons pas votre e-mail, inscrivez vous SVP !!!</P>

<P>N'envoyez pas d' e-mail directement &agrave; l'adresse de l'auteur !!!
Nous travaillons ensemble sur le code, donc votre probl&egrave;me int&eacute;resse tout le monde.
De plus les autres utilisateurs ont souvent la solution (configuration syst&egrave;me,
mauvais drivers, etc..), m&ecirc;me quand nous pensons qu'il s'agit d'une erreur dans le code.
Cette liste de diffusion est en anglais !</P>

<P>Merci de d&eacute;crire votre probl&egrave;me dans le d&eacute;tail, avec des exemples, et
n'oubliez pas d'inclure ceci :</P>

<P><B>Quoi ?</B></P>

<P><B><I>1. Les informations indispensables sur votre syst&egrave;me :</I></B></P>

<UL>
<LI>Distribution GNU/Linux<BR>
exemples:<UL>
    <LI>RedHat 7.1
    <LI>Slackware 7.0 + paquetages de d&eacute;veloppement de la 7.1 ...</UL>
<LI>version du noyau :<BR>
    <CODE>uname -a</CODE>
<LI>version de la libc :<BR>
    <CODE>ls -l /lib/libc[.-]*</CODE>
<LI>version du serveur X :<BR>
    <CODE>X -version</CODE>
<LI>version du gcc et de ld :<BR>
    <CODE>gcc -v<BR>
    ld -v</CODE>
<LI>version des binutils :<BR>
    <CODE>as --version</CODE>
</UL>

<P><B><I>2. Mat&eacute;riel & drivers :</I></B></P>

<UL>
<LI>Infos processeur:<BR>
    <CODE>cat /proc/cpuinfo</CODE>
<LI>Fabricant et mod&egrave;le de votre carte vid&eacute;o :<BR>
    exemples :<BR><UL>
    <LI>ASUS V3800U chip: nVidia TNT2 Ultra pro 32MB SDRAM
    <LI>Matrox G400 DH 32MB SGRAM</UL>
<LI>Type et version des drivers vid&eacute;o<BR>
    exemples :<UL>
    <LI>X built-in driver
    <LI>nvidia 0.9.623
    <LI>Utah-GLX CVS 2001-02-17
    <LI>DRI from X 4.0.3</UL>
<LI>Type et version des drivers son :<BR>
    exemples :<BR><UL>
    <LI>Creative SBLive! Gold with OSS driver from oss.creative.com
    <LI>Creative SB16 with OSS drivers of kernel
    <LI>GUS PnP with ALSA OSS emulation</UL>
<LI>En cas de doute, joignez y le r&eacute;sultat de la commande lspci -v
</UL>

<P><B>En cas de probl&egrave;me/erreur de compilation :</B></P>

<P><B><I>3. Le r&eacute;sultat des commandes configure/make :</I></B></P>

<UL><LI><CODE>make distclean</CODE>
<LI><CODE>./configure &>config.log</CODE>
<LI><CODE>     ./make &>make.log
</UL>

<P><B><I>4. Ces fichiers :</I></B></P>
<UL><LI>config.h
<LI>config.mak
<LI>libvo/config.mak
</UL>

<P><B>Pour les probl&egrave;mes de lecture :</B></P>

<P><B><I>3. Le r&eacute;sultat de la commande &quot;mplayer -v&quot; (verbose level 1)</I></B></P>
<P><CODE>&nbsp;&nbsp;&nbsp;&nbsp;mplayer -v [options] filename &amp;&gt; mplayer.log</CODE></P>
  
<P><B><I>4. Si le probl&egrave;me est sp&eacute;cifique &agrave; un fichier,
  merci d'envoyer ce fichier sur :</I></B></P>
<P><CODE>&nbsp;&nbsp;&nbsp;ftp://mplayerhq.hu/MPlayer/incoming/</CODE></P>
  en y joignant un fichier texte du m&ecirc;me nom d&eacute;crivant votre probl&egrave;me.<BR>
  G&eacute;n&eacute;ralement les premiers 1-5 MB sont suffisants pour reproduire le probl&egrave;me,
  mais auparavent vous pouvez essayer ceci :
<P><CODE>&nbsp;&nbsp;&nbsp;dd if=votre_fichier of=le_petit_fichier bs=1k count=1024</CODE></P>
  (cela coupera 1MB de 'votre_fichier' et les sauvera dans  'le_petit_fichier')
  Essayez alors de lire le petit fichier, et si le bogue persiste vous pouvez envoyer le petit fichier par ftp.<BR>
  N'envoyez jamais ces fichiers par e-mail ! Envoyez les par FTP, et postez seulement leur nom/adresse sur ce FTP.
  Si le fichier est accessible en t&eacute;l&eacute;chargement, envoyez seulement son URL !

<P><B><I>5. En cas de plantage (segfault, SIGILL, signal 4 etc...):</I></B></P>

<P><I>Si vous avez un &quot;coredump&quot; du plantage, c.f. section 5.a, sinon c.f. section 5.b:</I></P>

<P><B><I>5.a: Merci de nous envoyer le r&eacute;sultat du &quot;coredump&quot; (s'il a &eacute;t&eacute; cr&eacute;e).</I></B></P>

<P>Comment :
cr&eacute;ez la commande suivante (dans un fichier command_file) :</P>

<P><CODE>disass $eip-32 $eip+32<BR>
printf &quot;eax=%08lX\n&quot;,$eax<BR>
printf &quot;ebx=%08lX\n&quot;,$ebx<BR>
printf &quot;ecx=%08lX\n&quot;,$ecx<BR>
printf &quot;edx=%08lX\n&quot;,$edx<BR>
printf &quot;esp=%08lX\n&quot;,$esp<BR>
printf &quot;ebp=%08lX\n&quot;,$ebp<BR>
printf &quot;edi=%08lX\n&quot;,$edi<BR>
printf &quot;esi=%08lX\n&quot;,$esi<BR>
</CODE></P>

<P>puis ex&eacute;cutez simplement la ligne de commande suivante :</P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;<CODE>gdb mplayer --core=core -batch --command=command_file >mplayer.bug</CODE></P>

<P><B><I>5.b.: lancez MPlayer dans gdb :</I></B></P>
<P>Recompilez mplayer avec les instructions de d&eacute;boguage :<BR>
./configure --enable-debug<BR>
make
</P>
<P>[au prompt shell :]<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE># gdb mplayer</CODE><BR>
[au prompt gdb :]<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>&gt; run -v [options-to-mplayer] filename</CODE><BR>
  ... (attendre qu'il plante)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>&gt; bt</CODE><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<CODE>&gt; disass $eip-32 $eip+32</CODE><BR>
Envoyez nous le r&eacute;sultat complet obtenu alors !
</P>

<P><B>En g&eacute;n&eacute;ral:</B></P>

<P>Les fichiers volumineux (logs, etc...) peuvent &ecirc;tre envoy&eacute;s par FTP
(compress&eacute;s), et indiquez uniquement leur nom/adresse dans le rapport de bug.</P>

</BODY>
</HTML>
