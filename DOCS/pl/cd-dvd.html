<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>
  <HEAD>
    <TITLE>CD, DVD, VCD - MPlayer - Odtwarzacz Filmów dla
    Linuksa</TITLE>
    <LINK rel="stylesheet" type="text/css" href="default.css">
    <META http-equiv="Content-Type" content=
    "text/html; charset=iso-8859-2">
  </HEAD>

  <BODY>
    <H2><A name="drives">4.1 Napêdy CD/DVD</A></H2>

    <P>Urywek z dokumentacji Linuksa:</P>

    <P>Nowoczesne napêdy CD-ROM mog± osi±gaæ bardzo wysokie
    prêdko¶ci g³owicy, ale niektóre napêdy CD-ROM potrafi± dzia³aæ
    ze zmniejszon± prêdko¶ci±. Jest kilka powodów, które
    mog± spowodowaæ, ¿e rozwa¿ysz zmianê prêdko¶ci napêdu
    CD-ROM:</P>

    <UL>
      <LI>Raportowano o b³êdach odczytu przy wysokich prêdko¶ciach,
      zw³aszcza ze ¼le wyt³oczonymi CD-ROMami. Zmniejszenie
      prêdko¶ci mo¿e zapobiec utracie danych w tych
      sytuacjach.</LI>

      <LI>Wiele napêdów CD-ROM jest irytuj±co g³o¶nych, mniejsza
      prêdko¶æ mo¿e zmniejszyæ ha³as.</LI>
    </UL>

    <P>Mo¿esz zmniejszyæ prêdko¶æ napêdu CD-ROM IDE programem
    <CODE>hdparm</CODE> lub programem o nazwie <CODE>setcd</CODE>.
    Dzia³a to miej wiêcej tak:</P>

    <P>    <CODE>hdparm -E [prêdko¶æ] [napêd cdrom]</CODE></P>

    <P>    <CODE>setcd -x [prêdko¶æ] [napêd cdrom]</CODE></P>

    <P>Mo¿esz ponad to spróbowaæ</P>

    <P>    <CODE>echo current_speed:4 &gt; /proc/ide/[napêd
    cdrom]/settings</CODE></P>

    <P>ale bêdziesz uprawnieñ roota. Poni¿sza komenda tak¿e mo¿e
    pomóc:</P>

    <P>    <CODE>echo file_readahead:2000000 &gt; /proc/ide/[napêd
    cdrom]/settings</CODE></P>

    <P>Ustawi to pobranie wstêpne odczytu pliku na 2MB, co pomaga z
    porysowanymi CD-ROMami. Je¿eli ustawisz zbyt wysok± warto¶æ,
    napêd bêdzie ci±gle zwiêksza³ i zmniejsza³ obroty, co
    radykalnie zmniejszy wydajno¶æ. Zalecane jest by¶ ponad to
    wyregulowa³ twój napêd CD-ROM programem
    <CODE>hdparm</CODE>:</P>

    <P>    <CODE>hdparm -d1 -a8 -u1 (napêd cdrom)</CODE></P>

    <P>W³±czy to DMA, read-ahead, i odmaskowanie IRQ (przeczytaj
    stronê man dla <CODE>hdparm</CODE> po szczegó³owe
    wyja¶nienie).</P>

    <P>Prosimy o odwo³anie sie do "<CODE>/proc/ide/[napêd
    cdrom]/settings</CODE>" by lepiej dostroiæ twój CD-ROM.</P>

    <P>Napêdy SCSI nie maj± jednolitego sposobu ustawiania ich
    parametrów (Znasz jaki¶? Powiedz nam!) Jest narzêdzie, które
    dzia³a z <A href="http://das.ist.org/~georg/">napêdami Plextor
    SCSI drives</A>.</P>

    <P>FreeBSD:</P>

    <P>    Prêdko¶æ: <CODE>cdcontrol [-f urz±dzenie] speed
    [prêdko¶æ]</CODE></P>

    <P>    DMA: <CODE>sysctl hw.ata.atapi_dma=1</CODE></P>

    <H2><A name="dvd">4.2 Odtwarzanie DVD</A></H2>

    <P>Po kompletn± listê dostêpnych opcji, prosimy o przeczytanie
    manula.</P>

    <H4>Wsparcie nowego-stylu DVD (mpdvdkit2)</H4>

    <P>MPlayer u¿ywa <CODE>libdvdread</CODE> i
    <CODE>libdvdcss</CODE> do deszyfrowania i odtwarzania DVD. Te
    dwie biblioteki s± zawarte w podkatalogu
    <CODE>libmpdvdkit2/</CODE> w drzewie kodu ¼ród³owego MPlayera,
    nie musisz instalowaæ ich osobno. Zdecydowali¶my siê na takie
    rozwi±zanie poniewa¿ musieli¶my naprawiæ b³±d w
    <CODE>libdvdread</CODE> i na³o¿ych nak³adkê która dodawa³a do
    <CODE>libdvdcss</CODE> <B>obs³ugê buforowania (cache)
    skrakowanych kluczy CSS</B>. Da³o to du¿y przyrost prêdko¶ci,
    poniewa¿ klucze nie musz± byæ krakowane za ka¿dym razem przed
    odtwarzaniem.</P>

    <P>MPlayer mo¿e równie¿ u¿ywaæ systemowych bibliotek
    <CODE>libdvdread</CODE> i <CODE>libdvdcss</CODE> , ale to
    rozwi±zanie <B>nie</B> jest polecane, poniewa¿ mo¿e to
    powodowaæ b³êdy, niekompatybilno¶æ bibliotek i wolniejsz±
    prêdko¶æ.</P>

    <H4>wsparcie dla DVD Navigation (dvdnav)</H4>

    <P>Wsparcie dla DVD navigation (menu na p³ycie DVD, z wyborem
    scen, napisów itp.; przyp.t³um.). przez <CODE>dvdnav</CODE>
    zaczê³o dzia³aæ, ale nigdy nie zosta³o poprawnie zakoñczone i
    aktualnie nie jest rozwijane. Kto wie, mo¿e jeszcze zostanie
    ukoñczone.</P>

    <H4>Wsparcie dla starego-stylu DVD - OPCJONALNIE</H4>

    <P>Przydatne je¿eli chcesz odtworzyæ zakodowane VOBy z
    <B>twardego dysku</B>. W tym celu skompiluj i zainstaluj
    <B>libcss</B> 0.0.1 (nie nowszy) (Je¿eli MPlayer nie wykryjê
    go, u¿yj opcji <CODE>-csslib /¶cie¿ka/do/libcss.so</CODE>). By
    go u¿yæ, musisz byæ rootem, u¿ywaæ MPlayera z suid root lub
    kazaæ MPlayerowi u¿yæ programu wrapera z suid-root o nazwie
    fibmap_mplayer.</P>

    <H4>Struktura DVD</H4>

    <P>Dyski DVD maj± po 2048 bajtów na sektor z ECC/CRC. Maj±
    zazwyczaj system plików UDF na pojedyñczej ¶cie¿ce,
    zawieraj±cej ró¿ne pliki (ma³e pliki .IFO i .BUK i du¿e (1GB)
    pliki .VOB). To s± prawdziwe pliki które mo¿esz
    kopiowaæ/odtwarzaæ z zamontowanego systemu plików na
    niezaszyfrowanym DVD.</P>

    <P>Pliki .IFO zawieraj± informacje nawigacyjne filmu
    (rozdzia³y/tytu³u/k±ty kamery, tablice jêzyków, itd.) i s±
    wymagane do odczytu i interpretacji zawarto¶ci .VOB (filmu).
    Pliki .BUK s± ich kopiami zapasowymi. Wszêdzie wykorzystuj±
    <B>sektory</B>, wiêc musia³ u¿yæ adresowania sektorów raw na
    dysku by u¿yæ nawigacji DVD lub zdeszyfrowaæ zawarto¶æ.</P>

    <P>Ca³e wsparcie dla starego-stylu DVD jest przez
    <CODE>libcss</CODE>, zatem potrzebuje zamontowanego systemu
    plików DVD i dostêpu dla raw opartego na sektorach do
    urz±dzenia. Na nieszczê¶cie musisz byæ (w Linuksie) rootem by
    pobraæ adres sektora pliku. Masz nastêpuj±ce rozwi±zania:</P>

    <UL>
      <LI>Bycie rootem lub u¿ycie MPlayera z suid-root.</LI>

      <LI>Kazaæ MPlayerowi u¿yæ programu wrapera z suid-root o
      nazwie fibmap_mplayer by mieæ dostêp do DVD (u¿ywane tylko w
      odtwarzaniu DVD w starym-stylu DVD z
      <CODE>libcss</CODE>).</LI>

      <LI>W ogóle nie u¿ywaj sterownika systemu plików kernela i
      reimplementacji tego w przestrzeni u¿ytkownika.
      <CODE>libdvdread</CODE> 0.9.x i <CODE>libmpdvdkit</CODE>
      robi± to (wsparcie nowego-stylu DVD). System plików UDF
      kernela nie jest potrzebny, poniewa¿ biblioteki te maj± ju¿
      w³asny wbudowany sterownik systemu plików UDF. Ponad to DVD
      nie musz± byæ montowane, poniewa¿ tylko dostêp raw oparty na
      sektorach jest u¿yty.</LI>
    </UL>

    <P>Czasami <CODE>/dev/dvd</CODE> nie mo¿ê byæ odczytany przez
    u¿ytkowników, wiêc autorzy <CODE>libdvdread</CODE>
    zaimpletowali emulacjê która przesy³a adresy sektorów do
    nazwplików+przesuniêæ, by zemulowaæ dostêp raw na zamontowanym
    systemie plików lub nawet na dysku twardym.</P>

    <P><CODE>libdvdread</CODE> akceptuje nawet punkty montowania
    (ang. mountpoint) zamiast nazwy urz±dzenia dla dostêpu raw i
    sprawdza <CODE>/proc/mounts</CODE> by pobraæ nazwê urz±dzenia.
    Zrobione to zosta³o dla Solarisa, gdzie nazwy urz±dzeñ s±
    dynamicznie przydzielane.</P>

    <P>Domy¶lnym urz±dzeniem DVD jest <CODE>/dev/dvd</CODE>. je¿eli
    ustawi³e¶ inne, stwórz link symboliczny, lyb podaj poprawne
    urz±dzenie w linii komend opcj± <CODE>-dvd-device</CODE>.</P>

    <H4>Autentyfikacja DVD</H4>

    <P>Wsparcia dla autentyfikacji i metod deszyfrowania
    nowego-stylu DVD s± ukoñczone, u¿ywaj± poprawionej biblioteki
    <CODE>libdvdcss</CODE> (patrz wy¿ej). Metoda mo¿e byæ okre¶lona
    poprzez zmienn± systemow± <CODE>DVDCSS_METHOD</CODE>, która
    mo¿e byæ ustawiona na <CODE>key (klucz)</CODE>, <CODE>disk
    (dysk)</CODE> lub <CODE>title (tytu³)</CODE>.</P>

    <P>Je¿eli nic nie jest okre¶lone, biblioteka próbuje poni¿szych
    metod (domy¶lnie: key, title request):</P>

    <OL>
      <LI><B>bus key:</B> Ten klucz jest negocjowany podczas
      autentyfikacji (d³ugi mix ioctl'i wymiany ró¿nych kluczy,
      oprogramowanie kryptograficzne) i u¿ywa go do deszyfracji
      kluczy tytu³u i dysku zanim wy¶le je przez niechronion±
      magistralê (bus) (by zapobiec pods³uchiwaniu). Klucz
      magistrali jest wymagany do pobrania i predeszyfracji
      zaszyfrowanego klucza dysku.</LI>

      <LI><B>cached key:</B> MPlayer szuka aktualnie skrakowanych
      kluczy tytu³ów które s± zapisane w katalogu
      <CODE>~/.mplayer/DVDKeys</CODE> (szybkie ;).</LI>

      <LI><B>key:</B> Je¿eli nie s± dostêpne zbuforowane klucze,
      MPlayer próbuje deszyfrowaæ klucz dysku grup± kluczy
      do³±czonych do odtwarzacza.</LI>

      <LI><B>disk:</B> Je¿eli metoda klucza zawiedzie (np. nie ma
      do±czony kluczy do odtwarzacza), MPlayer skrakuje klucz dysku
      u¿ywaj±c algorytmu brute force. Ten proces intensywnie
      wykorzystuje CPU i wymaga 64 MB pamiêci (16M 32Bit wpisów
      tablicy mieszaj±cej (org. hash table)) by zapisaæ tymczasowe
      dane. Ta metoda powinna zawsze dzia³aæ (wolno).</LI>

      <LI><B>title request:</B> Z kluczem dysku MPlayer wymaga
      zaszyfrowanych kluczy tytu³ów, które s± wewn±trz <I>ukrytych
      sektorów</I> u¿ywaj±cych <CODE>ioctl()</CODE>. Kod regionu
      (dla USA, Japoni, Europy inny, kwestia zabezpieczeñ; przyp.
      t³um.) urz±dzeñ RPC-2 jest sprawdzany w tym kroku i mo¿e siê
      nie powie¶æ w takich urz±dzeniach. Je¿eli siê powiedzie,
      klucz tytu³u zostanie zdeszyfrowany z magistral± (bus) i
      kluczem dysku.</LI>

      <LI><B>title:</B> Ta metoda zostanie u¿yta, je¿eli metoda
      "title request" (patrz wy¿ej) zawiedzie i nie polega na
      wymianie klucza z napêdem DVD. U¿ywa ataku kryptograficznego
      by bezpo¶rednio odgadn±æ klucz tytu³u (poprzez odnajdywanie
      powtarzaj±cych siê wzorców w zaszyfrowanej zawarto¶ci VOB i
      odgadywaniu, ¿e tekst jawny odpowiadaj±cy pierwszym
      zaszyfrowanym bajtom jest kontunuacj± wzorca). Ta metoda jest
      równie¿ znana jako "known plaintext attack" (atak znanym
      tekstem jawnym) lub "DeCSSPlus". W wielu przypadkach ta
      metoda zawodzi, poniewa¿ nie ma wystarczaj±cej ilo¶ci
      zaszyfrowanych informacji na dysku, by sporz±dziæ statystyki
      ataku lub dlatego, ¿e klucz zmienia siê wewn±trz tytu³u. Ta
      metoda jest jedynym rozwi±zaniem by zdeszyfrowaæ DVD zapisane
      na dysku twardym lub z DVD z b³êdnym kodem regionu w napêdach
      RPC2 (wolny).</LI>
    </OL>

    <P>Napêdy DVD RPC-1 chroni± ustawienia regionu tylko
    programowo. Napêdu RPC-2 maj± sprzêtow± ochronê która pozwala
    tylko na 5 zmian. Mo¿liwe, ¿e bêdziesz potrzebowa³/bêdzie
    zalecany upgrade firmware'u do RPC-1, je¿li masz napêd DVD
    RPC-2. Upgrade'y firmware'u mo¿na znale¶æ tej <A href=
    "http://www.firmware-flash.com">stronie firmware'owej</A>.
    Je¿eli nie ma tam upgrade'u firmware'u dostêpnego dla twojego
    urz±dzenia, u¿yj <A href=
    "http://www.linuxtv.org/download/dvd/dvd_disc_20000215.tar.gz">narzêdzia
    regionset</A> by ustawiæ kod regionu twojego napêdu DVD (pod
    Linuksem). <B>Ostrze¿enie:</B> Mo¿esz zmieniæ region tylko 5
    razy.</P>

    <H2><A name="vcd">4.3 Odtwarzanie VCDk</A></H2>

    <P>Po kompletn± listê dostêpnych opcji, prosimy o przeczytanie
    manuala. Sk³adnia dla standardowego Video CD (VCD) jest
    nastêpuj±ca:</P>

    <P><CODE>mplayer -vcd &lt;¶cie¿ka&gt; [-cdrom-device
    &lt;uz±dzenie&gt;]</CODE></P>

    <P>przyk³ad: <CODE>mplayer -vcd 2 -cdrom-device
    /dev/hdc</CODE></P>

    <P>Domy¶lnym u¿±dzeniem VCD jest <CODE>/dev/cdrom</CODE>.
    Je¿eli twoje ustawienia s± inne, stwórz link symboliczny lub
    podaj poprawne urz±dzenie w lini komend opcj±
    <CODE>-cdrom-device</CODE>.</P>

    <P><B>Informacja:</B> Najnowsze napêdy Plextora i niektóre
    CD-ROMy SCSI Toshiba maj± straszn± osi±gi w czytaniu VCDików.
    Jest tak, poniewa¿ CDROMREADRAW ioctl nie jest w pe³ni
    zaimpletowany dla tych napêdów. Je¿li masz jak±¶ wiedzê na
    temat programowania SCSI, prosimy <A href=
    "tech/patches.txt">pomó¿ nam</A> wprowadziæ ogólne wsparcie dla
    SCSI VCD.</P>

    <H4>Struktura VCD</H4>

    <P>Dyski VCD sk³adaj± siê z jednej lub wiêcej ¶cie¿ek:</P>

    <UL>
      <LI>Pierwsza ¶cie¿ka jest ma³± ¶cie¿k± danych 2048
      bajtów/sektor z systemem plików iso9660, zazwyczaj
      zawieraj±c± odtwarzacz VDC dla Windowsa i mo¿e inne
      informacje (zdjêcia, tekst, itp).</LI>

      <LI>Druga i inne ¶cie¿ki s± to MPEGi raw, 2324 bajtów/sektor
      (film), zawieraj±ce jeden pakiet danych MPEG PS na sektor
      zamiast systemu plików. Podobnie do ¶cie¿ek audio CD, te
      ¶cie¿ki <B>nie mog± byæ zamontowane</B> (Montowa³e¶
      kiedykolwiek audio CD, by je odtworzyæ?). Poniewa¿ wiêkszo¶æ
      filmów jest w tej ¶cie¿ce, powiniene¶ najpierw spróbowaæ
      <CODE>-vcd 2</CODE>.</LI>

      <LI>Istniej± dyski VCD bez pierwszej ¶cie¿ki (pojedyñcza
      ¶cie¿ka i ca³kowity brak systemu plików). Nadal mo¿na je
      odtworzyæ, ale nie mog± byæ zamontowane.</LI>
    </UL>

    <H4>O plikach .DAT:</H4>

    <P>Widoczny plik ~600 MB na pierwszej ¶cie¿ce w zamontowanym
    VCD nie jest prawdziwym plikiem! Jest on wiêc przekierowaniem
    ISO z w³asn± nazw±, stworzonym by pozwoliæ Windowsom
    przechwycenie tych ¶cie¿ek (Windowsy w ogóle nie pozwalaj± na
    dostêp raw urz±dzenia). Pod Linuksem nie mo¿esz kopiowaæ lub
    odtwarzaæ tych plików (zawieraj± ¶mieci). Pod Windowsami jest
    to mo¿liwe, poniewa¿ ich sterownik iso9660 emuluje odczyt raw
    ¶cie¿ek w tym pliku. By odtworzyæ pliki .DAT potrzebujesz
    sterownika kernela który mo¿esz znale¶æ w wersji linuksowej
    PowerDVD. Zawiera on zmodyfikowany sterownik systemu plików
    iso9660 (<CODE>vcdfs/isofs-2.4.X.o</CODE>), który ma dostêpn±
    emulacjê ¶cie¿ek raw bezpo¶rednio do ukrytych plików .DAT.
    Je¿eli zamontujesz dysku u¿ywaj±c tego sterownika, mo¿esz
    kopiowaæ i nawet odtwarzaæ pliki .DAT MPlayerem. Ale to <B>nie
    zadzia³a</B> ze standardowym sterownikiem iso9660 kernela
    Linuksa! U¿yj zamiast tego opcji <CODE>-vcd</CODE>.
    Alternatywami dla kopiowania VCD s±: nowy sterownik kernela <A
    href="http://www.elis.rug.ac.be/~ronsse/cdfs/">cdfs</A> (nie
    jest czê¶ci± oficjalnego kernela) który pokazuje <I>sesje</I>
    CD jako pliki obrazów i <A href=
    "http://cdrdao.sourceforge.net/">cdrdao</A>, aplikacja do
    grabowania/kopiowania CD metod± bit-by-bit.</P>
  </BODY>
</HTML>

