DVD tamogatas az MPlayer-ben!
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Olvasd el a 'DVD-FAQ' file-t is (es keruld el az ottlevo atiranyitast:).

FONTOS: _NE_ kerj semmi funkciot a DVD visszajatszashoz. Ez egy roppantul
kiserleti gany dolog. Talan nem is fog mukodni nalad. Ha tudsz segiteni, most
tedd meg! Eloszor a letezo problemakat szeretnenk fixalni, es csak utana
gondolkozni a tovabbi DVD funkciok beepitesen.

Ez egyben azt is jelenti hogy a jelenleg letezo DVD funkciok a fejlesztoknek,
es nem a felhasznaloknak vannak szanva!

MPlayer forditasa libcss tamogatassal
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Eloszor forditsd le es installald a libcss-t.
Utana forditsd ujra az MPlayer-t ezekkel az opciokkal:

./configure --enable-css --withcsslibdir=/usr/local/lib --withcssincidr=/usr/local/include

(termeszetesen beirhatod a sajat opcioidat is)

--withcsslibdir=/usr/local/lib
	Ez a konyvtar tartalmazza a libcss.so-t. Jo ha bennevan az
	/etc/ld.so.conf-ban is.
	
--withcssindfir=/usr/local/include
	Ez tartalmazza a 'css.h' header file-t.

MEGJ.: Jelenleg nincs automatikus detektalas a libcss-hez! Ezeket az opciokat
  MUSZAJ megadnod.

VOB file-ok lejatszasa kozvetlenul DVD-rol
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mplayer -dvd /dev/dvd /mnt/cdrom/video_ts/vts_01_1.vob

ahol,

	'-dvd /dev/dvd' megmondja MPlayer-nek hogy hol keresse a DVD meghajtot.
	A lemez autentikaciojanal hasznalatos.

	A filenev egyszeruen a VOB file neve a lemezen.

Ugy vettem eszre, hogy az autentikalas root jogosultsagot kivan meg,
ugyhogy muszaj lesz root-kent futtatni az MPlayer-t! (lasd 'Problemak' resz).

MEGJEGYZES a hangrol:
	Ugy tunik hogy az MPlayer neha nem talalja meg az elso audio folyamot.
	Megadhatod peldaul az '-aid 128' opcioval. Kiserletezz 128,129 es
	hasonlo ertekekkel is. Lasd 'Problemak' resz.


Uj file-k a forrasban
~~~~~~~~~~~~~~~~~~~~~
dvdauth.c
	Ez vegzi a DVD autentikaciot, es kitolti a key_disc es key_title-t.

dvdauth.h
	header file

Ezek a file-ok '#ifdef ... #endif' blokkon belul vannak, igy ha a libcss
tamogatas ki van kapcsolva, semmi hatasuk nincs, es az MPlayer se lesz
libcss-hez linkelve.


Modositasok a forrasban
~~~~~~~~~~~~~~~~~~~~~~~
* (stream.c) STREAM_BUFFER_SIZE atallitva 2048-ra
* (demux_mpg.c) az eddigi 'encrypted VOB file is not supported' uzenet
  most egy flag-ot allit 1-re. A fejlec elemzese utan, ha ez a flag be van
  allitva, meghivjuk a libcss descramble funkciojat.
* (stream.c) nehany helyen ahol az eddigi 4096 hosszusagu STREAM_BUFFER_SIZE
  hardcoded volt a forrasba, most 'STREAM_BUFFER_SIZE' van
* (mplayer.c) dvd autentikacio, seekeles meghivasa


Teljesitmeny
~~~~~~~~~~~~
Az en AMD K6/2-mon, a G400-am hardware-es skalazasaval es colorspace
konverziojaval 70%-osan terheli a lejatszas a CPU-t, ha '-nosound'.
Sajnos hanggal egyutt mar nem eleg a gepem :( Talan meg lehet ezen
javitani ...
Azthiszem, nem olyan rossz a helyzet ... Nehany baratom szerint a xine
80-90% CPU-t hasznal DVD lejatszasnal sokkal erosebb gepeken, mint
peldaul 1Ghz-es Athlon-on (ugy tudom Windows alatt a minimalis konfiguracio
DVD-hez 300Mhz-es celeron kornyeken van).

Tipp: kikapcsoltam a libac3 downmix funkcioit (persze igy nincs hang) es
az audio dekodolashoz szukseges CPU hasznalat rogton visszaesett 24-rol
11%-ra. Jol latszik hogy optimalizalni kell a downmix-et (KNI kod nemszamit
K6/2-n).


Problemak (TODO)
~~~~~~~~~~~~~~~~
* az autentikacionak root jogok kellenek. Ez azert furcsa mert az OMS
  kepes erre user-kent is.
* hang. Egyetlen DVD lemezem van (Matrix), ennyivel tesztelem az MPlayer-t.
  Nehany VOB file-nak angol hangja van, nehanynak spanyol, es van aminek
  egyaltalan nincs is.
  Ugy _tunik_ hogy ha megadom az '-aid 128' opciot, mindnek angol nyelve
  lesz ...
* furcsa effektek, de csak NEHANY VOB file-lal (ugy nez ki mint valami
  interlace effekt, azaz minden 2. vonal az elozo kepkockabol van).


Beepitendo funkciok
~~~~~~~~~~~~~~~~~~~
* chapter scanner
* audio folyam scanner, es futas kozbeni valtas lehetosege
  (eloszoris indulaskor kellene valasztasi lehetoseg, lasd 'Problemak')
* DVD menu
  Megtalaltam (legalabbis a 'Matrix'-on) a menu VOB-ot, de nem tudom
  hogyan kell hasznalni.
  (egy kis szemnyuzo OMS nezegetes utan ugytunik hogy az .ifo file-okat
  kellene beolvasni)
* subtitle support
* OSD/GUI (?) support for select chapter, subtitle and audio stream
* getting some documentation on DVD format, eg: which is the 'root' VOB
  file on the disc in video_ts directory, which is the menu and so on.
* improve performance (see 'Performance' above)


No sound problem (from Matrix DVD, the menu VOB)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
End of packet while searching for PCM header

DEMUXER: Too many (2048 in 4131540 bytes) video packets in the buffer!
(maybe you play a non-interleaved stream/file or video codec failed)
MPEG: No Audio stream found...  ->nosound

However this does not occur if you specify '-aid 128'.
